/*! For license information please see vrpc.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.vrpc=t():e.vrpc=t()}(self,()=>(()=>{var e={79:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},117:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(2586),o=r(5765),i=r(4227),s=r(8660),a={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,parentSchema:a,data:l,it:c}=e;"all"===c.opts.removeAdditional&&void 0===a.additionalProperties&&s.default.code(new n.KeywordCxt(c,s.default,"additionalProperties"));const u=(0,o.allSchemaProperties)(r);for(const e of u)c.definedProperties.add(e);c.opts.unevaluated&&u.length&&!0!==c.props&&(c.props=i.mergeEvaluated.props(t,(0,i.toHash)(u),c.props));const h=u.filter(e=>!(0,i.alwaysValidSchema)(c,r[e]));if(0===h.length)return;const f=t.name("valid");for(const r of h)p(r)?d(r):(t.if((0,o.propertyInData)(t,l,r,c.opts.ownProperties)),d(r),c.allErrors||t.else().var(f,!0),t.endIf()),e.it.definedProperties.add(r),e.ok(f);function p(e){return c.opts.useDefaults&&!c.compositeRule&&void 0!==r[e].default}function d(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},f)}}};t.default=a},208:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportTypeError=t.checkDataTypes=t.checkDataType=t.coerceAndCheckDataType=t.getJSONTypes=t.getSchemaTypes=t.DataType=void 0;const n=r(396),o=r(7887),i=r(8708),s=r(9029),a=r(4227);var l;function c(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(n.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}!function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"}(l||(t.DataType=l={})),t.getSchemaTypes=function(e){const t=c(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},t.getJSONTypes=c,t.coerceAndCheckDataType=function(e,t){const{gen:r,data:n,opts:i}=e,a=function(e,t){return t?e.filter(e=>u.has(e)||"array"===t&&"array"===e):[]}(t,i.coerceTypes),c=t.length>0&&!(0===a.length&&1===t.length&&(0,o.schemaHasRulesForType)(e,t[0]));if(c){const o=f(t,n,i.strictNumbers,l.Wrong);r.if(o,()=>{a.length?function(e,t,r){const{gen:n,data:o,opts:i}=e,a=n.let("dataType",s._`typeof ${o}`),l=n.let("coerced",s._`undefined`);"array"===i.coerceTypes&&n.if(s._`${a} == 'object' && Array.isArray(${o}) && ${o}.length == 1`,()=>n.assign(o,s._`${o}[0]`).assign(a,s._`typeof ${o}`).if(f(t,o,i.strictNumbers),()=>n.assign(l,o))),n.if(s._`${l} !== undefined`);for(const e of r)(u.has(e)||"array"===e&&"array"===i.coerceTypes)&&c(e);function c(e){switch(e){case"string":return void n.elseIf(s._`${a} == "number" || ${a} == "boolean"`).assign(l,s._`"" + ${o}`).elseIf(s._`${o} === null`).assign(l,s._`""`);case"number":return void n.elseIf(s._`${a} == "boolean" || ${o} === null
              || (${a} == "string" && ${o} && ${o} == +${o})`).assign(l,s._`+${o}`);case"integer":return void n.elseIf(s._`${a} === "boolean" || ${o} === null
              || (${a} === "string" && ${o} && ${o} == +${o} && !(${o} % 1))`).assign(l,s._`+${o}`);case"boolean":return void n.elseIf(s._`${o} === "false" || ${o} === 0 || ${o} === null`).assign(l,!1).elseIf(s._`${o} === "true" || ${o} === 1`).assign(l,!0);case"null":return n.elseIf(s._`${o} === "" || ${o} === 0 || ${o} === false`),void n.assign(l,null);case"array":n.elseIf(s._`${a} === "string" || ${a} === "number"
              || ${a} === "boolean" || ${o} === null`).assign(l,s._`[${o}]`)}}n.else(),d(e),n.endIf(),n.if(s._`${l} !== undefined`,()=>{n.assign(o,l),function({gen:e,parentData:t,parentDataProperty:r},n){e.if(s._`${t} !== undefined`,()=>e.assign(s._`${t}[${r}]`,n))}(e,l)})}(e,t,a):d(e)})}return c};const u=new Set(["string","number","integer","boolean","null"]);function h(e,t,r,n=l.Correct){const o=n===l.Correct?s.operators.EQ:s.operators.NEQ;let i;switch(e){case"null":return s._`${t} ${o} null`;case"array":i=s._`Array.isArray(${t})`;break;case"object":i=s._`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":i=a(s._`!(${t} % 1) && !isNaN(${t})`);break;case"number":i=a();break;default:return s._`typeof ${t} ${o} ${e}`}return n===l.Correct?i:(0,s.not)(i);function a(e=s.nil){return(0,s.and)(s._`typeof ${t} == "number"`,e,r?s._`isFinite(${t})`:s.nil)}}function f(e,t,r,n){if(1===e.length)return h(e[0],t,r,n);let o;const i=(0,a.toHash)(e);if(i.array&&i.object){const e=s._`typeof ${t} != "object"`;o=i.null?e:s._`!${t} || ${e}`,delete i.null,delete i.array,delete i.object}else o=s.nil;i.number&&delete i.integer;for(const e in i)o=(0,s.and)(o,h(e,t,r,n));return o}t.checkDataType=h,t.checkDataTypes=f;const p={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>"string"==typeof e?s._`{type: ${e}}`:s._`{type: ${t}}`};function d(e){const t=function(e){const{gen:t,data:r,schema:n}=e,o=(0,a.schemaRefOrVal)(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:o,schemaValue:o,parentSchema:n,params:{},it:e}}(e);(0,i.reportError)(t,p)}t.reportTypeError=d},343:(e,t,r)=>{"use strict";const{isUUID:n}=r(4834),o=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,i=["http","https","ws","wss","urn","urn:uuid"];function s(e){return!0===e.secure||!1!==e.secure&&!!e.scheme&&!(3!==e.scheme.length||"w"!==e.scheme[0]&&"W"!==e.scheme[0]||"s"!==e.scheme[1]&&"S"!==e.scheme[1]||"s"!==e.scheme[2]&&"S"!==e.scheme[2])}function a(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function l(e){const t="https"===String(e.scheme).toLowerCase();return e.port!==(t?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}const c={scheme:"http",domainHost:!0,parse:a,serialize:l},u={scheme:"ws",domainHost:!0,parse:function(e){return e.secure=s(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e},serialize:function(e){if(e.port!==(s(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){const[t,r]=e.resourceName.split("?");e.path=t&&"/"!==t?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}},h={http:c,https:{scheme:"https",domainHost:c.domainHost,parse:a,serialize:l},ws:u,wss:{scheme:"wss",domainHost:u.domainHost,parse:u.parse,serialize:u.serialize},urn:{scheme:"urn",parse:function(e,t){if(!e.path)return e.error="URN can not be parsed",e;const r=e.path.match(o);if(r){const n=t.scheme||e.scheme||"urn";e.nid=r[1].toLowerCase(),e.nss=r[2];const o=f(`${n}:${t.nid||e.nid}`);e.path=void 0,o&&(e=o.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e},serialize:function(e,t){if(void 0===e.nid)throw new Error("URN without nid cannot be serialized");const r=t.scheme||e.scheme||"urn",n=e.nid.toLowerCase(),o=f(`${r}:${t.nid||n}`);o&&(e=o.serialize(e,t));const i=e,s=e.nss;return i.path=`${n||t.nid}:${s}`,t.skipEscape=!0,i},skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:function(e,t){const r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&n(r.uuid)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e){const t=e;return t.nss=(e.uuid||"").toLowerCase(),t},skipNormalize:!0}};function f(e){return e&&(h[e]||h[e.toLowerCase()])||void 0}Object.setPrototypeOf(h,null),e.exports={wsIsSecure:s,SCHEMES:h,isValidSchemeName:function(e){return-1!==i.indexOf(e)},getSchemeHandler:f}},396:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRules=t.isJSONType=void 0;const r=new Set(["string","number","integer","boolean","null","object","array"]);t.isJSONType=function(e){return"string"==typeof e&&r.has(e)},t.getRules=function(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}},422:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5765),o=r(9029),i={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>o.str`must match pattern "${e}"`,params:({schemaCode:e})=>o._`{pattern: ${e}}`},code(e){const{data:t,$data:r,schema:i,schemaCode:s,it:a}=e,l=a.opts.unicodeRegExp?"u":"",c=r?o._`(new RegExp(${s}, ${l}))`:(0,n.usePattern)(e,i);e.fail$data(o._`!${c}.test(${t})`)}};t.default=i},494:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateTuple=void 0;const n=r(9029),o=r(4227),i=r(5765),s={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:r}=e;if(Array.isArray(t))return a(e,"additionalItems",t);r.items=!0,(0,o.alwaysValidSchema)(r,t)||e.ok((0,i.validateArray)(e))}};function a(e,t,r=e.schema){const{gen:i,parentSchema:s,data:a,keyword:l,it:c}=e;!function(e){const{opts:n,errSchemaPath:i}=c,s=r.length,a=s===e.minItems&&(s===e.maxItems||!1===e[t]);if(n.strictTuples&&!a){const e=`"${l}" is ${s}-tuple, but minItems or maxItems/${t} are not specified or different at path "${i}"`;(0,o.checkStrictMode)(c,e,n.strictTuples)}}(s),c.opts.unevaluated&&r.length&&!0!==c.items&&(c.items=o.mergeEvaluated.items(i,r.length,c.items));const u=i.name("valid"),h=i.const("len",n._`${a}.length`);r.forEach((t,r)=>{(0,o.alwaysValidSchema)(c,t)||(i.if(n._`${h} > ${r}`,()=>e.subschema({keyword:l,schemaProp:r,dataProp:r},u)),e.ok(u))})}t.validateTuple=a,t.default=s},579:(e,t,r)=>{var n=r(3738).default;e.exports=function(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(n(e)+" is not iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},617:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(208),o=r(9029),i=r(4227),s=r(6250),a={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:e,j:t}})=>o.str`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>o._`{i: ${e}, j: ${t}}`},code(e){const{gen:t,data:r,$data:a,schema:l,parentSchema:c,schemaCode:u,it:h}=e;if(!a&&!l)return;const f=t.let("valid"),p=c.items?(0,n.getSchemaTypes)(c.items):[];function d(i,s){const a=t.name("item"),l=(0,n.checkDataTypes)(p,a,h.opts.strictNumbers,n.DataType.Wrong),c=t.const("indices",o._`{}`);t.for(o._`;${i}--;`,()=>{t.let(a,o._`${r}[${i}]`),t.if(l,o._`continue`),p.length>1&&t.if(o._`typeof ${a} == "string"`,o._`${a} += "_"`),t.if(o._`typeof ${c}[${a}] == "number"`,()=>{t.assign(s,o._`${c}[${a}]`),e.error(),t.assign(f,!1).break()}).code(o._`${c}[${a}] = ${i}`)})}function m(n,a){const l=(0,i.useFunc)(t,s.default),c=t.name("outer");t.label(c).for(o._`;${n}--;`,()=>t.for(o._`${a} = ${n}; ${a}--;`,()=>t.if(o._`${l}(${r}[${n}], ${r}[${a}])`,()=>{e.error(),t.assign(f,!1).break(c)})))}e.block$data(f,function(){const n=t.let("i",o._`${r}.length`),i=t.let("j");e.setParams({i:n,j:i}),t.assign(f,!0),t.if(o._`${n} > 1`,()=>(p.length>0&&!p.some(e=>"object"===e||"array"===e)?d:m)(n,i))},o._`${u} === false`),e.ok(f)}};t.default=a},862:(e,t,r)=>{"use strict";var n,o,i;(()=>{var s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,u=(e,t)=>()=>(e&&(t=e(e=0)),t),h=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),f=(e,t)=>{for(var r in t)s(e,r,{get:t[r],enumerable:!0})},p=e=>((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of l(t))!c.call(e,r)&&undefined!==r&&s(e,r,{get:()=>t[r],enumerable:!(n=a(t,r))||n.enumerable});return e})(s({},"__esModule",{value:!0}),e),d=u(()=>{}),m={};function g(e){throw new Error("Node.js process "+e+" is not supported by JSPM core outside of Node.js")}function y(){!j||!R||(j=!1,R.length?C=R.concat(C):N=-1,C.length&&b())}function b(){if(!j){var e=setTimeout(y,0);j=!0;for(var t=C.length;t;){for(R=C,C=[];++N<t;)R&&R[N].run();N=-1,t=C.length}R=null,j=!1,clearTimeout(e)}}function _(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];C.push(new v(e,t)),1===C.length&&!j&&setTimeout(b,0)}function v(e,t){this.fun=e,this.array=t}function w(){}function S(e){g("_linkedBinding")}function E(e){g("dlopen")}function A(){return[]}function I(){return[]}function P(e,t){if(!e)throw new Error(t||"assertion error")}function k(){return!1}function x(){return $e.now()/1e3}function O(e){var t=Math.floor(.001*(Date.now()-$e.now())),r=.001*$e.now(),n=Math.floor(r)+t,o=Math.floor(r%1*1e9);return e&&(n-=e[0],(o-=e[1])<0&&(n--,o+=Ce)),[n,o]}function $(){return Ve}function T(e){return[]}f(m,{_debugEnd:()=>ge,_debugProcess:()=>me,_events:()=>Re,_eventsCount:()=>Ne,_exiting:()=>ee,_fatalExceptions:()=>fe,_getActiveHandles:()=>I,_getActiveRequests:()=>A,_kill:()=>ne,_linkedBinding:()=>S,_maxListeners:()=>je,_preload_modules:()=>xe,_rawDebug:()=>Y,_startProfilerIdleNotifier:()=>ye,_stopProfilerIdleNotifier:()=>be,_tickCallback:()=>de,abort:()=>Se,addListener:()=>Me,allowedNodeEnvironmentFlags:()=>ue,arch:()=>B,argv:()=>D,argv0:()=>ke,assert:()=>P,binding:()=>z,browser:()=>J,chdir:()=>G,config:()=>te,cpuUsage:()=>oe,cwd:()=>K,debugPort:()=>Pe,default:()=>Ve,dlopen:()=>E,domain:()=>Z,emit:()=>Fe,emitWarning:()=>V,env:()=>U,execArgv:()=>F,execPath:()=>Ie,exit:()=>le,features:()=>he,hasUncaughtExceptionCaptureCallback:()=>k,hrtime:()=>O,kill:()=>ae,listeners:()=>T,memoryUsage:()=>se,moduleLoadList:()=>X,nextTick:()=>_,off:()=>Le,on:()=>$,once:()=>Be,openStdin:()=>ce,pid:()=>Ee,platform:()=>L,ppid:()=>Ae,prependListener:()=>We,prependOnceListener:()=>qe,reallyExit:()=>re,release:()=>Q,removeAllListeners:()=>De,removeListener:()=>Ue,resourceUsage:()=>ie,setSourceMapsEnabled:()=>Oe,setUncaughtExceptionCaptureCallback:()=>pe,stderr:()=>ve,stdin:()=>we,stdout:()=>_e,title:()=>M,umask:()=>H,uptime:()=>x,version:()=>W,versions:()=>q});var C,j,R,N,M,B,L,U,D,F,W,q,V,z,H,K,G,Q,J,Y,X,Z,ee,te,re,ne,oe,ie,se,ae,le,ce,ue,he,fe,pe,de,me,ge,ye,be,_e,ve,we,Se,Ee,Ae,Ie,Pe,ke,xe,Oe,$e,Te,Ce,je,Re,Ne,Me,Be,Le,Ue,De,Fe,We,qe,Ve,ze=u(()=>{d(),at(),He(),C=[],j=!1,N=-1,v.prototype.run=function(){this.fun.apply(null,this.array)},M="browser",B="x64",L="browser",U={PATH:"/usr/bin",LANG:typeof navigator<"u"?navigator.language+".UTF-8":void 0,PWD:"/",HOME:"/home",TMP:"/tmp"},D=["/usr/bin/node"],F=[],W="v16.8.0",q={},V=function(e,t){console.warn((t?t+": ":"")+e)},z=function(e){g("binding")},H=function(e){return 0},K=function(){return"/"},G=function(e){},Q={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},J=!0,Y=w,X=[],Z={},ee=!1,te={},re=w,ne=w,ie=oe=function(){return{}},se=oe,ae=w,le=w,ce=w,ue={},he={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},fe=w,pe=w,de=w,me=w,ge=w,ye=w,be=w,_e=void 0,ve=void 0,we=void 0,Se=w,Ee=2,Ae=1,Ie="/bin/usr/node",Pe=9229,ke="node",xe=[],Oe=w,void 0===($e={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0}).now&&(Te=Date.now(),$e.timing&&$e.timing.navigationStart&&(Te=$e.timing.navigationStart),$e.now=()=>Date.now()-Te),Ce=1e9,O.bigint=function(e){var t=O(e);return typeof BigInt>"u"?t[0]*Ce+t[1]:BigInt(t[0]*Ce)+BigInt(t[1])},Ve={version:W,versions:q,arch:B,platform:L,browser:J,release:Q,_rawDebug:Y,moduleLoadList:X,binding:z,_linkedBinding:S,_events:Re={},_eventsCount:Ne=0,_maxListeners:je=10,on:$,addListener:Me=$,once:Be=$,off:Le=$,removeListener:Ue=$,removeAllListeners:De=$,emit:Fe=w,prependListener:We=$,prependOnceListener:qe=$,listeners:T,domain:Z,_exiting:ee,config:te,dlopen:E,uptime:x,_getActiveRequests:A,_getActiveHandles:I,reallyExit:re,_kill:ne,cpuUsage:oe,resourceUsage:ie,memoryUsage:se,kill:ae,exit:le,openStdin:ce,allowedNodeEnvironmentFlags:ue,assert:P,features:he,_fatalExceptions:fe,setUncaughtExceptionCaptureCallback:pe,hasUncaughtExceptionCaptureCallback:k,emitWarning:V,nextTick:_,_tickCallback:de,_debugProcess:me,_debugEnd:ge,_startProfilerIdleNotifier:ye,_stopProfilerIdleNotifier:be,stdout:_e,stdin:we,stderr:ve,abort:Se,umask:H,chdir:G,cwd:K,env:U,title:M,argv:D,execArgv:F,pid:Ee,ppid:Ae,execPath:Ie,debugPort:Pe,hrtime:O,argv0:ke,_preload_modules:xe,setSourceMapsEnabled:Oe}}),He=u(()=>{ze()});function Ke(){if(Ze)return Xe;Ze=!0;let e=function(){if(Qe)return Ge;Qe=!0,Ge.byteLength=function(e){var t=i(e),r=t[0],n=t[1];return 3*(r+n)/4-n},Ge.toByteArray=function(e){var n,o,s=i(e),a=s[0],l=s[1],c=new r(function(e,t,r){return 3*(t+r)/4-r}(0,a,l)),u=0,h=l>0?a-4:a;for(o=0;o<h;o+=4)n=t[e.charCodeAt(o)]<<18|t[e.charCodeAt(o+1)]<<12|t[e.charCodeAt(o+2)]<<6|t[e.charCodeAt(o+3)],c[u++]=n>>16&255,c[u++]=n>>8&255,c[u++]=255&n;return 2===l&&(n=t[e.charCodeAt(o)]<<2|t[e.charCodeAt(o+1)]>>4,c[u++]=255&n),1===l&&(n=t[e.charCodeAt(o)]<<10|t[e.charCodeAt(o+1)]<<4|t[e.charCodeAt(o+2)]>>2,c[u++]=n>>8&255,c[u++]=255&n),c},Ge.fromByteArray=function(t){for(var r,n=t.length,o=n%3,i=[],s=16383,l=0,c=n-o;l<c;l+=s)i.push(a(t,l,l+s>c?c:l+s));return 1===o?(r=t[n-1],i.push(e[r>>2]+e[r<<4&63]+"==")):2===o&&(r=(t[n-2]<<8)+t[n-1],i.push(e[r>>10]+e[r>>4&63]+e[r<<2&63]+"=")),i.join("")};for(var e=[],t=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)e[o]=n[o],t[n.charCodeAt(o)]=o;function i(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function s(t){return e[t>>18&63]+e[t>>12&63]+e[t>>6&63]+e[63&t]}function a(e,t,r){for(var n,o=[],i=t;i<r;i+=3)n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(s(n));return o.join("")}return t[45]=62,t[95]=63,Ge}(),t=(Ye||(Ye=!0,Je.read=function(e,t,r,n,o){var i,s,a=8*o-n-1,l=(1<<a)-1,c=l>>1,u=-7,h=r?o-1:0,f=r?-1:1,p=e[t+h];for(h+=f,i=p&(1<<-u)-1,p>>=-u,u+=a;u>0;i=256*i+e[t+h],h+=f,u-=8);for(s=i&(1<<-u)-1,i>>=-u,u+=n;u>0;s=256*s+e[t+h],h+=f,u-=8);if(0===i)i=1-c;else{if(i===l)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),i-=c}return(p?-1:1)*s*Math.pow(2,i-n)},Je.write=function(e,t,r,n,o,i){var s,a,l,c=8*i-o-1,u=(1<<c)-1,h=u>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,d=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+h>=1?f/l:f*Math.pow(2,1-h))*l>=2&&(s++,l/=2),s+h>=u?(a=0,s=u):s+h>=1?(a=(t*l-1)*Math.pow(2,o),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,o),s=0));o>=8;e[r+p]=255&a,p+=d,a/=256,o-=8);for(s=s<<o|a,c+=o;c>0;e[r+p]=255&s,p+=d,s/=256,c-=8);e[r+p-d]|=128*m}),Je),r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;Xe.Buffer=i,Xe.SlowBuffer=function(e){return+e!=e&&(e=0),i.alloc(+e)},Xe.INSPECT_MAX_BYTES=50;let n=2147483647;function o(e){if(e>n)throw new RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,i.prototype),t}function i(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}return s(e,t,r)}function s(e,t,r){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!i.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let r=0|f(e,t),n=o(r),s=n.write(e,t);return s!==r&&(n=n.slice(0,s)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(H(e,Uint8Array)){let t=new Uint8Array(e);return u(t.buffer,t.byteOffset,t.byteLength)}return c(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(H(e,ArrayBuffer)||e&&H(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(H(e,SharedArrayBuffer)||e&&H(e.buffer,SharedArrayBuffer)))return u(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');let n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return i.from(n,t,r);let s=function(e){if(i.isBuffer(e)){let t=0|h(e.length),r=o(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||K(e.length)?o(0):c(e):"Buffer"===e.type&&Array.isArray(e.data)?c(e.data):void 0}(e);if(s)return s;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return i.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function a(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return a(e),o(e<0?0:0|h(e))}function c(e){let t=e.length<0?0:0|h(e.length),r=o(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function u(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,i.prototype),n}function h(e){if(e>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|e}function f(e,t){if(i.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||H(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return V(e).length;default:if(o)return n?-1:q(e).length;t=(""+t).toLowerCase(),o=!0}}function p(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0)||(r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return k(this,t,r);case"utf8":case"utf-8":return E(this,t,r);case"ascii":return I(this,t,r);case"latin1":case"binary":return P(this,t,r);case"base64":return S(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function d(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}function m(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),K(r=+r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=i.from(t,n)),i.isBuffer(t))return 0===t.length?-1:g(e,t,r,n,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):g(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function g(e,t,r,n,o){let i,s=1,a=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,l/=2,r/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){let n=-1;for(i=r;i<a;i++)if(c(e,i)===c(t,-1===n?0:i-n)){if(-1===n&&(n=i),i-n+1===l)return n*s}else-1!==n&&(i-=i-n),n=-1}else for(r+l>a&&(r=a-l),i=r;i>=0;i--){let r=!0;for(let n=0;n<l;n++)if(c(e,i+n)!==c(t,n)){r=!1;break}if(r)return i}return-1}function y(e,t,r,n){r=Number(r)||0;let o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;let i,s=t.length;for(n>s/2&&(n=s/2),i=0;i<n;++i){let n=parseInt(t.substr(2*i,2),16);if(K(n))return i;e[r+i]=n}return i}function b(e,t,r,n){return z(q(t,e.length-r),e,r,n)}function _(e,t,r,n){return z(function(e){let t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function v(e,t,r,n){return z(V(t),e,r,n)}function w(e,t,r,n){return z(function(e,t){let r,n,o,i=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,o=r%256,i.push(o),i.push(n);return i}(t,e.length-r),e,r,n)}function S(t,r,n){return 0===r&&n===t.length?e.fromByteArray(t):e.fromByteArray(t.slice(r,n))}function E(e,t,r){r=Math.min(e.length,r);let n=[],o=t;for(;o<r;){let t=e[o],i=null,s=t>239?4:t>223?3:t>191?2:1;if(o+s<=r){let r,n,a,l;switch(s){case 1:t<128&&(i=t);break;case 2:r=e[o+1],128==(192&r)&&(l=(31&t)<<6|63&r,l>127&&(i=l));break;case 3:r=e[o+1],n=e[o+2],128==(192&r)&&128==(192&n)&&(l=(15&t)<<12|(63&r)<<6|63&n,l>2047&&(l<55296||l>57343)&&(i=l));break;case 4:r=e[o+1],n=e[o+2],a=e[o+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(l=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,l>65535&&l<1114112&&(i=l))}}null===i?(i=65533,s=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|1023&i),n.push(i),o+=s}return function(e){let t=e.length;if(t<=A)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=A));return r}(n)}Xe.kMaxLength=n,i.TYPED_ARRAY_SUPPORT=function(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch{return!1}}(),!i.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),i.poolSize=8192,i.from=function(e,t,r){return s(e,t,r)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array),i.alloc=function(e,t,r){return function(e,t,r){return a(e),e<=0?o(e):void 0!==t?"string"==typeof r?o(e).fill(t,r):o(e).fill(t):o(e)}(e,t,r)},i.allocUnsafe=function(e){return l(e)},i.allocUnsafeSlow=function(e){return l(e)},i.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==i.prototype},i.compare=function(e,t){if(H(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),H(t,Uint8Array)&&(t=i.from(t,t.offset,t.byteLength)),!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return i.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;let n=i.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){let t=e[r];if(H(t,Uint8Array))o+t.length>n.length?(i.isBuffer(t)||(t=i.from(t)),t.copy(n,o)):Uint8Array.prototype.set.call(n,t,o);else{if(!i.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,o)}o+=t.length}return n},i.byteLength=f,i.prototype._isBuffer=!0,i.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)d(this,t,t+1);return this},i.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)d(this,t,t+3),d(this,t+1,t+2);return this},i.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)d(this,t,t+7),d(this,t+1,t+6),d(this,t+2,t+5),d(this,t+3,t+4);return this},i.prototype.toString=function(){let e=this.length;return 0===e?"":0===arguments.length?E(this,0,e):p.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===i.compare(this,e)},i.prototype.inspect=function(){let e="",t=Xe.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},r&&(i.prototype[r]=i.prototype.inspect),i.prototype.compare=function(e,t,r,n,o){if(H(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),!i.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;let s=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),l=Math.min(s,a),c=this.slice(n,o),u=e.slice(t,r);for(let e=0;e<l;++e)if(c[e]!==u[e]){s=c[e],a=u[e];break}return s<a?-1:a<s?1:0},i.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},i.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},i.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},i.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}let o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let i=!1;for(;;)switch(n){case"hex":return y(this,e,t,r);case"utf8":case"utf-8":return b(this,e,t,r);case"ascii":case"latin1":case"binary":return _(this,e,t,r);case"base64":return v(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};let A=4096;function I(e,t,r){let n="";r=Math.min(e.length,r);for(let o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function P(e,t,r){let n="";r=Math.min(e.length,r);for(let o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function k(e,t,r){let n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let o="";for(let n=t;n<r;++n)o+=G[e[n]];return o}function x(e,t,r){let n=e.slice(t,r),o="";for(let e=0;e<n.length-1;e+=2)o+=String.fromCharCode(n[e]+256*n[e+1]);return o}function O(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function $(e,t,r,n,o,s){if(!i.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function T(e,t,r,n,o){U(t,n,o,e,r,7);let i=Number(t&BigInt(4294967295));e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,r}function C(e,t,r,n,o){U(t,n,o,e,r,7);let i=Number(t&BigInt(4294967295));e[r+7]=i,i>>=8,e[r+6]=i,i>>=8,e[r+5]=i,i>>=8,e[r+4]=i;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s>>=8,e[r+2]=s,s>>=8,e[r+1]=s,s>>=8,e[r]=s,r+8}function j(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function R(e,r,n,o,i){return r=+r,n>>>=0,i||j(e,0,n,4),t.write(e,r,n,o,23,4),n+4}function N(e,r,n,o,i){return r=+r,n>>>=0,i||j(e,0,n,8),t.write(e,r,n,o,52,8),n+8}i.prototype.slice=function(e,t){let r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);let n=this.subarray(e,t);return Object.setPrototypeOf(n,i.prototype),n},i.prototype.readUintLE=i.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let n=this[e],o=1,i=0;for(;++i<t&&(o*=256);)n+=this[e+i]*o;return n},i.prototype.readUintBE=i.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let n=this[e+--t],o=1;for(;t>0&&(o*=256);)n+=this[e+--t]*o;return n},i.prototype.readUint8=i.prototype.readUInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),this[e]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readBigUInt64LE=Q(function(e){D(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&F(e,this.length-8);let n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,o=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(o)<<BigInt(32))}),i.prototype.readBigUInt64BE=Q(function(e){D(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&F(e,this.length-8);let n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],o=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(o)}),i.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let n=this[e],o=1,i=0;for(;++i<t&&(o*=256);)n+=this[e+i]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*t)),n},i.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let n=t,o=1,i=this[e+--n];for(;n>0&&(o*=256);)i+=this[e+--n]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},i.prototype.readInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},i.prototype.readInt16LE=function(e,t){e>>>=0,t||O(e,2,this.length);let r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt16BE=function(e,t){e>>>=0,t||O(e,2,this.length);let r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readBigInt64LE=Q(function(e){D(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&F(e,this.length-8);let n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)}),i.prototype.readBigInt64BE=Q(function(e){D(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&F(e,this.length-8);let n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)}),i.prototype.readFloatLE=function(e,r){return e>>>=0,r||O(e,4,this.length),t.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,r){return e>>>=0,r||O(e,4,this.length),t.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,r){return e>>>=0,r||O(e,8,this.length),t.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,r){return e>>>=0,r||O(e,8,this.length),t.read(this,e,!1,52,8)},i.prototype.writeUintLE=i.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||$(this,e,t,r,Math.pow(2,8*r)-1,0);let o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||$(this,e,t,r,Math.pow(2,8*r)-1,0);let o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},i.prototype.writeUint8=i.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||$(this,e,t,1,255,0),this[t]=255&e,t+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||$(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||$(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||$(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||$(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},i.prototype.writeBigUInt64LE=Q(function(e,t=0){return T(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeBigUInt64BE=Q(function(e,t=0){return C(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){let n=Math.pow(2,8*r-1);$(this,e,t,r,n-1,-n)}let o=0,i=1,s=0;for(this[t]=255&e;++o<r&&(i*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/i|0)-s&255;return t+r},i.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){let n=Math.pow(2,8*r-1);$(this,e,t,r,n-1,-n)}let o=r-1,i=1,s=0;for(this[t+o]=255&e;--o>=0&&(i*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/i|0)-s&255;return t+r},i.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||$(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},i.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||$(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},i.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||$(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},i.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||$(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},i.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||$(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},i.prototype.writeBigInt64LE=Q(function(e,t=0){return T(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeBigInt64BE=Q(function(e,t=0){return C(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeFloatLE=function(e,t,r){return R(this,e,t,!0,r)},i.prototype.writeFloatBE=function(e,t,r){return R(this,e,t,!1,r)},i.prototype.writeDoubleLE=function(e,t,r){return N(this,e,t,!0,r)},i.prototype.writeDoubleBE=function(e,t,r){return N(this,e,t,!1,r)},i.prototype.copy=function(e,t,r,n){if(!i.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),!n&&0!==n&&(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);let o=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),o},i.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!i.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){let t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{let s=i.isBuffer(e)?e:i.from(e,n),a=s.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-t;++o)this[o+t]=s[o%a]}return this};let M={};function B(e,t,r){M[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function L(e){let t="",r=e.length,n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function U(e,t,r,n,o,i){if(e>r||e<t){let r,n="bigint"==typeof t?"n":"";throw r=0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(i+1)}${n}`:`>= -(2${n} ** ${8*(i+1)-1}${n}) and < 2 ** ${8*(i+1)-1}${n}`,new M.ERR_OUT_OF_RANGE("value",r,e)}!function(e,t,r){D(t,"offset"),(void 0===e[t]||void 0===e[t+r])&&F(t,e.length-(r+1))}(n,o,i)}function D(e,t){if("number"!=typeof e)throw new M.ERR_INVALID_ARG_TYPE(t,"number",e)}function F(e,t,r){throw Math.floor(e)!==e?(D(e,r),new M.ERR_OUT_OF_RANGE("offset","an integer",e)):t<0?new M.ERR_BUFFER_OUT_OF_BOUNDS:new M.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${t}`,e)}B("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),B("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),B("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,o=r;return Number.isInteger(r)&&Math.abs(r)>2**32?o=L(String(r)):"bigint"==typeof r&&(o=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(o=L(o)),o+="n"),n+=` It must be ${t}. Received ${o}`,n},RangeError);let W=/[^+/0-9A-Za-z-_]/g;function q(e,t){t=t||1/0;let r,n=e.length,o=null,i=[];for(let s=0;s<n;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function V(t){return e.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(t))}function z(e,t,r,n){let o;for(o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function H(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function K(e){return e!=e}let G=function(){let e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){let n=16*r;for(let o=0;o<16;++o)t[n+o]=e[r]+e[o]}return t}();function Q(e){return typeof BigInt>"u"?J:e}function J(){throw new Error("BigInt not supported")}return Xe}var Ge,Qe,Je,Ye,Xe,Ze,et=u(()=>{d(),at(),He(),Ge={},Qe=!1,Je={},Ye=!1,Xe={},Ze=!1}),tt={};f(tt,{Buffer:()=>nt,INSPECT_MAX_BYTES:()=>ot,default:()=>rt,kMaxLength:()=>it});var rt,nt,ot,it,st=u(()=>{d(),at(),He(),et(),(rt=Ke()).Buffer,rt.SlowBuffer,rt.INSPECT_MAX_BYTES,rt.kMaxLength,nt=rt.Buffer,ot=rt.INSPECT_MAX_BYTES,it=rt.kMaxLength}),at=u(()=>{st()}),lt=h((e,t)=>{d(),at(),He();var r=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError("Expected input to be an Array, got "+typeof e);let t="";for(let r=0;r<e.length;r++)t+=`    ${e[r].stack}\n`;super(t),this.name="AggregateError",this.errors=e}};t.exports={AggregateError:r,ArrayIsArray:e=>Array.isArray(e),ArrayPrototypeIncludes:(e,t)=>e.includes(t),ArrayPrototypeIndexOf:(e,t)=>e.indexOf(t),ArrayPrototypeJoin:(e,t)=>e.join(t),ArrayPrototypeMap:(e,t)=>e.map(t),ArrayPrototypePop:(e,t)=>e.pop(t),ArrayPrototypePush:(e,t)=>e.push(t),ArrayPrototypeSlice:(e,t,r)=>e.slice(t,r),Error,FunctionPrototypeCall:(e,t,...r)=>e.call(t,...r),FunctionPrototypeSymbolHasInstance:(e,t)=>Function.prototype[Symbol.hasInstance].call(e,t),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(e,t)=>Object.defineProperties(e,t),ObjectDefineProperty:(e,t,r)=>Object.defineProperty(e,t,r),ObjectGetOwnPropertyDescriptor:(e,t)=>Object.getOwnPropertyDescriptor(e,t),ObjectKeys:e=>Object.keys(e),ObjectSetPrototypeOf:(e,t)=>Object.setPrototypeOf(e,t),Promise,PromisePrototypeCatch:(e,t)=>e.catch(t),PromisePrototypeThen:(e,t,r)=>e.then(t,r),PromiseReject:e=>Promise.reject(e),PromiseResolve:e=>Promise.resolve(e),ReflectApply:Reflect.apply,RegExpPrototypeTest:(e,t)=>e.test(t),SafeSet:Set,String,StringPrototypeSlice:(e,t,r)=>e.slice(t,r),StringPrototypeToLowerCase:e=>e.toLowerCase(),StringPrototypeToUpperCase:e=>e.toUpperCase(),StringPrototypeTrim:e=>e.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(e,t,r)=>e.set(t,r),Boolean,Uint8Array}}),ct=h((e,t)=>{d(),at(),He(),t.exports={format:(e,...t)=>e.replace(/%([sdifj])/g,function(...[e,r]){let n=t.shift();return"f"===r?n.toFixed(6):"j"===r?JSON.stringify(n):"s"===r&&"object"==typeof n?`${n.constructor!==Object?n.constructor.name:""} {}`.trim():n.toString()}),inspect(e){switch(typeof e){case"string":if(e.includes("'")){if(!e.includes('"'))return`"${e}"`;if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}}),ut=h((e,t)=>{d(),at(),He();var{format:r,inspect:n}=ct(),{AggregateError:o}=lt(),i=globalThis.AggregateError||o,s=Symbol("kIsNodeError"),a=["string","function","number","object","Function","Object","boolean","bigint","symbol"],l=/^([A-Z][a-z0-9]*)+$/,c={};function u(e,t){if(!e)throw new c.ERR_INTERNAL_ASSERTION(t)}function h(e){let t="",r=e.length,n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function f(e,t,n){n||(n=Error);class o extends n{constructor(...n){super(function(e,t,n){if("function"==typeof t)return u(t.length<=n.length,`Code: ${e}; The provided arguments length (${n.length}) does not match the required ones (${t.length}).`),t(...n);let o=(t.match(/%[dfijoOs]/g)||[]).length;return u(o===n.length,`Code: ${e}; The provided arguments length (${n.length}) does not match the required ones (${o}).`),0===n.length?t:r(t,...n)}(e,t,n))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(o.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),o.prototype.code=e,o.prototype[s]=!0,c[e]=o}function p(e){let t="__node_internal_"+e.name;return Object.defineProperty(e,"name",{value:t}),e}var m=class extends Error{constructor(e="The operation was aborted",t=void 0){if(void 0!==t&&"object"!=typeof t)throw new c.ERR_INVALID_ARG_TYPE("options","Object",t);super(e,t),this.code="ABORT_ERR",this.name="AbortError"}};f("ERR_ASSERTION","%s",Error),f("ERR_INVALID_ARG_TYPE",(e,t,r)=>{u("string"==typeof e,"'name' must be a string"),Array.isArray(t)||(t=[t]);let o="The ";e.endsWith(" argument")?o+=`${e} `:o+=`"${e}" ${e.includes(".")?"property":"argument"} `,o+="must be ";let i=[],s=[],c=[];for(let e of t)u("string"==typeof e,"All expected entries have to be of type string"),a.includes(e)?i.push(e.toLowerCase()):l.test(e)?s.push(e):(u("object"!==e,'The value "object" should be written as "Object"'),c.push(e));if(s.length>0){let e=i.indexOf("object");-1!==e&&(i.splice(i,e,1),s.push("Object"))}if(i.length>0){switch(i.length){case 1:o+=`of type ${i[0]}`;break;case 2:o+=`one of type ${i[0]} or ${i[1]}`;break;default:{let e=i.pop();o+=`one of type ${i.join(", ")}, or ${e}`}}(s.length>0||c.length>0)&&(o+=" or ")}if(s.length>0){switch(s.length){case 1:o+=`an instance of ${s[0]}`;break;case 2:o+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let e=s.pop();o+=`an instance of ${s.join(", ")}, or ${e}`}}c.length>0&&(o+=" or ")}switch(c.length){case 0:break;case 1:c[0].toLowerCase()!==c[0]&&(o+="an "),o+=`${c[0]}`;break;case 2:o+=`one of ${c[0]} or ${c[1]}`;break;default:{let e=c.pop();o+=`one of ${c.join(", ")}, or ${e}`}}if(null==r)o+=`. Received ${r}`;else if("function"==typeof r&&r.name)o+=`. Received function ${r.name}`;else if("object"==typeof r){var h;null!==(h=r.constructor)&&void 0!==h&&h.name?o+=`. Received an instance of ${r.constructor.name}`:o+=`. Received ${n(r,{depth:-1})}`}else{let e=n(r,{colors:!1});e.length>25&&(e=`${e.slice(0,25)}...`),o+=`. Received type ${typeof r} (${e})`}return o},TypeError),f("ERR_INVALID_ARG_VALUE",(e,t,r="is invalid")=>{let o=n(t);return o.length>128&&(o=o.slice(0,128)+"..."),`The ${e.includes(".")?"property":"argument"} '${e}' ${r}. Received ${o}`},TypeError),f("ERR_INVALID_RETURN_VALUE",(e,t,r)=>{var n;return`Expected ${e} to be returned from the "${t}" function but got ${null!=r&&null!==(n=r.constructor)&&void 0!==n&&n.name?`instance of ${r.constructor.name}`:"type "+typeof r}.`},TypeError),f("ERR_MISSING_ARGS",(...e)=>{u(e.length>0,"At least one arg needs to be specified");let t,r=e.length;switch(e=(Array.isArray(e)?e:[e]).map(e=>`"${e}"`).join(" or "),r){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{let r=e.pop();t+=`The ${e.join(", ")}, and ${r} arguments`}}return`${t} must be specified`},TypeError),f("ERR_OUT_OF_RANGE",(e,t,r)=>{let o;if(u(t,'Missing "range" argument'),Number.isInteger(r)&&Math.abs(r)>2**32)o=h(String(r));else if("bigint"==typeof r){o=String(r);let e=BigInt(2)**BigInt(32);(r>e||r<-e)&&(o=h(o)),o+="n"}else o=n(r);return`The value of "${e}" is out of range. It must be ${t}. Received ${o}`},RangeError),f("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),f("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),f("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),f("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),f("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),f("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),f("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),f("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),f("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),f("ERR_STREAM_WRITE_AFTER_END","write after end",Error),f("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),t.exports={AbortError:m,aggregateTwoErrors:p(function(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;let r=new i([t,e],t.message);return r.code=t.code,r}return e||t}),hideStackFrames:p,codes:c}}),ht=h((e,t)=>{d(),at(),He();var{AbortController:r,AbortSignal:n}=typeof self<"u"?self:typeof window<"u"?window:void 0;t.exports=r,t.exports.AbortSignal=n,t.exports.default=r}),ft={};f(ft,{EventEmitter:()=>gt,default:()=>mt,defaultMaxListeners:()=>yt,init:()=>bt,listenerCount:()=>_t,on:()=>vt,once:()=>wt});var pt,dt,mt,gt,yt,bt,_t,vt,wt,St,Et,At,It=u(()=>{d(),at(),He(),pt={},dt=!1,(mt=function(){if(dt)return pt;dt=!0;var e,t="object"==typeof Reflect?Reflect:null,r=t&&"function"==typeof t.apply?t.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};e=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var n=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}(pt=o).once=function(e,t){return new Promise(function(r,n){function o(r){e.removeListener(t,i),n(r)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",o),r([].slice.call(arguments))}d(e,t,i,{once:!0}),"error"!==t&&function(e,t){"function"==typeof e.on&&d(e,"error",t,{once:!0})}(e,o)})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var i=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function a(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function l(e,t,r,n){var o,i,l;if(s(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),l=i[t]),void 0===l)l=i[t]=r,++e._eventsCount;else if("function"==typeof l?l=i[t]=n?[r,l]:[l,r]:n?l.unshift(r):l.push(r),(o=a(e))>0&&l.length>o&&!l.warned){l.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=l.length,function(e){console&&console.warn&&console.warn(e)}(c)}return e}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=c.bind(n);return o.listener=r,n.wrapFn=o,o}function h(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):p(o,o.length)}function f(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function p(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function d(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function o(i){n.once&&e.removeEventListener(t,o),r(i)})}}return Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return i},set:function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");i=e}}),o.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return a(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var o="error"===e,i=this._events;if(void 0!==i)o=o&&void 0===i.error;else if(!o)return!1;if(o){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)r(l,this,t);else{var c=l.length,u=p(l,c);for(n=0;n<c;++n)r(u[n],this,t)}return!0},o.prototype.addListener=function(e,t){return l(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return l(this,e,t,!0)},o.prototype.once=function(e,t){return s(t),this.on(e,u(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,u(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,n,o,i,a;if(s(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){a=r[i].listener,o=i;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},o.prototype.listeners=function(e){return h(this,e,!0)},o.prototype.rawListeners=function(e){return h(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},o.prototype.listenerCount=f,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]},pt}()).once,mt.once=function(e,t){return new Promise((r,n)=>{function o(...t){void 0!==i&&e.removeListener("error",i),r(t)}let i;"error"!==t&&(i=t=>{e.removeListener(name,o),n(t)},e.once("error",i)),e.once(t,o)})},mt.on=function(e,t){let r=[],n=[],o=null,i=!1,s={async next(){let e=r.shift();if(e)return createIterResult(e,!1);if(o){let e=Promise.reject(o);return o=null,e}return i?createIterResult(void 0,!0):new Promise((e,t)=>n.push({resolve:e,reject:t}))},async return(){e.removeListener(t,a),e.removeListener("error",l),i=!0;for(let e of n)e.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(r){o=r,e.removeListener(t,a),e.removeListener("error",l)},[Symbol.asyncIterator](){return this}};return e.on(t,a),e.on("error",l),s;function a(...e){let t=n.shift();t?t.resolve(createIterResult(e,!1)):r.push(e)}function l(e){i=!0;let t=n.shift();t?t.reject(e):o=e,s.return()}},({EventEmitter:gt,defaultMaxListeners:yt,init:bt,listenerCount:_t,on:vt,once:wt}=mt)}),Pt=h((e,t)=>{d(),at(),He();var r=(st(),p(tt)),{format:n,inspect:o}=ct(),{codes:{ERR_INVALID_ARG_TYPE:i}}=ut(),{kResistStopPropagation:s,AggregateError:a,SymbolDispose:l}=lt(),c=globalThis.AbortSignal||ht().AbortSignal,u=globalThis.AbortController||ht().AbortController,h=Object.getPrototypeOf(async function(){}).constructor,f=globalThis.Blob||r.Blob,m=typeof f<"u"?function(e){return e instanceof f}:function(e){return!1},g=(e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new i(t,"AbortSignal",e)};t.exports={AggregateError:a,kEmptyObject:Object.freeze({}),once(e){let t=!1;return function(...r){t||(t=!0,e.apply(this,r))}},createDeferredPromise:function(){let e,t;return{promise:new Promise((r,n)=>{e=r,t=n}),resolve:e,reject:t}},promisify:e=>new Promise((t,r)=>{e((e,...n)=>e?r(e):t(...n))}),debuglog:()=>function(){},format:n,inspect:o,types:{isAsyncFunction:e=>e instanceof h,isArrayBufferView:e=>ArrayBuffer.isView(e)},isBlob:m,deprecate:(e,t)=>e,addAbortListener:(It(),p(ft)).addAbortListener||function(e,t){if(void 0===e)throw new i("signal","AbortSignal",e);let r;return g(e,"signal"),(e=>{if("function"!=typeof e)throw new i("listener","Function",e)})(t),e.aborted?queueMicrotask(()=>t()):(e.addEventListener("abort",t,{__proto__:null,once:!0,[s]:!0}),r=()=>{e.removeEventListener("abort",t)}),{__proto__:null,[l](){var e;null===(e=r)||void 0===e||e()}}},AbortSignalAny:c.any||function(e){if(1===e.length)return e[0];let t=new u,r=()=>t.abort();return e.forEach(e=>{g(e,"signals"),e.addEventListener("abort",r,{once:!0})}),t.signal.addEventListener("abort",()=>{e.forEach(e=>e.removeEventListener("abort",r))},{once:!0}),t.signal}},t.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),kt=h((e,t)=>{d(),at(),He();var{ArrayIsArray:r,ArrayPrototypeIncludes:n,ArrayPrototypeJoin:o,ArrayPrototypeMap:i,NumberIsInteger:s,NumberIsNaN:a,NumberMAX_SAFE_INTEGER:l,NumberMIN_SAFE_INTEGER:c,NumberParseInt:u,ObjectPrototypeHasOwnProperty:h,RegExpPrototypeExec:f,String:p,StringPrototypeToUpperCase:m,StringPrototypeTrim:g}=lt(),{hideStackFrames:y,codes:{ERR_SOCKET_BAD_PORT:b,ERR_INVALID_ARG_TYPE:_,ERR_INVALID_ARG_VALUE:v,ERR_OUT_OF_RANGE:w,ERR_UNKNOWN_SIGNAL:S}}=ut(),{normalizeEncoding:E}=Pt(),{isAsyncFunction:A,isArrayBufferView:I}=Pt().types,P={},k=/^[0-7]+$/,x=y((e,t,r=c,n=l)=>{if("number"!=typeof e)throw new _(t,"number",e);if(!s(e))throw new w(t,"an integer",e);if(e<r||e>n)throw new w(t,`>= ${r} && <= ${n}`,e)}),O=y((e,t,r=-2147483648,n=2147483647)=>{if("number"!=typeof e)throw new _(t,"number",e);if(!s(e))throw new w(t,"an integer",e);if(e<r||e>n)throw new w(t,`>= ${r} && <= ${n}`,e)}),$=y((e,t,r=!1)=>{if("number"!=typeof e)throw new _(t,"number",e);if(!s(e))throw new w(t,"an integer",e);let n=r?1:0,o=4294967295;if(e<n||e>o)throw new w(t,`>= ${n} && <= ${o}`,e)});function T(e,t){if("string"!=typeof e)throw new _(t,"string",e)}var C=y((e,t,r)=>{if(!n(r,e)){let n="must be one of: "+o(i(r,e=>"string"==typeof e?`'${e}'`:p(e)),", ");throw new v(t,e,n)}});function j(e,t){if("boolean"!=typeof e)throw new _(t,"boolean",e)}function R(e,t,r){return null!=e&&h(e,t)?e[t]:r}var N=y((e,t,n=null)=>{let o=R(n,"allowArray",!1),i=R(n,"allowFunction",!1);if(!R(n,"nullable",!1)&&null===e||!o&&r(e)||"object"!=typeof e&&(!i||"function"!=typeof e))throw new _(t,"Object",e)}),M=y((e,t)=>{if(null!=e&&"object"!=typeof e&&"function"!=typeof e)throw new _(t,"a dictionary",e)}),B=y((e,t,n=0)=>{if(!r(e))throw new _(t,"Array",e);if(e.length<n)throw new v(t,e,`must be longer than ${n}`)}),L=y((e,t="buffer")=>{if(!I(e))throw new _(t,["Buffer","TypedArray","DataView"],e)}),U=y((e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new _(t,"AbortSignal",e)}),D=y((e,t)=>{if("function"!=typeof e)throw new _(t,"Function",e)}),F=y((e,t)=>{if("function"!=typeof e||A(e))throw new _(t,"Function",e)}),W=y((e,t)=>{if(void 0!==e)throw new _(t,"undefined",e)}),q=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function V(e,t){if(typeof e>"u"||!f(q,e))throw new v(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}t.exports={isInt32:function(e){return e===(0|e)},isUint32:function(e){return e===e>>>0},parseFileMode:function(e,t,r){if(typeof e>"u"&&(e=r),"string"==typeof e){if(null===f(k,e))throw new v(t,e,"must be a 32-bit unsigned integer or an octal string");e=u(e,8)}return $(e,t),e},validateArray:B,validateStringArray:function(e,t){B(e,t);for(let r=0;r<e.length;r++)T(e[r],`${t}[${r}]`)},validateBooleanArray:function(e,t){B(e,t);for(let r=0;r<e.length;r++)j(e[r],`${t}[${r}]`)},validateAbortSignalArray:function(e,t){B(e,t);for(let r=0;r<e.length;r++){let n=e[r],o=`${t}[${r}]`;if(null==n)throw new _(o,"AbortSignal",n);U(n,o)}},validateBoolean:j,validateBuffer:L,validateDictionary:M,validateEncoding:function(e,t){let r=E(t),n=e.length;if("hex"===r&&n%2!=0)throw new v("encoding",t,`is invalid for data of length ${n}`)},validateFunction:D,validateInt32:O,validateInteger:x,validateNumber:function(e,t,r=void 0,n){if("number"!=typeof e)throw new _(t,"number",e);if(null!=r&&e<r||null!=n&&e>n||(null!=r||null!=n)&&a(e))throw new w(t,`${null!=r?`>= ${r}`:""}${null!=r&&null!=n?" && ":""}${null!=n?`<= ${n}`:""}`,e)},validateObject:N,validateOneOf:C,validatePlainFunction:F,validatePort:function(e,t="Port",r=!0){if("number"!=typeof e&&"string"!=typeof e||"string"==typeof e&&0===g(e).length||+e!==+e>>>0||e>65535||0===e&&!r)throw new b(t,e,r);return 0|e},validateSignalName:function(e,t="signal"){if(T(e,t),void 0===P[e])throw void 0!==P[m(e)]?new S(e+" (signals must use all capital letters)"):new S(e)},validateString:T,validateUint32:$,validateUndefined:W,validateUnion:function(e,t,r){if(!n(r,e))throw new _(t,`('${o(r,"|")}')`,e)},validateAbortSignal:U,validateLinkHeaderValue:function(e){if("string"==typeof e)return V(e,"hints"),e;if(r(e)){let t=e.length,r="";if(0===t)return r;for(let n=0;n<t;n++){let o=e[n];V(o,"hints"),r+=o,n!==t-1&&(r+=", ")}return r}throw new v("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}}),xt=h((e,t)=>{d(),at(),He();var r,n,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch{try{return r.call(null,e,0)}catch{return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch{r=i}try{n="function"==typeof clearTimeout?clearTimeout:s}catch{n=s}}();var l,c=[],u=!1,h=-1;function f(){!u||!l||(u=!1,l.length?c=l.concat(c):h=-1,c.length&&p())}function p(){if(!u){var e=a(f);u=!0;for(var t=c.length;t;){for(l=c,c=[];++h<t;)l&&l[h].run();h=-1,t=c.length}l=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch{try{return n.call(null,e)}catch{return n.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new m(e,t)),1===c.length&&!u&&a(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}}),Ot=h((e,t)=>{d(),at(),He();var{SymbolAsyncIterator:r,SymbolIterator:n,SymbolFor:o}=lt(),i=o("nodejs.stream.destroyed"),s=o("nodejs.stream.errored"),a=o("nodejs.stream.readable"),l=o("nodejs.stream.writable"),c=o("nodejs.stream.disturbed"),u=o("nodejs.webstream.isClosedPromise"),h=o("nodejs.webstream.controllerErrorFunction");function f(e,t=!1){var r;return!(!e||"function"!=typeof e.pipe||"function"!=typeof e.on||t&&("function"!=typeof e.pause||"function"!=typeof e.resume)||e._writableState&&!1===(null===(r=e._readableState)||void 0===r?void 0:r.readable)||e._writableState&&!e._readableState)}function p(e){var t;return!(!e||"function"!=typeof e.write||"function"!=typeof e.on||e._readableState&&!1===(null===(t=e._writableState)||void 0===t?void 0:t.writable))}function m(e){return e&&(e._readableState||e._writableState||"function"==typeof e.write&&"function"==typeof e.on||"function"==typeof e.pipe&&"function"==typeof e.on)}function g(e){return!(!e||m(e)||"function"!=typeof e.pipeThrough||"function"!=typeof e.getReader||"function"!=typeof e.cancel)}function y(e){return!(!e||m(e)||"function"!=typeof e.getWriter||"function"!=typeof e.abort)}function b(e){return!(!e||m(e)||"object"!=typeof e.readable||"object"!=typeof e.writable)}function _(e){if(!m(e))return null;let t=e._writableState,r=e._readableState,n=t||r;return!!(e.destroyed||e[i]||null!=n&&n.destroyed)}function v(e){if(!p(e))return null;if(!0===e.writableEnded)return!0;let t=e._writableState;return(null==t||!t.errored)&&("boolean"!=typeof t?.ended?null:t.ended)}function w(e,t){if(!f(e))return null;let r=e._readableState;return(null==r||!r.errored)&&("boolean"!=typeof r?.endEmitted?null:!!(r.endEmitted||!1===t&&!0===r.ended&&0===r.length))}function S(e){return e&&null!=e[a]?e[a]:"boolean"!=typeof e?.readable?null:!_(e)&&f(e)&&e.readable&&!w(e)}function E(e){return e&&null!=e[l]?e[l]:"boolean"!=typeof e?.writable?null:!_(e)&&p(e)&&e.writable&&!v(e)}function A(e){return"boolean"==typeof e._closed&&"boolean"==typeof e._defaultKeepAlive&&"boolean"==typeof e._removedConnection&&"boolean"==typeof e._removedContLen}function I(e){return"boolean"==typeof e._sent100&&A(e)}t.exports={isDestroyed:_,kIsDestroyed:i,isDisturbed:function(e){var t;return!(!e||!(null!==(t=e[c])&&void 0!==t?t:e.readableDidRead||e.readableAborted))},kIsDisturbed:c,isErrored:function(e){var t,r,n,o,i,a,l,c,u,h;return!(!e||!(null!==(t=null!==(r=null!==(n=null!==(o=null!==(i=null!==(a=e[s])&&void 0!==a?a:e.readableErrored)&&void 0!==i?i:e.writableErrored)&&void 0!==o?o:null===(l=e._readableState)||void 0===l?void 0:l.errorEmitted)&&void 0!==n?n:null===(c=e._writableState)||void 0===c?void 0:c.errorEmitted)&&void 0!==r?r:null===(u=e._readableState)||void 0===u?void 0:u.errored)&&void 0!==t?t:null!==(h=e._writableState)&&void 0!==h&&h.errored))},kIsErrored:s,isReadable:S,kIsReadable:a,kIsClosedPromise:u,kControllerErrorFunction:h,kIsWritable:l,isClosed:function(e){if(!m(e))return null;if("boolean"==typeof e.closed)return e.closed;let t=e._writableState,r=e._readableState;return"boolean"==typeof t?.closed||"boolean"==typeof r?.closed?t?.closed||r?.closed:"boolean"==typeof e._closed&&A(e)?e._closed:null},isDuplexNodeStream:function(e){return!(!e||"function"!=typeof e.pipe||!e._readableState||"function"!=typeof e.on||"function"!=typeof e.write)},isFinished:function(e,t){return m(e)?!!_(e)||!(!1!==t?.readable&&S(e)||!1!==t?.writable&&E(e)):null},isIterable:function(e,t){return null!=e&&(!0===t?"function"==typeof e[r]:!1===t?"function"==typeof e[n]:"function"==typeof e[r]||"function"==typeof e[n])},isReadableNodeStream:f,isReadableStream:g,isReadableEnded:function(e){if(!f(e))return null;if(!0===e.readableEnded)return!0;let t=e._readableState;return!(!t||t.errored)&&("boolean"!=typeof t?.ended?null:t.ended)},isReadableFinished:w,isReadableErrored:function(e){var t,r;return m(e)?e.readableErrored?e.readableErrored:null!==(t=null===(r=e._readableState)||void 0===r?void 0:r.errored)&&void 0!==t?t:null:null},isNodeStream:m,isWebStream:function(e){return g(e)||y(e)||b(e)},isWritable:E,isWritableNodeStream:p,isWritableStream:y,isWritableEnded:v,isWritableFinished:function(e,t){if(!p(e))return null;if(!0===e.writableFinished)return!0;let r=e._writableState;return(null==r||!r.errored)&&("boolean"!=typeof r?.finished?null:!!(r.finished||!1===t&&!0===r.ended&&0===r.length))},isWritableErrored:function(e){var t,r;return m(e)?e.writableErrored?e.writableErrored:null!==(t=null===(r=e._writableState)||void 0===r?void 0:r.errored)&&void 0!==t?t:null:null},isServerRequest:function(e){var t;return"boolean"==typeof e._consuming&&"boolean"==typeof e._dumped&&void 0===(null===(t=e.req)||void 0===t?void 0:t.upgradeOrConnect)},isServerResponse:I,willEmitClose:function(e){if(!m(e))return null;let t=e._writableState,r=e._readableState,n=t||r;return!n&&I(e)||!!(n&&n.autoDestroy&&n.emitClose&&!1===n.closed)},isTransformStream:b}}),$t=h((e,t)=>{d(),at(),He();var r,n=xt(),{AbortError:o,codes:i}=ut(),{ERR_INVALID_ARG_TYPE:s,ERR_STREAM_PREMATURE_CLOSE:a}=i,{kEmptyObject:l,once:c}=Pt(),{validateAbortSignal:u,validateFunction:h,validateObject:f,validateBoolean:p}=kt(),{Promise:m,PromisePrototypeThen:g,SymbolDispose:y}=lt(),{isClosed:b,isReadable:_,isReadableNodeStream:v,isReadableStream:w,isReadableFinished:S,isReadableErrored:E,isWritable:A,isWritableNodeStream:I,isWritableStream:P,isWritableFinished:k,isWritableErrored:x,isNodeStream:O,willEmitClose:$,kIsClosedPromise:T}=Ot(),C=()=>{};function j(e,t,i){var p,d;if(2===arguments.length?(i=t,t=l):null==t?t=l:f(t,"options"),h(i,"callback"),u(t.signal,"options.signal"),i=c(i),w(e)||P(e))return function(e,t,i){let s=!1,a=C;if(t.signal)if(a=()=>{s=!0,i.call(e,new o(void 0,{cause:t.signal.reason}))},t.signal.aborted)n.nextTick(a);else{let n=(r=r||Pt().addAbortListener)(t.signal,a),o=i;i=c((...t)=>{n[y](),o.apply(e,t)})}let l=(...t)=>{s||n.nextTick(()=>i.apply(e,t))};return g(e[T].promise,l,l),C}(e,t,i);if(!O(e))throw new s("stream",["ReadableStream","WritableStream","Stream"],e);let m=null!==(p=t.readable)&&void 0!==p?p:v(e),j=null!==(d=t.writable)&&void 0!==d?d:I(e),R=e._writableState,N=e._readableState,M=()=>{e.writable||U()},B=$(e)&&v(e)===m&&I(e)===j,L=k(e,!1),U=()=>{L=!0,e.destroyed&&(B=!1),(!B||e.readable&&!m)&&(!m||D)&&i.call(e)},D=S(e,!1),F=()=>{D=!0,e.destroyed&&(B=!1),(!B||e.writable&&!j)&&(!j||L)&&i.call(e)},W=t=>{i.call(e,t)},q=b(e),V=()=>{q=!0;let t=x(e)||E(e);return t&&"boolean"!=typeof t?i.call(e,t):m&&!D&&v(e,!0)&&!S(e,!1)?i.call(e,new a):!j||L||k(e,!1)?void i.call(e):i.call(e,new a)},z=()=>{q=!0;let t=x(e)||E(e);if(t&&"boolean"!=typeof t)return i.call(e,t);i.call(e)},H=()=>{e.req.on("finish",U)};!function(e){return e.setHeader&&"function"==typeof e.abort}(e)?j&&!R&&(e.on("end",M),e.on("close",M)):(e.on("complete",U),B||e.on("abort",V),e.req?H():e.on("request",H)),!B&&"boolean"==typeof e.aborted&&e.on("aborted",V),e.on("end",F),e.on("finish",U),!1!==t.error&&e.on("error",W),e.on("close",V),q?n.nextTick(V):null!=R&&R.errorEmitted||null!=N&&N.errorEmitted?B||n.nextTick(z):(!m&&(!B||_(e))&&(L||!1===A(e))||!j&&(!B||A(e))&&(D||!1===_(e))||N&&e.req&&e.aborted)&&n.nextTick(z);let K=()=>{i=C,e.removeListener("aborted",V),e.removeListener("complete",U),e.removeListener("abort",V),e.removeListener("request",H),e.req&&e.req.removeListener("finish",U),e.removeListener("end",M),e.removeListener("close",M),e.removeListener("finish",U),e.removeListener("end",F),e.removeListener("error",W),e.removeListener("close",V)};if(t.signal&&!q){let s=()=>{let r=i;K(),r.call(e,new o(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)n.nextTick(s);else{let n=(r=r||Pt().addAbortListener)(t.signal,s),o=i;i=c((...t)=>{n[y](),o.apply(e,t)})}}return K}t.exports=j,t.exports.finished=function(e,t){var r;let n=!1;return null===t&&(t=l),null!==(r=t)&&void 0!==r&&r.cleanup&&(p(t.cleanup,"cleanup"),n=t.cleanup),new m((r,o)=>{let i=j(e,t,e=>{n&&i(),e?o(e):r()})})}}),Tt=h((e,t)=>{d(),at(),He();var r=xt(),{aggregateTwoErrors:n,codes:{ERR_MULTIPLE_CALLBACK:o},AbortError:i}=ut(),{Symbol:s}=lt(),{kIsDestroyed:a,isDestroyed:l,isFinished:c,isServerRequest:u}=Ot(),h=s("kDestroy"),f=s("kConstruct");function p(e,t,r){e&&(e.stack,t&&!t.errored&&(t.errored=e),r&&!r.errored&&(r.errored=e))}function m(e,t,n){let o=!1;function i(t){if(o)return;o=!0;let i=e._readableState,s=e._writableState;p(t,s,i),s&&(s.closed=!0),i&&(i.closed=!0),"function"==typeof n&&n(t),t?r.nextTick(g,e,t):r.nextTick(y,e)}try{e._destroy(t||null,i)}catch(e){i(e)}}function g(e,t){b(e,t),y(e)}function y(e){let t=e._readableState,r=e._writableState;r&&(r.closeEmitted=!0),t&&(t.closeEmitted=!0),(null!=r&&r.emitClose||null!=t&&t.emitClose)&&e.emit("close")}function b(e,t){let r=e._readableState,n=e._writableState;null!=n&&n.errorEmitted||null!=r&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),e.emit("error",t))}function _(e,t,n){let o=e._readableState,i=e._writableState;if(null!=i&&i.destroyed||null!=o&&o.destroyed)return this;null!=o&&o.autoDestroy||null!=i&&i.autoDestroy?e.destroy(t):t&&(t.stack,i&&!i.errored&&(i.errored=t),o&&!o.errored&&(o.errored=t),n?r.nextTick(b,e,t):b(e,t))}function v(e){let t=!1;function n(n){if(t)return void _(e,n??new o);t=!0;let i=e._readableState,s=e._writableState,a=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),a.destroyed?e.emit(h,n):n?_(e,n,!0):r.nextTick(w,e)}try{e._construct(e=>{r.nextTick(n,e)})}catch(e){r.nextTick(n,e)}}function w(e){e.emit(f)}function S(e){return e?.setHeader&&"function"==typeof e.abort}function E(e){e.emit("close")}function A(e,t){e.emit("error",t),r.nextTick(E,e)}t.exports={construct:function(e,t){if("function"!=typeof e._construct)return;let n=e._readableState,o=e._writableState;n&&(n.constructed=!1),o&&(o.constructed=!1),e.once(f,t),!(e.listenerCount(f)>1)&&r.nextTick(v,e)},destroyer:function(e,t){!e||l(e)||(!t&&!c(e)&&(t=new i),u(e)?(e.socket=null,e.destroy(t)):S(e)?e.abort():S(e.req)?e.req.abort():"function"==typeof e.destroy?e.destroy(t):"function"==typeof e.close?e.close():t?r.nextTick(A,e,t):r.nextTick(E,e),e.destroyed||(e[a]=!0))},destroy:function(e,t){let r=this._readableState,o=this._writableState,i=o||r;return null!=o&&o.destroyed||null!=r&&r.destroyed?("function"==typeof t&&t(),this):(p(e,o,r),o&&(o.destroyed=!0),r&&(r.destroyed=!0),i.constructed?m(this,e,t):this.once(h,function(r){m(this,n(r,e),t)}),this)},undestroy:function(){let e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=!1===e.readable,e.endEmitted=!1===e.readable),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=!1===t.writable,t.ending=!1===t.writable,t.finished=!1===t.writable)},errorOrDestroy:_}}),Ct=h((e,t)=>{d(),at(),He();var{ArrayIsArray:r,ObjectSetPrototypeOf:n}=lt(),{EventEmitter:o}=(It(),p(ft));function i(e){o.call(this,e)}function s(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?r(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}n(i.prototype,o.prototype),n(i,o),i.prototype.pipe=function(e,t){let r=this;function n(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function i(){r.readable&&r.resume&&r.resume()}r.on("data",n),e.on("drain",i),!e._isStdio&&(!t||!1!==t.end)&&(r.on("end",l),r.on("close",c));let a=!1;function l(){a||(a=!0,e.end())}function c(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){h(),0===o.listenerCount(this,"error")&&this.emit("error",e)}function h(){r.removeListener("data",n),e.removeListener("drain",i),r.removeListener("end",l),r.removeListener("close",c),r.removeListener("error",u),e.removeListener("error",u),r.removeListener("end",h),r.removeListener("close",h),e.removeListener("close",h)}return s(r,"error",u),s(e,"error",u),r.on("end",h),r.on("close",h),e.on("close",h),e.emit("pipe",r),e},t.exports={Stream:i,prependListener:s}}),jt=h((e,t)=>{d(),at(),He();var r,{SymbolDispose:n}=lt(),{AbortError:o,codes:i}=ut(),{isNodeStream:s,isWebStream:a,kControllerErrorFunction:l}=Ot(),c=$t(),{ERR_INVALID_ARG_TYPE:u}=i;t.exports.addAbortSignal=function(e,r){if((e=>{if("object"!=typeof e||!("aborted"in e))throw new u("signal","AbortSignal",e)})(e),!s(r)&&!a(r))throw new u("stream",["ReadableStream","WritableStream","Stream"],r);return t.exports.addAbortSignalNoValidate(e,r)},t.exports.addAbortSignalNoValidate=function(e,t){if("object"!=typeof e||!("aborted"in e))return t;let i=s(t)?()=>{t.destroy(new o(void 0,{cause:e.reason}))}:()=>{t[l](new o(void 0,{cause:e.reason}))};if(e.aborted)i();else{let o=(r=r||Pt().addAbortListener)(e,i);c(t,o[n])}return t}}),Rt=h((e,t)=>{d(),at(),He();var{StringPrototypeSlice:r,SymbolIterator:n,TypedArrayPrototypeSet:o,Uint8Array:i}=lt(),{Buffer:s}=(st(),p(tt)),{inspect:a}=Pt();t.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){let t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}shift(){if(0===this.length)return;let e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(0===this.length)return"";let t=this.head,r=""+t.data;for(;null!==(t=t.next);)r+=e+t.data;return r}concat(e){if(0===this.length)return s.alloc(0);let t=s.allocUnsafe(e>>>0),r=this.head,n=0;for(;r;)o(t,r.data,n),n+=r.data.length,r=r.next;return t}consume(e,t){let r=this.head.data;if(e<r.length){let t=r.slice(0,e);return this.head.data=r.slice(e),t}return e===r.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[n](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let t="",n=this.head,o=0;do{let i=n.data;if(!(e>i.length)){e===i.length?(t+=i,++o,n.next?this.head=n.next:this.head=this.tail=null):(t+=r(i,0,e),this.head=n,n.data=r(i,e));break}t+=i,e-=i.length,++o}while(null!==(n=n.next));return this.length-=o,t}_getBuffer(e){let t=s.allocUnsafe(e),r=e,n=this.head,a=0;do{let s=n.data;if(!(e>s.length)){e===s.length?(o(t,s,r-e),++a,n.next?this.head=n.next:this.head=this.tail=null):(o(t,new i(s.buffer,s.byteOffset,e),r-e),this.head=n,n.data=s.slice(e));break}o(t,s,r-e),e-=s.length,++a}while(null!==(n=n.next));return this.length-=a,t}[Symbol.for("nodejs.util.inspect.custom")](e,t){return a(this,{...t,depth:0,customInspect:!1})}}}),Nt=h((e,t)=>{d(),at(),He();var{MathFloor:r,NumberIsInteger:n}=lt(),{validateInteger:o}=kt(),{ERR_INVALID_ARG_VALUE:i}=ut().codes,s=16384,a=16;function l(e){return e?a:s}t.exports={getHighWaterMark:function(e,t,o,s){let a=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,s,o);if(null!=a){if(!n(a)||a<0)throw new i(s?`options.${o}`:"options.highWaterMark",a);return r(a)}return l(e.objectMode)},getDefaultHighWaterMark:l,setDefaultHighWaterMark:function(e,t){o(t,"value",0),e?a=t:s=t}}}),Mt=h((e,t)=>{d(),at(),He();var r=(st(),p(tt)),n=r.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function i(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=i),i.prototype=Object.create(n.prototype),o(n,i),i.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return n(e,t,r)},i.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var o=n(e);return void 0!==t?"string"==typeof r?o.fill(t,r):o.fill(t):o.fill(0),o},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}}),Bt=h(e=>{d(),at(),He();var t=Mt().Buffer,r=t.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(e){var n;switch(this.encoding=function(e){var n=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof n&&(t.isEncoding===r||!r(e)))throw new Error("Unknown encoding: "+e);return n||e}(e),this.encoding){case"utf16le":this.text=s,this.end=a,n=4;break;case"utf8":this.fillLast=i,n=4;break;case"base64":this.text=l,this.end=c,n=3;break;default:return this.write=u,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(n)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function i(e){var t=this.lastTotal-this.lastNeed,r=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function s(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function a(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function l(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function c(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function u(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}e.StringDecoder=n,n.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},n.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},n.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=o(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||-2===i?0:(i=o(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||-2===i?0:(i=o(t[n]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},n.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}}),Lt=h((e,t)=>{d(),at(),He();var r=xt(),{PromisePrototypeThen:n,SymbolAsyncIterator:o,SymbolIterator:i}=lt(),{Buffer:s}=(st(),p(tt)),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_NULL_VALUES:l}=ut().codes;t.exports=function(e,t,c){let u,h;if("string"==typeof t||t instanceof s)return new e({objectMode:!0,...c,read(){this.push(t),this.push(null)}});if(t&&t[o])h=!0,u=t[o]();else{if(!t||!t[i])throw new a("iterable",["Iterable"],t);h=!1,u=t[i]()}let f=new e({objectMode:!0,highWaterMark:1,...c}),p=!1;return f._read=function(){p||(p=!0,async function(){for(;;){try{let{value:e,done:t}=h?await u.next():u.next();if(t)f.push(null);else{let t=e&&"function"==typeof e.then?await e:e;if(null===t)throw p=!1,new l;if(f.push(t))continue;p=!1}}catch(e){f.destroy(e)}break}}())},f._destroy=function(e,t){n(async function(e){let t=null!=e,r="function"==typeof u.throw;if(t&&r){let{value:t,done:r}=await u.throw(e);if(await t,r)return}if("function"==typeof u.return){let{value:e}=await u.return();await e}}(e),()=>r.nextTick(t,e),n=>r.nextTick(t,n||e))},f}}),Ut=h((e,t)=>{d(),at(),He();var r=xt(),{ArrayPrototypeIndexOf:n,NumberIsInteger:o,NumberIsNaN:i,NumberParseInt:s,ObjectDefineProperties:a,ObjectKeys:l,ObjectSetPrototypeOf:c,Promise:u,SafeSet:h,SymbolAsyncDispose:f,SymbolAsyncIterator:m,Symbol:g}=lt();t.exports=Q,Q.ReadableState=G;var{EventEmitter:y}=(It(),p(ft)),{Stream:b,prependListener:_}=Ct(),{Buffer:v}=(st(),p(tt)),{addAbortSignal:w}=jt(),S=$t(),E=Pt().debuglog("stream",e=>{E=e}),A=Rt(),I=Tt(),{getHighWaterMark:P,getDefaultHighWaterMark:k}=Nt(),{aggregateTwoErrors:x,codes:{ERR_INVALID_ARG_TYPE:O,ERR_METHOD_NOT_IMPLEMENTED:$,ERR_OUT_OF_RANGE:T,ERR_STREAM_PUSH_AFTER_EOF:C,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:j},AbortError:R}=ut(),{validateObject:N}=kt(),M=g("kPaused"),{StringDecoder:B}=Bt(),L=Lt();c(Q.prototype,b.prototype),c(Q,b);var U,D=()=>{},{errorOrDestroy:F}=I,W=1,q=16,V=32,z=2048,H=4096;function K(e){return{enumerable:!1,get(){return 0!==(this.state&e)},set(t){t?this.state|=e:this.state&=~e}}}function G(e,t,r){"boolean"!=typeof r&&(r=t instanceof Wt()),this.state=z|H|q|V,e&&e.objectMode&&(this.state|=W),r&&e&&e.readableObjectMode&&(this.state|=W),this.highWaterMark=e?P(this,e,"readableHighWaterMark",r):k(!1),this.buffer=new A,this.length=0,this.pipes=[],this.flowing=null,this[M]=null,e&&!1===e.emitClose&&(this.state&=~z),e&&!1===e.autoDestroy&&(this.state&=~H),this.errored=null,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,e&&e.encoding&&(this.decoder=new B(e.encoding),this.encoding=e.encoding)}function Q(e){if(!(this instanceof Q))return new Q(e);let t=this instanceof Wt();this._readableState=new G(e,this,t),e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&!t&&w(e.signal,this)),b.call(this,e),I.construct(this,()=>{this._readableState.needReadable&&te(this,this._readableState)})}function J(e,t,r,n){E("readableAddChunk",t);let o,i=e._readableState;if(0===(i.state&W)&&("string"==typeof t?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?t=v.from(t,r).toString(i.encoding):(t=v.from(t,r),r=""))):t instanceof v?r="":b._isUint8Array(t)?(t=b._uint8ArrayToBuffer(t),r=""):null!=t&&(o=new O("chunk",["string","Buffer","Uint8Array"],t))),o)F(e,o);else if(null===t)i.state&=-9,function(e,t){if(E("onEofChunk"),!t.ended){if(t.decoder){let e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,t.sync?Z(e):(t.needReadable=!1,t.emittedReadable=!0,ee(e))}}(e,i);else if(0!==(i.state&W)||t&&t.length>0)if(n)if(4&i.state)F(e,new j);else{if(i.destroyed||i.errored)return!1;Y(e,i,t,!0)}else if(i.ended)F(e,new C);else{if(i.destroyed||i.errored)return!1;i.state&=-9,i.decoder&&!r?(t=i.decoder.write(t),i.objectMode||0!==t.length?Y(e,i,t,!1):te(e,i)):Y(e,i,t,!1)}else n||(i.state&=-9,te(e,i));return!i.ended&&(i.length<i.highWaterMark||0===i.length)}function Y(e,t,r,n){t.flowing&&0===t.length&&!t.sync&&e.listenerCount("data")>0?(65536&t.state?t.awaitDrainWriters.clear():t.awaitDrainWriters=null,t.dataEmitted=!0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),!!(64&t.state)&&Z(e)),te(e,t)}function X(e,t){return e<=0||0===t.length&&t.ended?0:0!==(t.state&W)?1:i(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0}function Z(e){let t=e._readableState;E("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(E("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(ee,e))}function ee(e){let t=e._readableState;E("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&!t.errored&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,se(e)}function te(e,t){!t.readingMore&&t.constructed&&(t.readingMore=!0,r.nextTick(re,e,t))}function re(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){let r=t.length;if(E("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function ne(e){let t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!1===t[M]?t.flowing=!0:e.listenerCount("data")>0?e.resume():t.readableListening||(t.flowing=null)}function oe(e){E("readable nexttick read 0"),e.read(0)}function ie(e,t){E("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),se(e),t.flowing&&!t.reading&&e.read(0)}function se(e){let t=e._readableState;for(E("flow",t.flowing);t.flowing&&null!==e.read(););}function ae(e,t){"function"!=typeof e.read&&(e=Q.wrap(e,{objectMode:!0}));let r=async function*(e,t){let r=D;function n(t){this===e?(r(),r=D):r=t}e.on("readable",n);let o,i=S(e,{writable:!1},e=>{o=e?x(o,e):null,r(),r=D});try{for(;;){let t=e.destroyed?null:e.read();if(null!==t)yield t;else{if(o)throw o;if(null===o)return;await new u(n)}}}catch(e){throw o=x(o,e),o}finally{!o&&!1===t?.destroyOnReturn||void 0!==o&&!e._readableState.autoDestroy?(e.off("readable",n),i()):I.destroyer(e,null)}}(e,t);return r.stream=e,r}function le(e,t){if(0===t.length)return null;let r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r}function ce(e){let t=e._readableState;E("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(ue,t,e))}function ue(e,t){if(E("endReadableNT",e.endEmitted,e.length),!e.errored&&!e.closeEmitted&&!e.endEmitted&&0===e.length)if(e.endEmitted=!0,t.emit("end"),t.writable&&!1===t.allowHalfOpen)r.nextTick(he,t);else if(e.autoDestroy){let e=t._writableState;(!e||e.autoDestroy&&(e.finished||!1===e.writable))&&t.destroy()}}function he(e){e.writable&&!e.writableEnded&&!e.destroyed&&e.end()}function fe(){return void 0===U&&(U={}),U}a(G.prototype,{objectMode:K(W),ended:K(2),endEmitted:K(4),reading:K(8),constructed:K(q),sync:K(V),needReadable:K(64),emittedReadable:K(128),readableListening:K(256),resumeScheduled:K(512),errorEmitted:K(1024),emitClose:K(z),autoDestroy:K(H),destroyed:K(8192),closed:K(16384),closeEmitted:K(32768),multiAwaitDrain:K(65536),readingMore:K(1<<17),dataEmitted:K(1<<18)}),Q.prototype.destroy=I.destroy,Q.prototype._undestroy=I.undestroy,Q.prototype._destroy=function(e,t){t(e)},Q.prototype[y.captureRejectionSymbol]=function(e){this.destroy(e)},Q.prototype[f]=function(){let e;return this.destroyed||(e=this.readableEnded?null:new R,this.destroy(e)),new u((t,r)=>S(this,n=>n&&n!==e?r(n):t(null)))},Q.prototype.push=function(e,t){return J(this,e,t,!1)},Q.prototype.unshift=function(e,t){return J(this,e,t,!0)},Q.prototype.isPaused=function(){let e=this._readableState;return!0===e[M]||!1===e.flowing},Q.prototype.setEncoding=function(e){let t=new B(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let e of r)n+=t.write(e);return r.clear(),""!==n&&r.push(n),this._readableState.length=n.length,this},Q.prototype.read=function(e){E("read",e),void 0===e?e=NaN:o(e)||(e=s(e,10));let t=this._readableState,r=e;if(e>t.highWaterMark&&(t.highWaterMark=function(e){if(e>1073741824)throw new T("size","<= 1GiB",e);return e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,++e}(e)),0!==e&&(t.state&=-129),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return E("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?ce(this):Z(this),null;if(0===(e=X(e,t))&&t.ended)return 0===t.length&&ce(this),null;let n,i=!!(64&t.state);if(E("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&(i=!0,E("length less than watermark",i)),t.ended||t.reading||t.destroyed||t.errored||!t.constructed)i=!1,E("reading, ended or constructing",i);else if(i){E("do read"),t.state|=8|V,0===t.length&&(t.state|=64);try{this._read(t.highWaterMark)}catch(e){F(this,e)}t.state&=~V,t.reading||(e=X(r,t))}return n=e>0?le(e,t):null,null===n?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&ce(this)),null!==n&&!t.errorEmitted&&!t.closeEmitted&&(t.dataEmitted=!0,this.emit("data",n)),n},Q.prototype._read=function(e){throw new $("_read()")},Q.prototype.pipe=function(e,t){let n=this,o=this._readableState;1===o.pipes.length&&(o.multiAwaitDrain||(o.multiAwaitDrain=!0,o.awaitDrainWriters=new h(o.awaitDrainWriters?[o.awaitDrainWriters]:[]))),o.pipes.push(e),E("pipe count=%d opts=%j",o.pipes.length,t);let i=t&&!1===t.end||e===r.stdout||e===r.stderr?m:s;function s(){E("onend"),e.end()}o.endEmitted?r.nextTick(i):n.once("end",i),e.on("unpipe",function t(r,i){E("onunpipe"),r===n&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,E("cleanup"),e.removeListener("close",p),e.removeListener("finish",d),a&&e.removeListener("drain",a),e.removeListener("error",f),e.removeListener("unpipe",t),n.removeListener("end",s),n.removeListener("end",m),n.removeListener("data",u),l=!0,a&&o.awaitDrainWriters&&(!e._writableState||e._writableState.needDrain)&&a())});let a,l=!1;function c(){l||(1===o.pipes.length&&o.pipes[0]===e?(E("false write response, pause",0),o.awaitDrainWriters=e,o.multiAwaitDrain=!1):o.pipes.length>1&&o.pipes.includes(e)&&(E("false write response, pause",o.awaitDrainWriters.size),o.awaitDrainWriters.add(e)),n.pause()),a||(a=function(e,t){return function(){let r=e._readableState;r.awaitDrainWriters===t?(E("pipeOnDrain",1),r.awaitDrainWriters=null):r.multiAwaitDrain&&(E("pipeOnDrain",r.awaitDrainWriters.size),r.awaitDrainWriters.delete(t)),(!r.awaitDrainWriters||0===r.awaitDrainWriters.size)&&e.listenerCount("data")&&e.resume()}}(n,e),e.on("drain",a))}function u(t){E("ondata");let r=e.write(t);E("dest.write",r),!1===r&&c()}function f(t){if(E("onerror",t),m(),e.removeListener("error",f),0===e.listenerCount("error")){let r=e._writableState||e._readableState;r&&!r.errorEmitted?F(e,t):e.emit("error",t)}}function p(){e.removeListener("finish",d),m()}function d(){E("onfinish"),e.removeListener("close",p),m()}function m(){E("unpipe"),n.unpipe(e)}return n.on("data",u),_(e,"error",f),e.once("close",p),e.once("finish",d),e.emit("pipe",n),!0===e.writableNeedDrain?c():o.flowing||(E("pipe resume"),n.resume()),e},Q.prototype.unpipe=function(e){let t=this._readableState;if(0===t.pipes.length)return this;if(!e){let e=t.pipes;t.pipes=[],this.pause();for(let t=0;t<e.length;t++)e[t].emit("unpipe",this,{hasUnpiped:!1});return this}let r=n(t.pipes,e);return-1===r||(t.pipes.splice(r,1),0===t.pipes.length&&this.pause(),e.emit("unpipe",this,{hasUnpiped:!1})),this},Q.prototype.on=function(e,t){let n=b.prototype.on.call(this,e,t),o=this._readableState;return"data"===e?(o.readableListening=this.listenerCount("readable")>0,!1!==o.flowing&&this.resume()):"readable"===e&&!o.endEmitted&&!o.readableListening&&(o.readableListening=o.needReadable=!0,o.flowing=!1,o.emittedReadable=!1,E("on readable",o.length,o.reading),o.length?Z(this):o.reading||r.nextTick(oe,this)),n},Q.prototype.addListener=Q.prototype.on,Q.prototype.removeListener=function(e,t){let n=b.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(ne,this),n},Q.prototype.off=Q.prototype.removeListener,Q.prototype.removeAllListeners=function(e){let t=b.prototype.removeAllListeners.apply(this,arguments);return("readable"===e||void 0===e)&&r.nextTick(ne,this),t},Q.prototype.resume=function(){let e=this._readableState;return e.flowing||(E("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(ie,e,t))}(this,e)),e[M]=!1,this},Q.prototype.pause=function(){return E("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(E("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[M]=!0,this},Q.prototype.wrap=function(e){let t=!1;e.on("data",r=>{!this.push(r)&&e.pause&&(t=!0,e.pause())}),e.on("end",()=>{this.push(null)}),e.on("error",e=>{F(this,e)}),e.on("close",()=>{this.destroy()}),e.on("destroy",()=>{this.destroy()}),this._read=()=>{t&&e.resume&&(t=!1,e.resume())};let r=l(e);for(let t=1;t<r.length;t++){let n=r[t];void 0===this[n]&&"function"==typeof e[n]&&(this[n]=e[n].bind(e))}return this},Q.prototype[m]=function(){return ae(this)},Q.prototype.iterator=function(e){return void 0!==e&&N(e,"options"),ae(this,e)},a(Q.prototype,{readable:{__proto__:null,get(){let e=this._readableState;return!(!e||!1===e.readable||e.destroyed||e.errorEmitted||e.endEmitted)},set(e){this._readableState&&(this._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(e){this._readableState&&(this._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),a(G.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[M]},set(e){this[M]=!!e}}}),Q._fromList=le,Q.from=function(e,t){return L(Q,e,t)},Q.fromWeb=function(e,t){return fe().newStreamReadableFromReadableStream(e,t)},Q.toWeb=function(e,t){return fe().newReadableStreamFromStreamReadable(e,t)},Q.wrap=function(e,t){var r,n;return new Q({objectMode:null===(r=null!==(n=e.readableObjectMode)&&void 0!==n?n:e.objectMode)||void 0===r||r,...t,destroy(t,r){I.destroyer(e,t),r(t)}}).wrap(e)}}),Dt=h((e,t)=>{d(),at(),He();var r=xt(),{ArrayPrototypeSlice:n,Error:o,FunctionPrototypeSymbolHasInstance:i,ObjectDefineProperty:s,ObjectDefineProperties:a,ObjectSetPrototypeOf:l,StringPrototypeToLowerCase:c,Symbol:u,SymbolHasInstance:h}=lt();t.exports=N,N.WritableState=j;var{EventEmitter:f}=(It(),p(ft)),m=Ct().Stream,{Buffer:g}=(st(),p(tt)),y=Tt(),{addAbortSignal:b}=jt(),{getHighWaterMark:_,getDefaultHighWaterMark:v}=Nt(),{ERR_INVALID_ARG_TYPE:w,ERR_METHOD_NOT_IMPLEMENTED:S,ERR_MULTIPLE_CALLBACK:E,ERR_STREAM_CANNOT_PIPE:A,ERR_STREAM_DESTROYED:I,ERR_STREAM_ALREADY_FINISHED:P,ERR_STREAM_NULL_VALUES:k,ERR_STREAM_WRITE_AFTER_END:x,ERR_UNKNOWN_ENCODING:O}=ut().codes,{errorOrDestroy:$}=y;function T(){}l(N.prototype,m.prototype),l(N,m);var C=u("kOnFinished");function j(e,t,r){"boolean"!=typeof r&&(r=t instanceof Wt()),this.objectMode=!(!e||!e.objectMode),r&&(this.objectMode=this.objectMode||!(!e||!e.writableObjectMode)),this.highWaterMark=e?_(this,e,"writableHighWaterMark",r):v(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!(!e||!1!==e.decodeStrings);this.decodeStrings=!n,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=U.bind(void 0,t),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,R(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[C]=[]}function R(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0}function N(e){let t=this instanceof Wt();if(!t&&!i(N,this))return new N(e);this._writableState=new j(e,this,t),e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&b(e.signal,this)),m.call(this,e),y.construct(this,()=>{let e=this._writableState;e.writing||q(this,e),z(this,e)})}function M(e,t,n,o){let i,s=e._writableState;if("function"==typeof n)o=n,n=s.defaultEncoding;else{if(n){if("buffer"!==n&&!g.isEncoding(n))throw new O(n)}else n=s.defaultEncoding;"function"!=typeof o&&(o=T)}if(null===t)throw new k;if(!s.objectMode)if("string"==typeof t)!1!==s.decodeStrings&&(t=g.from(t,n),n="buffer");else if(t instanceof g)n="buffer";else{if(!m._isUint8Array(t))throw new w("chunk",["string","Buffer","Uint8Array"],t);t=m._uint8ArrayToBuffer(t),n="buffer"}return s.ending?i=new x:s.destroyed&&(i=new I("write")),i?(r.nextTick(o,i),$(e,i,!0),i):(s.pendingcb++,function(e,t,r,n,o){let i=t.objectMode?1:r.length;t.length+=i;let s=t.length<t.highWaterMark;return s||(t.needDrain=!0),t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:r,encoding:n,callback:o}),t.allBuffers&&"buffer"!==n&&(t.allBuffers=!1),t.allNoop&&o!==T&&(t.allNoop=!1)):(t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,e._write(r,n,t.onwrite),t.sync=!1),s&&!t.errored&&!t.destroyed}(e,s,t,n,o))}function B(e,t,r,n,o,i,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new I("write")):r?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function L(e,t,r,n){--t.pendingcb,n(r),W(t),$(e,r)}function U(e,t){let n=e._writableState,o=n.sync,i=n.writecb;"function"==typeof i?(n.writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,t?(t.stack,n.errored||(n.errored=t),e._readableState&&!e._readableState.errored&&(e._readableState.errored=t),o?r.nextTick(L,e,n,t,i):L(e,n,t,i)):(n.buffered.length>n.bufferedIndex&&q(e,n),o?null!==n.afterWriteTickInfo&&n.afterWriteTickInfo.cb===i?n.afterWriteTickInfo.count++:(n.afterWriteTickInfo={count:1,cb:i,stream:e,state:n},r.nextTick(D,n.afterWriteTickInfo)):F(e,n,1,i))):$(e,new E)}function D({stream:e,state:t,count:r,cb:n}){return t.afterWriteTickInfo=null,F(e,t,r,n)}function F(e,t,r,n){for(!t.ending&&!e.destroyed&&0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"));r-- >0;)t.pendingcb--,n();t.destroyed&&W(t),z(e,t)}function W(e){if(e.writing)return;for(let r=e.bufferedIndex;r<e.buffered.length;++r){var t;let{chunk:n,callback:o}=e.buffered[r],i=e.objectMode?1:n.length;e.length-=i,o(null!==(t=e.errored)&&void 0!==t?t:new I("write"))}let r=e[C].splice(0);for(let t=0;t<r.length;t++){var n;r[t](null!==(n=e.errored)&&void 0!==n?n:new I("end"))}R(e)}function q(e,t){if(t.corked||t.bufferProcessing||t.destroyed||!t.constructed)return;let{buffered:r,bufferedIndex:o,objectMode:i}=t,s=r.length-o;if(!s)return;let a=o;if(t.bufferProcessing=!0,s>1&&e._writev){t.pendingcb-=s-1;let o=t.allNoop?T:e=>{for(let t=a;t<r.length;++t)r[t].callback(e)},i=t.allNoop&&0===a?r:n(r,a);i.allBuffers=t.allBuffers,B(e,t,!0,t.length,i,"",o),R(t)}else{do{let{chunk:n,encoding:o,callback:s}=r[a];r[a++]=null,B(e,t,!1,i?1:n.length,n,o,s)}while(a<r.length&&!t.writing);a===r.length?R(t):a>256?(r.splice(0,a),t.bufferedIndex=0):t.bufferedIndex=a}t.bufferProcessing=!1}function V(e){return e.ending&&!e.destroyed&&e.constructed&&0===e.length&&!e.errored&&0===e.buffered.length&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function z(e,t,n){V(t)&&(function(e,t){!t.prefinished&&!t.finalCalled&&("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.finalCalled=!0,function(e,t){let n=!1;function o(o){if(n)$(e,o??E());else if(n=!0,t.pendingcb--,o){let r=t[C].splice(0);for(let e=0;e<r.length;e++)r[e](o);$(e,o,t.sync)}else V(t)&&(t.prefinished=!0,e.emit("prefinish"),t.pendingcb++,r.nextTick(H,e,t))}t.sync=!0,t.pendingcb++;try{e._final(o)}catch(e){o(e)}t.sync=!1}(e,t)))}(e,t),0===t.pendingcb&&(n?(t.pendingcb++,r.nextTick((e,t)=>{V(t)?H(e,t):t.pendingcb--},e,t)):V(t)&&(t.pendingcb++,H(e,t))))}function H(e,t){t.pendingcb--,t.finished=!0;let r=t[C].splice(0);for(let e=0;e<r.length;e++)r[e]();if(e.emit("finish"),t.autoDestroy){let t=e._readableState;(!t||t.autoDestroy&&(t.endEmitted||!1===t.readable))&&e.destroy()}}j.prototype.getBuffer=function(){return n(this.buffered,this.bufferedIndex)},s(j.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),s(N,h,{__proto__:null,value:function(e){return!!i(this,e)||this===N&&e&&e._writableState instanceof j}}),N.prototype.pipe=function(){$(this,new A)},N.prototype.write=function(e,t,r){return!0===M(this,e,t,r)},N.prototype.cork=function(){this._writableState.corked++},N.prototype.uncork=function(){let e=this._writableState;e.corked&&(e.corked--,e.writing||q(this,e))},N.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=c(e)),!g.isEncoding(e))throw new O(e);return this._writableState.defaultEncoding=e,this},N.prototype._write=function(e,t,r){if(!this._writev)throw new S("_write()");this._writev([{chunk:e,encoding:t}],r)},N.prototype._writev=null,N.prototype.end=function(e,t,n){let i,s=this._writableState;if("function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e){let r=M(this,e,t);r instanceof o&&(i=r)}return s.corked&&(s.corked=1,this.uncork()),i||(s.errored||s.ending?s.finished?i=new P("end"):s.destroyed&&(i=new I("end")):(s.ending=!0,z(this,s,!0),s.ended=!0)),"function"==typeof n&&(i||s.finished?r.nextTick(n,i):s[C].push(n)),this},a(N.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(e){this._writableState&&(this._writableState.destroyed=e)}},writable:{__proto__:null,get(){let e=this._writableState;return!(!e||!1===e.writable||e.destroyed||e.errored||e.ending||e.ended)},set(e){this._writableState&&(this._writableState.writable=!!e)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){let e=this._writableState;return!!e&&!e.destroyed&&!e.ending&&e.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});var K,G=y.destroy;function Q(){return void 0===K&&(K={}),K}N.prototype.destroy=function(e,t){let n=this._writableState;return!n.destroyed&&(n.bufferedIndex<n.buffered.length||n[C].length)&&r.nextTick(W,n),G.call(this,e,t),this},N.prototype._undestroy=y.undestroy,N.prototype._destroy=function(e,t){t(e)},N.prototype[f.captureRejectionSymbol]=function(e){this.destroy(e)},N.fromWeb=function(e,t){return Q().newStreamWritableFromWritableStream(e,t)},N.toWeb=function(e){return Q().newWritableStreamFromStreamWritable(e)}}),Ft=h((e,t)=>{d(),at(),He();var r=xt(),n=(st(),p(tt)),{isReadable:o,isWritable:i,isIterable:s,isNodeStream:a,isReadableNodeStream:l,isWritableNodeStream:c,isDuplexNodeStream:u,isReadableStream:h,isWritableStream:f}=Ot(),m=$t(),{AbortError:g,codes:{ERR_INVALID_ARG_TYPE:y,ERR_INVALID_RETURN_VALUE:b}}=ut(),{destroyer:_}=Tt(),v=Wt(),w=Ut(),S=Dt(),{createDeferredPromise:E}=Pt(),A=Lt(),I=globalThis.Blob||n.Blob,P=typeof I<"u"?function(e){return e instanceof I}:function(e){return!1},k=globalThis.AbortController||ht().AbortController,{FunctionPrototypeCall:x}=lt(),O=class extends v{constructor(e){super(e),!1===e?.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===e?.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};function $(e){let t,r,n,s,a,l=e.readable&&"function"!=typeof e.readable.read?w.wrap(e.readable):e.readable,c=e.writable,u=!!o(l),h=!!i(c);function f(e){let t=s;s=null,t?t(e):e&&a.destroy(e)}return a=new O({readableObjectMode:!(null==l||!l.readableObjectMode),writableObjectMode:!(null==c||!c.writableObjectMode),readable:u,writable:h}),h&&(m(c,e=>{h=!1,e&&_(l,e),f(e)}),a._write=function(e,r,n){c.write(e,r)?n():t=n},a._final=function(e){c.end(),r=e},c.on("drain",function(){if(t){let e=t;t=null,e()}}),c.on("finish",function(){if(r){let e=r;r=null,e()}})),u&&(m(l,e=>{u=!1,e&&_(l,e),f(e)}),l.on("readable",function(){if(n){let e=n;n=null,e()}}),l.on("end",function(){a.push(null)}),a._read=function(){for(;;){let e=l.read();if(null===e)return void(n=a._read);if(!a.push(e))return}}),a._destroy=function(e,o){!e&&null!==s&&(e=new g),n=null,t=null,r=null,null===s?o(e):(s=o,_(c,e),_(l,e))},a}t.exports=function e(t,n){if(u(t))return t;if(l(t))return $({readable:t});if(c(t))return $({writable:t});if(a(t))return $({writable:!1,readable:!1});if(h(t))return $({readable:w.fromWeb(t)});if(f(t))return $({writable:S.fromWeb(t)});if("function"==typeof t){let{value:e,write:o,final:i,destroy:a}=function(e){let{promise:t,resolve:n}=E(),o=new k,i=o.signal;return{value:e(async function*(){for(;;){let e=t;t=null;let{chunk:o,done:s,cb:a}=await e;if(r.nextTick(a),s)return;if(i.aborted)throw new g(void 0,{cause:i.reason});({promise:t,resolve:n}=E()),yield o}}(),{signal:i}),write(e,t,r){let o=n;n=null,o({chunk:e,done:!1,cb:r})},final(e){let t=n;n=null,t({done:!0,cb:e})},destroy(e,t){o.abort(),t(e)}}}(t);if(s(e))return A(O,e,{objectMode:!0,write:o,final:i,destroy:a});let l=e?.then;if("function"==typeof l){let t,n=x(l,e,e=>{if(null!=e)throw new b("nully","body",e)},e=>{_(t,e)});return t=new O({objectMode:!0,readable:!1,write:o,final(e){i(async()=>{try{await n,r.nextTick(e,null)}catch(t){r.nextTick(e,t)}})},destroy:a})}throw new b("Iterable, AsyncIterable or AsyncFunction",n,e)}if(P(t))return e(t.arrayBuffer());if(s(t))return A(O,t,{objectMode:!0,writable:!1});if(h(t?.readable)&&f(t?.writable))return O.fromWeb(t);if("object"==typeof t?.writable||"object"==typeof t?.readable)return $({readable:null!=t&&t.readable?l(t?.readable)?t?.readable:e(t.readable):void 0,writable:null!=t&&t.writable?c(t?.writable)?t?.writable:e(t.writable):void 0});let o=t?.then;if("function"==typeof o){let e;return x(o,t,t=>{null!=t&&e.push(t),e.push(null)},t=>{_(e,t)}),e=new O({objectMode:!0,writable:!1,read(){}})}throw new y(n,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],t)}}),Wt=h((e,t)=>{d(),at(),He();var{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:n,ObjectKeys:o,ObjectSetPrototypeOf:i}=lt();t.exports=u;var s,a,l=Ut(),c=Dt();i(u.prototype,l.prototype),i(u,l);{let e=o(c.prototype);for(let t=0;t<e.length;t++){let r=e[t];u.prototype[r]||(u.prototype[r]=c.prototype[r])}}function u(e){if(!(this instanceof u))return new u(e);l.call(this,e),c.call(this,e),e?(this.allowHalfOpen=!1!==e.allowHalfOpen,!1===e.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===e.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}function h(){return void 0===s&&(s={}),s}r(u.prototype,{writable:{__proto__:null,...n(c.prototype,"writable")},writableHighWaterMark:{__proto__:null,...n(c.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...n(c.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...n(c.prototype,"writableBuffer")},writableLength:{__proto__:null,...n(c.prototype,"writableLength")},writableFinished:{__proto__:null,...n(c.prototype,"writableFinished")},writableCorked:{__proto__:null,...n(c.prototype,"writableCorked")},writableEnded:{__proto__:null,...n(c.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...n(c.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}}),u.fromWeb=function(e,t){return h().newStreamDuplexFromReadableWritablePair(e,t)},u.toWeb=function(e){return h().newReadableWritablePairFromDuplex(e)},u.from=function(e){return a||(a=Ft()),a(e,"body")}}),qt=h((e,t)=>{d(),at(),He();var{ObjectSetPrototypeOf:r,Symbol:n}=lt();t.exports=l;var{ERR_METHOD_NOT_IMPLEMENTED:o}=ut().codes,i=Wt(),{getHighWaterMark:s}=Nt();r(l.prototype,i.prototype),r(l,i);var a=n("kCallback");function l(e){if(!(this instanceof l))return new l(e);let t=e?s(this,e,"readableHighWaterMark",!0):null;0===t&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),i.call(this,e),this._readableState.sync=!1,this[a]=null,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",u)}function c(e){"function"!=typeof this._flush||this.destroyed?(this.push(null),e&&e()):this._flush((t,r)=>{t?e?e(t):this.destroy(t):(null!=r&&this.push(r),this.push(null),e&&e())})}function u(){this._final!==c&&c.call(this)}l.prototype._final=c,l.prototype._transform=function(e,t,r){throw new o("_transform()")},l.prototype._write=function(e,t,r){let n=this._readableState,o=this._writableState,i=n.length;this._transform(e,t,(e,t)=>{e?r(e):(null!=t&&this.push(t),o.ended||i===n.length||n.length<n.highWaterMark?r():this[a]=r)})},l.prototype._read=function(){if(this[a]){let e=this[a];this[a]=null,e()}}}),Vt=h((e,t)=>{d(),at(),He();var{ObjectSetPrototypeOf:r}=lt();t.exports=o;var n=qt();function o(e){if(!(this instanceof o))return new o(e);n.call(this,e)}r(o.prototype,n.prototype),r(o,n),o.prototype._transform=function(e,t,r){r(null,e)}}),zt=h((e,t)=>{d(),at(),He();var r,n,o,i=xt(),{ArrayIsArray:s,Promise:a,SymbolAsyncIterator:l,SymbolDispose:c}=lt(),u=$t(),{once:h}=Pt(),f=Tt(),p=Wt(),{aggregateTwoErrors:m,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:y,ERR_MISSING_ARGS:b,ERR_STREAM_DESTROYED:_,ERR_STREAM_PREMATURE_CLOSE:v},AbortError:w}=ut(),{validateFunction:S,validateAbortSignal:E}=kt(),{isIterable:A,isReadable:I,isReadableNodeStream:P,isNodeStream:k,isTransformStream:x,isWebStream:O,isReadableStream:$,isReadableFinished:T}=Ot(),C=globalThis.AbortController||ht().AbortController;function j(e,t,r){let n=!1;return e.on("close",()=>{n=!0}),{destroy:t=>{n||(n=!0,f.destroyer(e,t||new _("pipe")))},cleanup:u(e,{readable:t,writable:r},e=>{n=!e})}}function R(e){if(A(e))return e;if(P(e))return async function*(e){n||(n=Ut()),yield*n.prototype[l].call(e)}(e);throw new g("val",["Readable","Iterable","AsyncIterable"],e)}async function N(e,t,r,{end:n}){let o,i=null,s=e=>{if(e&&(o=e),i){let e=i;i=null,e()}},l=()=>new a((e,t)=>{o?t(o):i=()=>{o?t(o):e()}});t.on("drain",s);let c=u(t,{readable:!1},s);try{t.writableNeedDrain&&await l();for await(let r of e)t.write(r)||await l();n&&(t.end(),await l()),r()}catch(e){r(o!==e?m(o,e):e)}finally{c(),t.off("drain",s)}}async function M(e,t,r,{end:n}){x(t)&&(t=t.writable);let o=t.getWriter();try{for await(let t of e)await o.ready,o.write(t).catch(()=>{});await o.ready,n&&await o.close(),r()}catch(e){try{await o.abort(e),r(e)}catch(e){r(e)}}}function B(e,t,n){if(1===e.length&&s(e[0])&&(e=e[0]),e.length<2)throw new b("streams");let a,l=new C,u=l.signal,h=n?.signal,f=[];function d(){U(new w)}E(h,"options.signal"),o=o||Pt().addAbortListener,h&&(a=o(h,d));let m,_,v,S=[],T=0;function B(e){U(e,0===--T)}function U(e,r){var n;if(e&&(!m||"ERR_STREAM_PREMATURE_CLOSE"===m.code)&&(m=e),m||r){for(;S.length;)S.shift()(m);null===(n=a)||void 0===n||n[c](),l.abort(),r&&(m||f.forEach(e=>e()),i.nextTick(t,m,_))}}for(let t=0;t<e.length;t++){let o=e[t],s=t<e.length-1,a=t>0,l=s||!1!==n?.end,c=t===e.length-1;if(k(o)){let e=function(e){e&&"AbortError"!==e.name&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code&&B(e)};if(l){let{destroy:e,cleanup:t}=j(o,s,a);S.push(e),I(o)&&c&&f.push(t)}o.on("error",e),I(o)&&c&&f.push(()=>{o.removeListener("error",e)})}if(0===t)if("function"==typeof o){if(v=o({signal:u}),!A(v))throw new y("Iterable, AsyncIterable or Stream","source",v)}else v=A(o)||P(o)||x(o)?o:p.from(o);else if("function"==typeof o){var D;if(v=x(v)?R(null===(D=v)||void 0===D?void 0:D.readable):R(v),v=o(v,{signal:u}),s){if(!A(v,!0))throw new y("AsyncIterable",`transform[${t-1}]`,v)}else{var F;r||(r=Vt());let e=new r({objectMode:!0}),t=null===(F=v)||void 0===F?void 0:F.then;if("function"==typeof t)T++,t.call(v,t=>{_=t,null!=t&&e.write(t),l&&e.end(),i.nextTick(B)},t=>{e.destroy(t),i.nextTick(B,t)});else if(A(v,!0))T++,N(v,e,B,{end:l});else{if(!$(v)&&!x(v))throw new y("AsyncIterable or Promise","destination",v);{let t=v.readable||v;T++,N(t,e,B,{end:l})}}v=e;let{destroy:n,cleanup:o}=j(v,!1,!0);S.push(n),c&&f.push(o)}}else if(k(o)){if(P(v)){T+=2;let e=L(v,o,B,{end:l});I(o)&&c&&f.push(e)}else if(x(v)||$(v)){let e=v.readable||v;T++,N(e,o,B,{end:l})}else{if(!A(v))throw new g("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],v);T++,N(v,o,B,{end:l})}v=o}else if(O(o)){if(P(v))T++,M(R(v),o,B,{end:l});else if($(v)||A(v))T++,M(v,o,B,{end:l});else{if(!x(v))throw new g("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],v);T++,M(v.readable,o,B,{end:l})}v=o}else v=p.from(o)}return(null!=u&&u.aborted||null!=h&&h.aborted)&&i.nextTick(d),v}function L(e,t,r,{end:n}){let o=!1;if(t.on("close",()=>{o||r(new v)}),e.pipe(t,{end:!1}),n){let r=function(){o=!0,t.end()};T(e)?i.nextTick(r):e.once("end",r)}else r();return u(e,{readable:!0,writable:!1},t=>{let n=e._readableState;t&&"ERR_STREAM_PREMATURE_CLOSE"===t.code&&n&&n.ended&&!n.errored&&!n.errorEmitted?e.once("end",r).once("error",r):r(t)}),u(t,{readable:!1,writable:!0},r)}t.exports={pipelineImpl:B,pipeline:function(...e){return B(e,h(function(e){return S(e[e.length-1],"streams[stream.length - 1]"),e.pop()}(e)))}}}),Ht=h((e,t)=>{d(),at(),He();var{pipeline:r}=zt(),n=Wt(),{destroyer:o}=Tt(),{isNodeStream:i,isReadable:s,isWritable:a,isWebStream:l,isTransformStream:c,isWritableStream:u,isReadableStream:h}=Ot(),{AbortError:f,codes:{ERR_INVALID_ARG_VALUE:p,ERR_MISSING_ARGS:m}}=ut(),g=$t();t.exports=function(...e){if(0===e.length)throw new m("streams");if(1===e.length)return n.from(e[0]);let t,d,y,b,_,v=[...e];if("function"==typeof e[0]&&(e[0]=n.from(e[0])),"function"==typeof e[e.length-1]){let t=e.length-1;e[t]=n.from(e[t])}for(let t=0;t<e.length;++t)if(i(e[t])||l(e[t])){if(t<e.length-1&&!(s(e[t])||h(e[t])||c(e[t])))throw new p(`streams[${t}]`,v[t],"must be readable");if(t>0&&!(a(e[t])||u(e[t])||c(e[t])))throw new p(`streams[${t}]`,v[t],"must be writable")}let w=e[0],S=r(e,function(e){let t=b;b=null,t?t(e):e?_.destroy(e):!A&&!E&&_.destroy()}),E=!!(a(w)||u(w)||c(w)),A=!!(s(S)||h(S)||c(S));if(_=new n({writableObjectMode:!(null==w||!w.writableObjectMode),readableObjectMode:!(null==S||!S.readableObjectMode),writable:E,readable:A}),E){if(i(w))_._write=function(e,r,n){w.write(e,r)?n():t=n},_._final=function(e){w.end(),d=e},w.on("drain",function(){if(t){let e=t;t=null,e()}});else if(l(w)){let e=(c(w)?w.writable:w).getWriter();_._write=async function(t,r,n){try{await e.ready,e.write(t).catch(()=>{}),n()}catch(e){n(e)}},_._final=async function(t){try{await e.ready,e.close().catch(()=>{}),d=t}catch(e){t(e)}}}let e=c(S)?S.readable:S;g(e,()=>{if(d){let e=d;d=null,e()}})}if(A)if(i(S))S.on("readable",function(){if(y){let e=y;y=null,e()}}),S.on("end",function(){_.push(null)}),_._read=function(){for(;;){let e=S.read();if(null===e)return void(y=_._read);if(!_.push(e))return}};else if(l(S)){let e=(c(S)?S.readable:S).getReader();_._read=async function(){for(;;)try{let{value:t,done:r}=await e.read();if(!_.push(t))return;if(r)return void _.push(null)}catch{return}}}return _._destroy=function(e,r){!e&&null!==b&&(e=new f),y=null,t=null,d=null,null===b?r(e):(b=r,i(S)&&o(S,e))},_}}),Kt=h((e,t)=>{d(),at(),He();var r=globalThis.AbortController||ht().AbortController,{codes:{ERR_INVALID_ARG_VALUE:n,ERR_INVALID_ARG_TYPE:o,ERR_MISSING_ARGS:i,ERR_OUT_OF_RANGE:s},AbortError:a}=ut(),{validateAbortSignal:l,validateInteger:c,validateObject:u}=kt(),h=lt().Symbol("kWeak"),f=lt().Symbol("kResistStopPropagation"),{finished:p}=$t(),m=Ht(),{addAbortSignalNoValidate:g}=jt(),{isWritable:y,isNodeStream:b}=Ot(),{deprecate:_}=Pt(),{ArrayPrototypePush:v,Boolean:w,MathFloor:S,Number:E,NumberIsNaN:A,Promise:I,PromiseReject:P,PromiseResolve:k,PromisePrototypeThen:x,Symbol:O}=lt(),$=O("kEmpty"),T=O("kEof");function C(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);null!=t&&u(t,"options"),null!=t?.signal&&l(t.signal,"options.signal");let r=1;null!=t?.concurrency&&(r=S(t.concurrency));let n=r-1;return null!=t?.highWaterMark&&(n=S(t.highWaterMark)),c(r,"options.concurrency",1),c(n,"options.highWaterMark",0),n+=r,async function*(){let o,i,s=Pt().AbortSignalAny([t?.signal].filter(w)),l=this,c=[],u={signal:s},h=!1,f=0;function p(){h=!0,d()}function d(){f-=1,m()}function m(){i&&!h&&f<r&&c.length<n&&(i(),i=null)}!async function(){try{for await(let t of l){if(h)return;if(s.aborted)throw new a;try{if(t=e(t,u),t===$)continue;t=k(t)}catch(e){t=P(e)}f+=1,x(t,d,p),c.push(t),o&&(o(),o=null),!h&&(c.length>=n||f>=r)&&await new I(e=>{i=e})}c.push(T)}catch(e){let t=P(e);x(t,d,p),c.push(t)}finally{h=!0,o&&(o(),o=null)}}();try{for(;;){for(;c.length>0;){let e=await c[0];if(e===T)return;if(s.aborted)throw new a;e!==$&&(yield e),c.shift(),m()}await new I(e=>{o=e})}}finally{h=!0,i&&(i(),i=null)}}.call(this)}async function j(e,t=void 0){for await(let r of R.call(this,e,t))return!0;return!1}function R(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);return C.call(this,async function(t,r){return await e(t,r)?t:$},t)}var N=class extends i{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};function M(e){if(e=E(e),A(e))return 0;if(e<0)throw new s("number",">= 0",e);return e}t.exports.streamReturningOperators={asIndexedPairs:_(function(e=void 0){return null!=e&&u(e,"options"),null!=e?.signal&&l(e.signal,"options.signal"),async function*(){let t=0;for await(let n of this){var r;if(null!=e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new a({cause:e.signal.reason});yield[t++,n]}}.call(this)},"readable.asIndexedPairs will be removed in a future version."),drop:function(e,t=void 0){return null!=t&&u(t,"options"),null!=t?.signal&&l(t.signal,"options.signal"),e=M(e),async function*(){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new a;for await(let r of this){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new a;e--<=0&&(yield r)}}.call(this)},filter:R,flatMap:function(e,t){let r=C.call(this,e,t);return async function*(){for await(let e of r)yield*e}.call(this)},map:C,take:function(e,t=void 0){return null!=t&&u(t,"options"),null!=t?.signal&&l(t.signal,"options.signal"),e=M(e),async function*(){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new a;for await(let r of this){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new a;if(e-- >0&&(yield r),e<=0)return}}.call(this)},compose:function(e,t){if(null!=t&&u(t,"options"),null!=t?.signal&&l(t.signal,"options.signal"),b(e)&&!y(e))throw new n("stream",e,"must be writable");let r=m(this,e);return null!=t&&t.signal&&g(t.signal,r),r}},t.exports.promiseReturningOperators={every:async function(e,t=void 0){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);return!await j.call(this,async(...t)=>!await e(...t),t)},forEach:async function(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);for await(let r of C.call(this,async function(t,r){return await e(t,r),$},t));},reduce:async function(e,t,n){var i;if("function"!=typeof e)throw new o("reducer",["Function","AsyncFunction"],e);null!=n&&u(n,"options"),null!=n?.signal&&l(n.signal,"options.signal");let s=arguments.length>1;if(null!=n&&null!==(i=n.signal)&&void 0!==i&&i.aborted){let e=new a(void 0,{cause:n.signal.reason});throw this.once("error",()=>{}),await p(this.destroy(e)),e}let c=new r,d=c.signal;if(null!=n&&n.signal){let e={once:!0,[h]:this,[f]:!0};n.signal.addEventListener("abort",()=>c.abort(),e)}let m=!1;try{for await(let r of this){var g;if(m=!0,null!=n&&null!==(g=n.signal)&&void 0!==g&&g.aborted)throw new a;s?t=await e(t,r,{signal:d}):(t=r,s=!0)}if(!m&&!s)throw new N}finally{c.abort()}return t},toArray:async function(e){null!=e&&u(e,"options"),null!=e?.signal&&l(e.signal,"options.signal");let t=[];for await(let n of this){var r;if(null!=e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new a(void 0,{cause:e.signal.reason});v(t,n)}return t},some:j,find:async function(e,t){for await(let r of R.call(this,e,t))return r}}}),Gt=h((e,t)=>{d(),at(),He();var{ArrayPrototypePop:r,Promise:n}=lt(),{isIterable:o,isNodeStream:i,isWebStream:s}=Ot(),{pipelineImpl:a}=zt(),{finished:l}=$t();Qt(),t.exports={finished:l,pipeline:function(...e){return new n((t,n)=>{let l,c,u=e[e.length-1];if(u&&"object"==typeof u&&!i(u)&&!o(u)&&!s(u)){let t=r(e);l=t.signal,c=t.end}a(e,(e,r)=>{e?n(e):t(r)},{signal:l,end:c})})}}}),Qt=h((e,t)=>{d(),at(),He();var{Buffer:r}=(st(),p(tt)),{ObjectDefineProperty:n,ObjectKeys:o,ReflectApply:i}=lt(),{promisify:{custom:s}}=Pt(),{streamReturningOperators:a,promiseReturningOperators:l}=Kt(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:c}}=ut(),u=Ht(),{setDefaultHighWaterMark:h,getDefaultHighWaterMark:f}=Nt(),{pipeline:m}=zt(),{destroyer:g}=Tt(),y=$t(),b=Gt(),_=Ot(),v=t.exports=Ct().Stream;v.isDestroyed=_.isDestroyed,v.isDisturbed=_.isDisturbed,v.isErrored=_.isErrored,v.isReadable=_.isReadable,v.isWritable=_.isWritable,v.Readable=Ut();for(let e of o(a)){let t=function(...e){if(new.target)throw c();return v.Readable.from(i(r,this,e))},r=a[e];n(t,"name",{__proto__:null,value:r.name}),n(t,"length",{__proto__:null,value:r.length}),n(v.Readable.prototype,e,{__proto__:null,value:t,enumerable:!1,configurable:!0,writable:!0})}for(let e of o(l)){let t=function(...e){if(new.target)throw c();return i(r,this,e)},r=l[e];n(t,"name",{__proto__:null,value:r.name}),n(t,"length",{__proto__:null,value:r.length}),n(v.Readable.prototype,e,{__proto__:null,value:t,enumerable:!1,configurable:!0,writable:!0})}v.Writable=Dt(),v.Duplex=Wt(),v.Transform=qt(),v.PassThrough=Vt(),v.pipeline=m;var{addAbortSignal:w}=jt();v.addAbortSignal=w,v.finished=y,v.destroy=g,v.compose=u,v.setDefaultHighWaterMark=h,v.getDefaultHighWaterMark=f,n(v,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>b}),n(m,s,{__proto__:null,enumerable:!0,get:()=>b.pipeline}),n(y,s,{__proto__:null,enumerable:!0,get:()=>b.finished}),v.Stream=v,v._isUint8Array=function(e){return e instanceof Uint8Array},v._uint8ArrayToBuffer=function(e){return r.from(e.buffer,e.byteOffset,e.byteLength)}}),Jt=h((e,t)=>{d(),at(),He();var r=Qt(),n=Gt(),o=r.Readable.destroy;t.exports=r.Readable,t.exports._uint8ArrayToBuffer=r._uint8ArrayToBuffer,t.exports._isUint8Array=r._isUint8Array,t.exports.isDisturbed=r.isDisturbed,t.exports.isErrored=r.isErrored,t.exports.isReadable=r.isReadable,t.exports.Readable=r.Readable,t.exports.Writable=r.Writable,t.exports.Duplex=r.Duplex,t.exports.Transform=r.Transform,t.exports.PassThrough=r.PassThrough,t.exports.addAbortSignal=r.addAbortSignal,t.exports.finished=r.finished,t.exports.destroy=r.destroy,t.exports.destroy=o,t.exports.pipeline=r.pipeline,t.exports.compose=r.compose,Object.defineProperty(r,"promises",{configurable:!0,enumerable:!0,get:()=>n}),t.exports.Stream=r.Stream,t.exports.default=t.exports}),Yt=h((e,t)=>{d(),at(),He(),"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}}),Xt=h((e,t)=>{d(),at(),He();var{Buffer:r}=(st(),p(tt)),n=Symbol.for("BufferList");function o(e){if(!(this instanceof o))return new o(e);o._init.call(this,e)}o._init=function(e){Object.defineProperty(this,n,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)},o.prototype._new=function(e){return new o(e)},o.prototype._offset=function(e){if(0===e)return[0,0];let t=0;for(let r=0;r<this._bufs.length;r++){let n=t+this._bufs[r].length;if(e<n||r===this._bufs.length-1)return[r,e-t];t=n}},o.prototype._reverseOffset=function(e){let t=e[0],r=e[1];for(let e=0;e<t;e++)r+=this._bufs[e].length;return r},o.prototype.getBuffers=function(){return this._bufs},o.prototype.get=function(e){if(e>this.length||e<0)return;let t=this._offset(e);return this._bufs[t[0]][t[1]]},o.prototype.slice=function(e,t){return"number"==typeof e&&e<0&&(e+=this.length),"number"==typeof t&&t<0&&(t+=this.length),this.copy(null,0,e,t)},o.prototype.copy=function(e,t,n,o){if(("number"!=typeof n||n<0)&&(n=0),("number"!=typeof o||o>this.length)&&(o=this.length),n>=this.length||o<=0)return e||r.alloc(0);let i=!!e,s=this._offset(n),a=o-n,l=a,c=i&&t||0,u=s[1];if(0===n&&o===this.length){if(!i)return 1===this._bufs.length?this._bufs[0]:r.concat(this._bufs,this.length);for(let t=0;t<this._bufs.length;t++)this._bufs[t].copy(e,c),c+=this._bufs[t].length;return e}if(l<=this._bufs[s[0]].length-u)return i?this._bufs[s[0]].copy(e,t,u,u+l):this._bufs[s[0]].slice(u,u+l);i||(e=r.allocUnsafe(a));for(let t=s[0];t<this._bufs.length;t++){let r=this._bufs[t].length-u;if(!(l>r)){this._bufs[t].copy(e,c,u,u+l),c+=r;break}this._bufs[t].copy(e,c,u),c+=r,l-=r,u&&(u=0)}return e.length>c?e.slice(0,c):e},o.prototype.shallowSlice=function(e,t){if(e=e||0,t="number"!=typeof t?this.length:t,e<0&&(e+=this.length),t<0&&(t+=this.length),e===t)return this._new();let r=this._offset(e),n=this._offset(t),o=this._bufs.slice(r[0],n[0]+1);return 0===n[1]?o.pop():o[o.length-1]=o[o.length-1].slice(0,n[1]),0!==r[1]&&(o[0]=o[0].slice(r[1])),this._new(o)},o.prototype.toString=function(e,t,r){return this.slice(t,r).toString(e)},o.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;){if(!(e>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},o.prototype.duplicate=function(){let e=this._new();for(let t=0;t<this._bufs.length;t++)e.append(this._bufs[t]);return e},o.prototype.append=function(e){return this._attach(e,o.prototype._appendBuffer)},o.prototype.prepend=function(e){return this._attach(e,o.prototype._prependBuffer,!0)},o.prototype._attach=function(e,t,n){if(null==e)return this;if(e.buffer)t.call(this,r.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e)){let[r,o]=n?[e.length-1,-1]:[0,1];for(let i=r;i>=0&&i<e.length;i+=o)this._attach(e[i],t,n)}else if(this._isBufferList(e)){let[r,o]=n?[e._bufs.length-1,-1]:[0,1];for(let i=r;i>=0&&i<e._bufs.length;i+=o)this._attach(e._bufs[i],t,n)}else"number"==typeof e&&(e=e.toString()),t.call(this,r.from(e));return this},o.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},o.prototype._prependBuffer=function(e){this._bufs.unshift(e),this.length+=e.length},o.prototype.indexOf=function(e,t,n){if(void 0===n&&"string"==typeof t&&(n=t,t=void 0),"function"==typeof e||Array.isArray(e))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof e?e=r.from([e]):"string"==typeof e?e=r.from(e,n):this._isBufferList(e)?e=e.slice():Array.isArray(e.buffer)?e=r.from(e.buffer,e.byteOffset,e.byteLength):r.isBuffer(e)||(e=r.from(e)),t=Number(t||0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),0===e.length)return t>this.length?this.length:t;let o=this._offset(t),i=o[0],s=o[1];for(;i<this._bufs.length;i++){let t=this._bufs[i];for(;s<t.length;)if(t.length-s>=e.length){let r=t.indexOf(e,s);if(-1!==r)return this._reverseOffset([i,r]);s=t.length-e.length+1}else{let t=this._reverseOffset([i,s]);if(this._match(t,e))return t;s++}s=0}return-1},o.prototype._match=function(e,t){if(this.length-e<t.length)return!1;for(let r=0;r<t.length;r++)if(this.get(e+r)!==t[r])return!1;return!0},function(){let e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let t in e)(function(t){o.prototype[t]=null===e[t]?function(e,r){return this.slice(e,e+r)[t](0,r)}:function(r=0){return this.slice(r,r+e[t])[t](0)}})(t)}(),o.prototype._isBufferList=function(e){return e instanceof o||o.isBufferList(e)},o.isBufferList=function(e){return null!=e&&e[n]},t.exports=o}),Zt=h((e,t)=>{d(),at(),He();var r=Jt().Duplex,n=Yt(),o=Xt();function i(e){if(!(this instanceof i))return new i(e);if("function"==typeof e){this._callback=e;let t=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",function(e){e.on("error",t)}),this.on("unpipe",function(e){e.removeListener("error",t)}),e=null}o._init.call(this,e),r.call(this)}n(i,r),Object.assign(i.prototype,o.prototype),i.prototype._new=function(e){return new i(e)},i.prototype._write=function(e,t,r){this._appendBuffer(e),"function"==typeof r&&r()},i.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},i.prototype.end=function(e){r.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},i.prototype._destroy=function(e,t){this._bufs.length=0,this.length=0,t(e)},i.prototype._isBufferList=function(e){return e instanceof i||e instanceof o||i.isBufferList(e)},i.isBufferList=o.isBufferList,t.exports=i,t.exports.BufferListStream=i,t.exports.BufferList=o}),er=h((e,t)=>{d(),at(),He(),t.exports=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}}),tr=h((e,t)=>{d(),at(),He();var r=t.exports,{Buffer:n}=(st(),p(tt));r.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},r.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},r.requiredHeaderFlagsErrors={};for(let e in r.requiredHeaderFlags){let t=r.requiredHeaderFlags[e];r.requiredHeaderFlagsErrors[e]="Invalid header flag bits, must be 0x"+t.toString(16)+" for "+r.types[e]+" packet"}r.codes={};for(let e in r.types){let t=r.types[e];r.codes[t]=e}r.CMD_SHIFT=4,r.CMD_MASK=240,r.DUP_MASK=8,r.QOS_MASK=3,r.QOS_SHIFT=1,r.RETAIN_MASK=1,r.VARBYTEINT_MASK=127,r.VARBYTEINT_FIN_MASK=128,r.VARBYTEINT_MAX=268435455,r.SESSIONPRESENT_MASK=1,r.SESSIONPRESENT_HEADER=n.from([r.SESSIONPRESENT_MASK]),r.CONNACK_HEADER=n.from([r.codes.connack<<r.CMD_SHIFT]),r.USERNAME_MASK=128,r.PASSWORD_MASK=64,r.WILL_RETAIN_MASK=32,r.WILL_QOS_MASK=24,r.WILL_QOS_SHIFT=3,r.WILL_FLAG_MASK=4,r.CLEAN_SESSION_MASK=2,r.CONNECT_HEADER=n.from([r.codes.connect<<r.CMD_SHIFT]),r.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},r.propertiesCodes={};for(let e in r.properties){let t=r.properties[e];r.propertiesCodes[t]=e}function o(e){return[0,1,2].map(t=>[0,1].map(o=>[0,1].map(i=>{let s=n.alloc(1);return s.writeUInt8(r.codes[e]<<r.CMD_SHIFT|(o?r.DUP_MASK:0)|t<<r.QOS_SHIFT|i,0,!0),s})))}r.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"},r.PUBLISH_HEADER=o("publish"),r.SUBSCRIBE_HEADER=o("subscribe"),r.SUBSCRIBE_OPTIONS_QOS_MASK=3,r.SUBSCRIBE_OPTIONS_NL_MASK=1,r.SUBSCRIBE_OPTIONS_NL_SHIFT=2,r.SUBSCRIBE_OPTIONS_RAP_MASK=1,r.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,r.SUBSCRIBE_OPTIONS_RH_MASK=3,r.SUBSCRIBE_OPTIONS_RH_SHIFT=4,r.SUBSCRIBE_OPTIONS_RH=[0,16,32],r.SUBSCRIBE_OPTIONS_NL=4,r.SUBSCRIBE_OPTIONS_RAP=8,r.SUBSCRIBE_OPTIONS_QOS=[0,1,2],r.UNSUBSCRIBE_HEADER=o("unsubscribe"),r.ACKS={unsuback:o("unsuback"),puback:o("puback"),pubcomp:o("pubcomp"),pubrel:o("pubrel"),pubrec:o("pubrec")},r.SUBACK_HEADER=n.from([r.codes.suback<<r.CMD_SHIFT]),r.VERSION3=n.from([3]),r.VERSION4=n.from([4]),r.VERSION5=n.from([5]),r.VERSION131=n.from([131]),r.VERSION132=n.from([132]),r.QOS=[0,1,2].map(e=>n.from([e])),r.EMPTY={pingreq:n.from([r.codes.pingreq<<4,0]),pingresp:n.from([r.codes.pingresp<<4,0]),disconnect:n.from([r.codes.disconnect<<4,0])},r.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},r.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},r.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},r.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},r.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},r.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),rr=h((e,t)=>{d(),at(),He();var r=1e3,n=6e4,o=60*n,i=24*o,s=7*i;function a(e,t,r,n){var o=t>=1.5*r;return Math.round(e/r)+" "+n+(o?"s":"")}t.exports=function(e,t){t=t||{};var l=typeof e;if("string"===l&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var a=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return a*s;case"days":case"day":case"d":return a*i;case"hours":case"hour":case"hrs":case"hr":case"h":return a*o;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===l&&isFinite(e))return t.long?function(e){var t=Math.abs(e);return t>=i?a(e,t,i,"day"):t>=o?a(e,t,o,"hour"):t>=n?a(e,t,n,"minute"):t>=r?a(e,t,r,"second"):e+" ms"}(e):function(e){var t=Math.abs(e);return t>=i?Math.round(e/i)+"d":t>=o?Math.round(e/o)+"h":t>=n?Math.round(e/n)+"m":t>=r?Math.round(e/r)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}}),nr=h((e,t)=>{d(),at(),He(),t.exports=function(e){function t(e){let n,o,i,s=null;function a(...e){if(!a.enabled)return;let r=a,o=Number(new Date),i=o-(n||o);r.diff=i,r.prev=n,r.curr=o,n=o,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,o)=>{if("%%"===n)return"%";s++;let i=t.formatters[o];if("function"==typeof i){let t=e[s];n=i.call(r,t),e.splice(s,1),s--}return n}),t.formatArgs.call(r,e),(r.log||t.log).apply(r,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(o!==t.namespaces&&(o=t.namespaces,i=t.enabled(e)),i),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function r(e,r){let n=t(this.namespace+(typeof r>"u"?":":r)+e);return n.log=this.log,n}function n(e,t){let r=0,n=0,o=-1,i=0;for(;r<e.length;)if(n<t.length&&(t[n]===e[r]||"*"===t[n]))"*"===t[n]?(o=n,i=r,n++):(r++,n++);else{if(-1===o)return!1;n=o+1,i++,r=i}for(;n<t.length&&"*"===t[n];)n++;return n===t.length}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){let e=[...t.names,...t.skips.map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.namespaces=e,t.names=[],t.skips=[];let r=("string"==typeof e?e:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let e of r)"-"===e[0]?t.skips.push(e.slice(1)):t.names.push(e)},t.enabled=function(e){for(let r of t.skips)if(n(e,r))return!1;for(let r of t.names)if(n(e,r))return!0;return!1},t.humanize=rr(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(r=>{t[r]=e[r]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}}),or=h((e,t)=>{d(),at(),He(),e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;e.splice(1,0,r,"color: inherit");let n=0,o=0;e[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(o=n))}),e.splice(o,0,r)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch{}},e.load=function(){let t;try{t=e.storage.getItem("debug")||e.storage.getItem("DEBUG")}catch{}return!t&&typeof m<"u"&&"env"in m&&(t=m.env.DEBUG),t},e.useColors=function(){if(typeof window<"u"&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch{}}(),e.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=nr()(e);var{formatters:r}=t.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}),ir=h((e,t)=>{d(),at(),He();var r=Zt(),{EventEmitter:n}=(It(),p(ft)),o=er(),i=tr(),s=or()("mqtt-packet:parser");t.exports=class e extends n{constructor(){super(),this.parser=this.constructor.parser}static parser(t){return this instanceof e?(this.settings=t||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):(new e).parser(t)}_resetState(){s("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new o,this.error=null,this._list=r(),this._stateCounter=0}parse(e){for(this.error&&this._resetState(),this._list.append(e),s("parse: current state: %s",this._states[this._stateCounter]);(-1!==this.packet.length||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,s("parse: state complete. _stateCounter is now: %d",this._stateCounter),s("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return s("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let e=this._list.readUInt8(0),t=e>>i.CMD_SHIFT;this.packet.cmd=i.types[t];let r=15&e,n=i.requiredHeaderFlags[t];return null!=n&&r!==n?this._emitError(new Error(i.requiredHeaderFlagsErrors[t])):(this.packet.retain=0!==(e&i.RETAIN_MASK),this.packet.qos=e>>i.QOS_SHIFT&i.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=0!==(e&i.DUP_MASK),s("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let e=this._parseVarByteNum(!0);return e&&(this.packet.length=e.value,this._list.consume(e.bytes)),s("_parseLength %d",e.value),!!e}_parsePayload(){s("_parsePayload: payload %O",this._list);let e=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}e=!0}return s("_parsePayload complete result: %s",e),e}_parseConnect(){s("_parseConnect");let e,t,r,n,o={},a=this.packet,l=this._parseString();if(null===l)return this._emitError(new Error("Cannot parse protocolId"));if("MQTT"!==l&&"MQIsdp"!==l)return this._emitError(new Error("Invalid protocolId"));if(a.protocolId=l,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(a.protocolVersion=this._list.readUInt8(this._pos),a.protocolVersion>=128&&(a.bridgeMode=!0,a.protocolVersion=a.protocolVersion-128),3!==a.protocolVersion&&4!==a.protocolVersion&&5!==a.protocolVersion)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(1&this._list.readUInt8(this._pos))return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));o.username=this._list.readUInt8(this._pos)&i.USERNAME_MASK,o.password=this._list.readUInt8(this._pos)&i.PASSWORD_MASK,o.will=this._list.readUInt8(this._pos)&i.WILL_FLAG_MASK;let c=!!(this._list.readUInt8(this._pos)&i.WILL_RETAIN_MASK),u=(this._list.readUInt8(this._pos)&i.WILL_QOS_MASK)>>i.WILL_QOS_SHIFT;if(o.will)a.will={},a.will.retain=c,a.will.qos=u;else{if(c)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(u)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(a.clean=0!==(this._list.readUInt8(this._pos)&i.CLEAN_SESSION_MASK),this._pos++,a.keepalive=this._parseNum(),-1===a.keepalive)return this._emitError(new Error("Packet too short"));if(5===a.protocolVersion){let e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(a.properties=e)}let h=this._parseString();if(null===h)return this._emitError(new Error("Packet too short"));if(a.clientId=h,s("_parseConnect: packet.clientId: %s",a.clientId),o.will){if(5===a.protocolVersion){let e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(a.will.properties=e)}if(e=this._parseString(),null===e)return this._emitError(new Error("Cannot parse will topic"));if(a.will.topic=e,s("_parseConnect: packet.will.topic: %s",a.will.topic),t=this._parseBuffer(),null===t)return this._emitError(new Error("Cannot parse will payload"));a.will.payload=t,s("_parseConnect: packet.will.paylaod: %s",a.will.payload)}if(o.username){if(n=this._parseString(),null===n)return this._emitError(new Error("Cannot parse username"));a.username=n,s("_parseConnect: packet.username: %s",a.username)}if(o.password){if(r=this._parseBuffer(),null===r)return this._emitError(new Error("Cannot parse password"));a.password=r}return this.settings=a,s("_parseConnect: complete"),a}_parseConnack(){s("_parseConnack");let e=this.packet;if(this._list.length<1)return null;let t=this._list.readUInt8(this._pos++);if(t>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(e.sessionPresent=!!(t&i.SESSIONPRESENT_MASK),5===this.settings.protocolVersion)this._list.length>=2?e.reasonCode=this._list.readUInt8(this._pos++):e.reasonCode=0;else{if(this._list.length<2)return null;e.returnCode=this._list.readUInt8(this._pos++)}if(-1===e.returnCode||-1===e.reasonCode)return this._emitError(new Error("Cannot parse return code"));if(5===this.settings.protocolVersion){let t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}s("_parseConnack: complete")}_parsePublish(){s("_parsePublish");let e=this.packet;if(e.topic=this._parseString(),null===e.topic)return this._emitError(new Error("Cannot parse topic"));if(!(e.qos>0)||this._parseMessageId()){if(5===this.settings.protocolVersion){let t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}e.payload=this._list.slice(this._pos,e.length),s("_parsePublish: payload from buffer list: %o",e.payload)}}_parseSubscribe(){s("_parseSubscribe");let e,t,r,n,o,a,l,c=this.packet;if(c.subscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){let e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(c.properties=e)}if(c.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<c.length;){if(e=this._parseString(),null===e)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=c.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(t=this._parseByte(),5===this.settings.protocolVersion){if(192&t)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(252&t)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(r=t&i.SUBSCRIBE_OPTIONS_QOS_MASK,r>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(a=0!==(t>>i.SUBSCRIBE_OPTIONS_NL_SHIFT&i.SUBSCRIBE_OPTIONS_NL_MASK),o=0!==(t>>i.SUBSCRIBE_OPTIONS_RAP_SHIFT&i.SUBSCRIBE_OPTIONS_RAP_MASK),n=t>>i.SUBSCRIBE_OPTIONS_RH_SHIFT&i.SUBSCRIBE_OPTIONS_RH_MASK,n>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));l={topic:e,qos:r},5===this.settings.protocolVersion?(l.nl=a,l.rap=o,l.rh=n):this.settings.bridgeMode&&(l.rh=0,l.rap=!0,l.nl=!0),s("_parseSubscribe: push subscription `%s` to subscription",l),c.subscriptions.push(l)}}}_parseSuback(){s("_parseSuback");let e=this.packet;if(this.packet.granted=[],this._parseMessageId()){if(5===this.settings.protocolVersion){let t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}if(e.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let e=this._list.readUInt8(this._pos++);if(5===this.settings.protocolVersion){if(!i.MQTT5_SUBACK_CODES[e])return this._emitError(new Error("Invalid suback code"))}else if(e>2&&128!==e)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(e)}}}_parseUnsubscribe(){s("_parseUnsubscribe");let e=this.packet;if(e.unsubscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){let t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}if(e.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<e.length;){let t=this._parseString();if(null===t)return this._emitError(new Error("Cannot parse topic"));s("_parseUnsubscribe: push topic `%s` to unsubscriptions",t),e.unsubscriptions.push(t)}}}_parseUnsuback(){s("_parseUnsuback");let e=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((3===this.settings.protocolVersion||4===this.settings.protocolVersion)&&2!==e.length)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(e.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(5===this.settings.protocolVersion){let t=this._parseProperties();for(Object.getOwnPropertyNames(t).length&&(e.properties=t),e.granted=[];this._pos<this.packet.length;){let e=this._list.readUInt8(this._pos++);if(!i.MQTT5_UNSUBACK_CODES[e])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(e)}}}_parseConfirmation(){s("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let e=this.packet;if(this._parseMessageId(),5===this.settings.protocolVersion){if(e.length>2){switch(e.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!i.MQTT5_PUBACK_PUBREC_CODES[e.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!i.MQTT5_PUBREL_PUBCOMP_CODES[e.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"))}s("_parseConfirmation: packet.reasonCode `%d`",e.reasonCode)}else e.reasonCode=0;if(e.length>3){let t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}}return!0}_parseDisconnect(){let e=this.packet;if(s("_parseDisconnect"),5===this.settings.protocolVersion){this._list.length>0?(e.reasonCode=this._parseByte(),i.MQTT5_DISCONNECT_CODES[e.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):e.reasonCode=0;let t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}return s("_parseDisconnect result: true"),!0}_parseAuth(){s("_parseAuth");let e=this.packet;if(5!==this.settings.protocolVersion)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(e.reasonCode=this._parseByte(),!i.MQTT5_AUTH_CODES[e.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let t=this._parseProperties();return Object.getOwnPropertyNames(t).length&&(e.properties=t),s("_parseAuth: result: true"),!0}_parseMessageId(){let e=this.packet;return e.messageId=this._parseNum(),null===e.messageId?(this._emitError(new Error("Cannot parse messageId")),!1):(s("_parseMessageId: packet.messageId %d",e.messageId),!0)}_parseString(e){let t=this._parseNum(),r=t+this._pos;if(-1===t||r>this._list.length||r>this.packet.length)return null;let n=this._list.toString("utf8",this._pos,r);return this._pos+=t,s("_parseString: result: %s",n),n}_parseStringPair(){return s("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let e=this._parseNum(),t=e+this._pos;if(-1===e||t>this._list.length||t>this.packet.length)return null;let r=this._list.slice(this._pos,t);return this._pos+=e,s("_parseBuffer: result: %o",r),r}_parseNum(){if(this._list.length-this._pos<2)return-1;let e=this._list.readUInt16BE(this._pos);return this._pos+=2,s("_parseNum: result: %s",e),e}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let e=this._list.readUInt32BE(this._pos);return this._pos+=4,s("_parse4ByteNum: result: %s",e),e}_parseVarByteNum(e){s("_parseVarByteNum");let t,r=0,n=1,o=0,a=!1,l=this._pos?this._pos:0;for(;r<4&&l+r<this._list.length;){if(t=this._list.readUInt8(l+r++),o+=n*(t&i.VARBYTEINT_MASK),n*=128,0===(t&i.VARBYTEINT_FIN_MASK)){a=!0;break}if(this._list.length<=r)break}return!a&&4===r&&this._list.length>=r&&this._emitError(new Error("Invalid variable byte integer")),l&&(this._pos+=r),a=!!a&&(e?{bytes:r,value:o}:o),s("_parseVarByteNum: result: %o",a),a}_parseByte(){let e;return this._pos<this._list.length&&(e=this._list.readUInt8(this._pos),this._pos++),s("_parseByte: result: %o",e),e}_parseByType(e){switch(s("_parseByType: type: %s",e),e){case"byte":return 0!==this._parseByte();case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){s("_parseProperties");let e=this._parseVarByteNum(),t=this._pos+e,r={};for(;this._pos<t;){let e=this._parseByte();if(!e)return this._emitError(new Error("Cannot parse property code type")),!1;let t=i.propertiesCodes[e];if(!t)return this._emitError(new Error("Unknown property")),!1;if("userProperties"===t){r[t]||(r[t]=Object.create(null));let e=this._parseByType(i.propertiesTypes[t]);if(r[t][e.name])if(Array.isArray(r[t][e.name]))r[t][e.name].push(e.value);else{let n=r[t][e.name];r[t][e.name]=[n],r[t][e.name].push(e.value)}else r[t][e.name]=e.value;continue}r[t]?(Array.isArray(r[t])||(r[t]=[r[t]]),r[t].push(this._parseByType(i.propertiesTypes[t]))):r[t]=this._parseByType(i.propertiesTypes[t])}return r}_newPacket(){return s("_newPacket"),this.packet&&(this._list.consume(this.packet.length),s("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),s("_newPacket: new packet"),this.packet=new o,this._pos=0,!0}_emitError(e){s("_emitError",e),this.error=e,this.emit("error",e)}}}),sr=h((e,t)=>{d(),at(),He();var{Buffer:r}=(st(),p(tt)),n={},o=r.isBuffer(r.from([1,2]).subarray(0,1));function i(e){let t=r.allocUnsafe(2);return t.writeUInt8(e>>8,0),t.writeUInt8(255&e,1),t}t.exports={cache:n,generateCache:function(){for(let e=0;e<65536;e++)n[e]=i(e)},generateNumber:i,genBufVariableByteInt:function(e){let t=0,n=0,i=r.allocUnsafe(4);do{t=e%128|0,(e=e/128|0)>0&&(t|=128),i.writeUInt8(t,n++)}while(e>0&&n<4);return e>0&&(n=0),o?i.subarray(0,n):i.slice(0,n)},generate4ByteBuffer:function(e){let t=r.allocUnsafe(4);return t.writeUInt32BE(e,0),t}}}),ar=h((e,t)=>{d(),at(),He(),typeof m>"u"||!m.version||0===m.version.indexOf("v0.")||0===m.version.indexOf("v1.")&&0!==m.version.indexOf("v1.8.")?t.exports={nextTick:function(e,t,r,n){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,i,s=arguments.length;switch(s){case 0:case 1:return m.nextTick(e);case 2:return m.nextTick(function(){e.call(null,t)});case 3:return m.nextTick(function(){e.call(null,t,r)});case 4:return m.nextTick(function(){e.call(null,t,r,n)});default:for(o=new Array(s-1),i=0;i<o.length;)o[i++]=arguments[i];return m.nextTick(function(){e.apply(null,o)})}}}:t.exports=m}),lr=h((e,t)=>{d(),at(),He();var r=tr(),{Buffer:n}=(st(),p(tt)),o=n.allocUnsafe(0),i=n.from([0]),s=sr(),a=ar().nextTick,l=or()("mqtt-packet:writeToStream"),c=s.cache,u=s.generateNumber,h=s.generateCache,f=s.genBufVariableByteInt,m=s.generate4ByteBuffer,g=A,y=!0;function b(e,t,s){switch(l("generate called"),t.cork&&(t.cork(),a(_,t)),y&&(y=!1,h()),l("generate: packet.cmd: %s",e.cmd),e.cmd){case"connect":return function(e,t){let o=e||{},i=o.protocolId||"MQTT",s=o.protocolVersion||4,a=o.will,l=o.clean,c=o.keepalive||0,u=o.clientId||"",h=o.username,f=o.password,p=o.properties;void 0===l&&(l=!0);let d,m,y=0;if(!i||"string"!=typeof i&&!n.isBuffer(i))return t.destroy(new Error("Invalid protocolId")),!1;if(y+=i.length+2,3!==s&&4!==s&&5!==s)return t.destroy(new Error("Invalid protocol version")),!1;if(y+=1,("string"==typeof u||n.isBuffer(u))&&(u||s>=4)&&(u||l))y+=n.byteLength(u)+2;else{if(s<4)return t.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(1*l==0)return t.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if("number"!=typeof c||c<0||c>65535||c%1!=0)return t.destroy(new Error("Invalid keepalive")),!1;if(y+=2,y+=1,5===s){if(d=k(t,p),!d)return!1;y+=d.length}if(a){if("object"!=typeof a)return t.destroy(new Error("Invalid will")),!1;if(!a.topic||"string"!=typeof a.topic)return t.destroy(new Error("Invalid will topic")),!1;if(y+=n.byteLength(a.topic)+2,y+=2,a.payload){if(!(a.payload.length>=0))return t.destroy(new Error("Invalid will payload")),!1;"string"==typeof a.payload?y+=n.byteLength(a.payload):y+=a.payload.length}if(m={},5===s){if(m=k(t,a.properties),!m)return!1;y+=m.length}}let b=!1;if(null!=h){if(!C(h))return t.destroy(new Error("Invalid username")),!1;b=!0,y+=n.byteLength(h)+2}if(null!=f){if(!b)return t.destroy(new Error("Username is required to use password")),!1;if(!C(f))return t.destroy(new Error("Invalid password")),!1;y+=T(f)+2}t.write(r.CONNECT_HEADER),w(t,y),P(t,i),o.bridgeMode&&(s+=128),t.write(131===s?r.VERSION131:132===s?r.VERSION132:4===s?r.VERSION4:5===s?r.VERSION5:r.VERSION3);let _=0;return _|=null!=h?r.USERNAME_MASK:0,_|=null!=f?r.PASSWORD_MASK:0,_|=a&&a.retain?r.WILL_RETAIN_MASK:0,_|=a&&a.qos?a.qos<<r.WILL_QOS_SHIFT:0,_|=a?r.WILL_FLAG_MASK:0,_|=l?r.CLEAN_SESSION_MASK:0,t.write(n.from([_])),g(t,c),5===s&&d.write(),P(t,u),a&&(5===s&&m.write(),S(t,a.topic),P(t,a.payload)),null!=h&&P(t,h),null!=f&&P(t,f),!0}(e,t);case"connack":return function(e,t,o){let s=o?o.protocolVersion:4,a=e||{},l=5===s?a.reasonCode:a.returnCode,c=a.properties,u=2;if("number"!=typeof l)return t.destroy(new Error("Invalid return code")),!1;let h=null;if(5===s){if(h=k(t,c),!h)return!1;u+=h.length}return t.write(r.CONNACK_HEADER),w(t,u),t.write(a.sessionPresent?r.SESSIONPRESENT_HEADER:i),t.write(n.from([l])),h?.write(),!0}(e,t,s);case"publish":return function(e,t,i){l("publish: packet: %o",e);let s=i?i.protocolVersion:4,a=e||{},c=a.qos||0,u=a.retain?r.RETAIN_MASK:0,h=a.topic,f=a.payload||o,p=a.messageId,d=a.properties,m=0;if("string"==typeof h)m+=n.byteLength(h)+2;else{if(!n.isBuffer(h))return t.destroy(new Error("Invalid topic")),!1;m+=h.length+2}if(n.isBuffer(f)?m+=f.length:m+=n.byteLength(f),c&&"number"!=typeof p)return t.destroy(new Error("Invalid messageId")),!1;c&&(m+=2);let y=null;if(5===s){if(y=k(t,d),!y)return!1;m+=y.length}return t.write(r.PUBLISH_HEADER[c][a.dup?1:0][u?1:0]),w(t,m),g(t,T(h)),t.write(h),c>0&&g(t,p),y?.write(),l("publish: payload: %o",f),t.write(f)}(e,t,s);case"puback":case"pubrec":case"pubrel":case"pubcomp":return function(e,t,o){let i=o?o.protocolVersion:4,s=e||{},a=s.cmd||"puback",l=s.messageId,c=s.dup&&"pubrel"===a?r.DUP_MASK:0,u=0,h=s.reasonCode,f=s.properties,p=5===i?3:2;if("pubrel"===a&&(u=1),"number"!=typeof l)return t.destroy(new Error("Invalid messageId")),!1;let d=null;if(5===i&&"object"==typeof f){if(d=x(t,f,o,p),!d)return!1;p+=d.length}return t.write(r.ACKS[a][u][c][0]),3===p&&(p+=0!==h?1:-1),w(t,p),g(t,l),5===i&&2!==p&&t.write(n.from([h])),null!==d?d.write():4===p&&t.write(n.from([0])),!0}(e,t,s);case"subscribe":return function(e,t,o){l("subscribe: packet: ");let i=o?o.protocolVersion:4,s=e||{},a=s.dup?r.DUP_MASK:0,c=s.messageId,u=s.subscriptions,h=s.properties,f=0;if("number"!=typeof c)return t.destroy(new Error("Invalid messageId")),!1;f+=2;let p=null;if(5===i){if(p=k(t,h),!p)return!1;f+=p.length}if("object"!=typeof u||!u.length)return t.destroy(new Error("Invalid subscriptions")),!1;for(let e=0;e<u.length;e+=1){let r=u[e].topic,o=u[e].qos;if("string"!=typeof r)return t.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof o)return t.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(5===i){if("boolean"!=typeof(u[e].nl||!1))return t.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if("boolean"!=typeof(u[e].rap||!1))return t.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let r=u[e].rh||0;if("number"!=typeof r||r>2)return t.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}f+=n.byteLength(r)+2+1}l("subscribe: writing to stream: %o",r.SUBSCRIBE_HEADER),t.write(r.SUBSCRIBE_HEADER[1][a?1:0][0]),w(t,f),g(t,c),null!==p&&p.write();let d=!0;for(let e of u){let o,s=e.topic,a=e.qos,l=+e.nl,c=+e.rap,u=e.rh;S(t,s),o=r.SUBSCRIBE_OPTIONS_QOS[a],5===i&&(o|=l?r.SUBSCRIBE_OPTIONS_NL:0,o|=c?r.SUBSCRIBE_OPTIONS_RAP:0,o|=u?r.SUBSCRIBE_OPTIONS_RH[u]:0),d=t.write(n.from([o]))}return d}(e,t,s);case"suback":return function(e,t,o){let i=o?o.protocolVersion:4,s=e||{},a=s.messageId,l=s.granted,c=s.properties,u=0;if("number"!=typeof a)return t.destroy(new Error("Invalid messageId")),!1;if(u+=2,"object"!=typeof l||!l.length)return t.destroy(new Error("Invalid qos vector")),!1;for(let e=0;e<l.length;e+=1){if("number"!=typeof l[e])return t.destroy(new Error("Invalid qos vector")),!1;u+=1}let h=null;if(5===i){if(h=x(t,c,o,u),!h)return!1;u+=h.length}return t.write(r.SUBACK_HEADER),w(t,u),g(t,a),null!==h&&h.write(),t.write(n.from(l))}(e,t,s);case"unsubscribe":return function(e,t,o){let i=o?o.protocolVersion:4,s=e||{},a=s.messageId,l=s.dup?r.DUP_MASK:0,c=s.unsubscriptions,u=s.properties,h=0;if("number"!=typeof a)return t.destroy(new Error("Invalid messageId")),!1;if(h+=2,"object"!=typeof c||!c.length)return t.destroy(new Error("Invalid unsubscriptions")),!1;for(let e=0;e<c.length;e+=1){if("string"!=typeof c[e])return t.destroy(new Error("Invalid unsubscriptions")),!1;h+=n.byteLength(c[e])+2}let f=null;if(5===i){if(f=k(t,u),!f)return!1;h+=f.length}t.write(r.UNSUBSCRIBE_HEADER[1][l?1:0][0]),w(t,h),g(t,a),null!==f&&f.write();let p=!0;for(let e=0;e<c.length;e++)p=S(t,c[e]);return p}(e,t,s);case"unsuback":return function(e,t,o){let i=o?o.protocolVersion:4,s=e||{},a=s.messageId,l=s.dup?r.DUP_MASK:0,c=s.granted,u=s.properties,h=s.cmd,f=2;if("number"!=typeof a)return t.destroy(new Error("Invalid messageId")),!1;if(5===i){if("object"!=typeof c||!c.length)return t.destroy(new Error("Invalid qos vector")),!1;for(let e=0;e<c.length;e+=1){if("number"!=typeof c[e])return t.destroy(new Error("Invalid qos vector")),!1;f+=1}}let p=null;if(5===i){if(p=x(t,u,o,f),!p)return!1;f+=p.length}return t.write(r.ACKS[h][0][l][0]),w(t,f),g(t,a),null!==p&&p.write(),5===i&&t.write(n.from(c)),!0}(e,t,s);case"pingreq":case"pingresp":return function(e,t){return t.write(r.EMPTY[e.cmd])}(e,t);case"disconnect":return function(e,t,o){let i=o?o.protocolVersion:4,s=e||{},a=s.reasonCode,l=s.properties,c=5===i?1:0,u=null;if(5===i){if(u=x(t,l,o,c),!u)return!1;c+=u.length}return t.write(n.from([r.codes.disconnect<<4])),w(t,c),5===i&&t.write(n.from([a])),null!==u&&u.write(),!0}(e,t,s);case"auth":return function(e,t,o){let i=o?o.protocolVersion:4,s=e||{},a=s.reasonCode,l=s.properties,c=5===i?1:0;5!==i&&t.destroy(new Error("Invalid mqtt version for auth packet"));let u=x(t,l,o,c);return!!u&&(c+=u.length,t.write(n.from([r.codes.auth<<4])),w(t,c),t.write(n.from([a])),null!==u&&u.write(),!0)}(e,t,s);default:return t.destroy(new Error("Unknown command")),!1}}function _(e){e.uncork()}Object.defineProperty(b,"cacheNumbers",{get:()=>g===A,set(e){e?((!c||0===Object.keys(c).length)&&(y=!0),g=A):(y=!1,g=I)}});var v={};function w(e,t){if(t>r.VARBYTEINT_MAX)return e.destroy(new Error(`Invalid variable byte integer: ${t}`)),!1;let n=v[t];return n||(n=f(t),t<16384&&(v[t]=n)),l("writeVarByteInt: writing to stream: %o",n),e.write(n)}function S(e,t){let r=n.byteLength(t);return g(e,r),l("writeString: %s",t),e.write(t,"utf8")}function E(e,t,r){S(e,t),S(e,r)}function A(e,t){return l("writeNumberCached: number: %d",t),l("writeNumberCached: %o",c[t]),e.write(c[t])}function I(e,t){let r=u(t);return l("writeNumberGenerated: %o",r),e.write(r)}function P(e,t){"string"==typeof t?S(e,t):t?(g(e,t.length),e.write(t)):g(e,0)}function k(e,t){if("object"!=typeof t||null!=t.length)return{length:1,write(){$(e,{},0)}};let o=0;function i(t,o){let i=0;switch(r.propertiesTypes[t]){case"byte":if("boolean"!=typeof o)return e.destroy(new Error(`Invalid ${t}: ${o}`)),!1;i+=2;break;case"int8":if("number"!=typeof o||o<0||o>255)return e.destroy(new Error(`Invalid ${t}: ${o}`)),!1;i+=2;break;case"binary":if(o&&null===o)return e.destroy(new Error(`Invalid ${t}: ${o}`)),!1;i+=1+n.byteLength(o)+2;break;case"int16":if("number"!=typeof o||o<0||o>65535)return e.destroy(new Error(`Invalid ${t}: ${o}`)),!1;i+=3;break;case"int32":if("number"!=typeof o||o<0||o>4294967295)return e.destroy(new Error(`Invalid ${t}: ${o}`)),!1;i+=5;break;case"var":if("number"!=typeof o||o<0||o>268435455)return e.destroy(new Error(`Invalid ${t}: ${o}`)),!1;i+=1+n.byteLength(f(o));break;case"string":if("string"!=typeof o)return e.destroy(new Error(`Invalid ${t}: ${o}`)),!1;i+=3+n.byteLength(o.toString());break;case"pair":if("object"!=typeof o)return e.destroy(new Error(`Invalid ${t}: ${o}`)),!1;i+=Object.getOwnPropertyNames(o).reduce((e,t)=>{let r=o[t];return Array.isArray(r)?e+=r.reduce((e,r)=>e+(3+n.byteLength(t.toString())+2+n.byteLength(r.toString())),0):e+=3+n.byteLength(t.toString())+2+n.byteLength(o[t].toString()),e},0);break;default:return e.destroy(new Error(`Invalid property ${t}: ${o}`)),!1}return i}if(t)for(let e in t){let r=0,n=0,s=t[e];if(void 0!==s){if(Array.isArray(s))for(let t=0;t<s.length;t++){if(n=i(e,s[t]),!n)return!1;r+=n}else{if(n=i(e,s),!n)return!1;r=n}if(!r)return!1;o+=r}}return{length:n.byteLength(f(o))+o,write(){$(e,t,o)}}}function x(e,t,r,n){let o=["reasonString","userProperties"],i=r&&r.properties&&r.properties.maximumPacketSize?r.properties.maximumPacketSize:0,s=k(e,t);if(i)for(;n+s.length>i;){let r=o.shift();if(!r||!t[r])return!1;delete t[r],s=k(e,t)}return s}function O(e,t,o){switch(r.propertiesTypes[t]){case"byte":e.write(n.from([r.properties[t]])),e.write(n.from([+o]));break;case"int8":e.write(n.from([r.properties[t]])),e.write(n.from([o]));break;case"binary":e.write(n.from([r.properties[t]])),P(e,o);break;case"int16":e.write(n.from([r.properties[t]])),g(e,o);break;case"int32":e.write(n.from([r.properties[t]])),function(e,t){let r=m(t);l("write4ByteNumber: %o",r),e.write(r)}(e,o);break;case"var":e.write(n.from([r.properties[t]])),w(e,o);break;case"string":e.write(n.from([r.properties[t]])),S(e,o);break;case"pair":Object.getOwnPropertyNames(o).forEach(i=>{let s=o[i];Array.isArray(s)?s.forEach(o=>{e.write(n.from([r.properties[t]])),E(e,i.toString(),o.toString())}):(e.write(n.from([r.properties[t]])),E(e,i.toString(),s.toString()))});break;default:return e.destroy(new Error(`Invalid property ${t} value: ${o}`)),!1}}function $(e,t,r){w(e,r);for(let r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&null!=t[r]){let n=t[r];if(Array.isArray(n))for(let t=0;t<n.length;t++)O(e,r,n[t]);else O(e,r,n)}}function T(e){return e?e instanceof n?e.length:n.byteLength(e):0}function C(e){return"string"==typeof e||e instanceof n}t.exports=b}),cr=h((e,t)=>{d(),at(),He();var r=lr(),{EventEmitter:n}=(It(),p(ft)),{Buffer:o}=(st(),p(tt)),i=class extends n{constructor(){super(),this._array=new Array(20),this._i=0}write(e){return this._array[this._i++]=e,!0}concat(){let e,t=0,r=new Array(this._array.length),n=this._array,i=0;for(e=0;e<n.length&&void 0!==n[e];e++)"string"!=typeof n[e]?r[e]=n[e].length:r[e]=o.byteLength(n[e]),t+=r[e];let s=o.allocUnsafe(t);for(e=0;e<n.length&&void 0!==n[e];e++)"string"!=typeof n[e]?(n[e].copy(s,i),i+=r[e]):(s.write(n[e],i),i+=r[e]);return s}destroy(e){e&&this.emit("error",e)}};t.exports=function(e,t){let n=new i;return r(e,n,t),n.concat()}}),ur=h(e=>{d(),at(),He(),e.parser=ir().parser,e.generate=cr(),e.writeToStream=lr()}),hr=h((e,t)=>{function r(e){return e instanceof nt?nt.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}d(),at(),He(),t.exports=function(e){if((e=e||{}).circles)return function(e){let t=[],n=[],o=new Map;if(o.set(Date,e=>new Date(e)),o.set(Map,(e,t)=>new Map(s(Array.from(e),t))),o.set(Set,(e,t)=>new Set(s(Array.from(e),t))),e.constructorHandlers)for(let t of e.constructorHandlers)o.set(t[0],t[1]);let i=null;return e.proto?function e(a){if("object"!=typeof a||null===a)return a;if(Array.isArray(a))return s(a,e);if(a.constructor!==Object&&(i=o.get(a.constructor)))return i(a,e);let l={};t.push(a),n.push(l);for(let s in a){let c=a[s];if("object"!=typeof c||null===c)l[s]=c;else if(c.constructor!==Object&&(i=o.get(c.constructor)))l[s]=i(c,e);else if(ArrayBuffer.isView(c))l[s]=r(c);else{let r=t.indexOf(c);l[s]=-1!==r?n[r]:e(c)}}return t.pop(),n.pop(),l}:function e(a){if("object"!=typeof a||null===a)return a;if(Array.isArray(a))return s(a,e);if(a.constructor!==Object&&(i=o.get(a.constructor)))return i(a,e);let l={};t.push(a),n.push(l);for(let s in a){if(!1===Object.hasOwnProperty.call(a,s))continue;let c=a[s];if("object"!=typeof c||null===c)l[s]=c;else if(c.constructor!==Object&&(i=o.get(c.constructor)))l[s]=i(c,e);else if(ArrayBuffer.isView(c))l[s]=r(c);else{let r=t.indexOf(c);l[s]=-1!==r?n[r]:e(c)}}return t.pop(),n.pop(),l};function s(e,s){let a=Object.keys(e),l=new Array(a.length);for(let c=0;c<a.length;c++){let u=a[c],h=e[u];if("object"!=typeof h||null===h)l[u]=h;else if(h.constructor!==Object&&(i=o.get(h.constructor)))l[u]=i(h,s);else if(ArrayBuffer.isView(h))l[u]=r(h);else{let e=t.indexOf(h);l[u]=-1!==e?n[e]:s(h)}}return l}}(e);let t=new Map;if(t.set(Date,e=>new Date(e)),t.set(Map,(e,t)=>new Map(o(Array.from(e),t))),t.set(Set,(e,t)=>new Set(o(Array.from(e),t))),e.constructorHandlers)for(let r of e.constructorHandlers)t.set(r[0],r[1]);let n=null;return e.proto?function e(i){if("object"!=typeof i||null===i)return i;if(Array.isArray(i))return o(i,e);if(i.constructor!==Object&&(n=t.get(i.constructor)))return n(i,e);let s={};for(let o in i){let a=i[o];"object"!=typeof a||null===a?s[o]=a:a.constructor!==Object&&(n=t.get(a.constructor))?s[o]=n(a,e):ArrayBuffer.isView(a)?s[o]=r(a):s[o]=e(a)}return s}:function e(i){if("object"!=typeof i||null===i)return i;if(Array.isArray(i))return o(i,e);if(i.constructor!==Object&&(n=t.get(i.constructor)))return n(i,e);let s={};for(let o in i){if(!1===Object.hasOwnProperty.call(i,o))continue;let a=i[o];"object"!=typeof a||null===a?s[o]=a:a.constructor!==Object&&(n=t.get(a.constructor))?s[o]=n(a,e):ArrayBuffer.isView(a)?s[o]=r(a):s[o]=e(a)}return s};function o(e,o){let i=Object.keys(e),s=new Array(i.length);for(let a=0;a<i.length;a++){let l=i[a],c=e[l];"object"!=typeof c||null===c?s[l]=c:c.constructor!==Object&&(n=t.get(c.constructor))?s[l]=n(c,o):ArrayBuffer.isView(c)?s[l]=r(c):s[l]=o(c)}return s}}}),fr=h((e,t)=>{d(),at(),He(),t.exports=hr()()}),pr=h(e=>{function t(e){let t=e.split("/");for(let e=0;e<t.length;e++)if("+"!==t[e]){if("#"===t[e])return e===t.length-1;if(-1!==t[e].indexOf("+")||-1!==t[e].indexOf("#"))return!1}return!0}d(),at(),He(),Object.defineProperty(e,"__esModule",{value:!0}),e.validateTopic=t,e.validateTopics=function(e){if(0===e.length)return"empty_topic_list";for(let r=0;r<e.length;r++)if(!t(e[r]))return e[r];return null}}),dr=h(e=>{d(),at(),He(),Object.defineProperty(e,"__esModule",{value:!0});var t=Jt(),r={objectMode:!0},n={clean:!0};e.default=class{options;_inflights;constructor(e){this.options=e||{},this.options={...n,...e},this._inflights=new Map}put(e,t){return this._inflights.set(e.messageId,e),t&&t(),this}createStream(){let e=new t.Readable(r),n=[],o=!1,i=0;return this._inflights.forEach((e,t)=>{n.push(e)}),e._read=()=>{!o&&i<n.length?e.push(n[i++]):e.push(null)},e.destroy=t=>{if(!o)return o=!0,setTimeout(()=>{e.emit("close")},0),e},e}del(e,t){let r=this._inflights.get(e.messageId);return r?(this._inflights.delete(e.messageId),t(null,r)):t&&t(new Error("missing packet")),this}get(e,t){let r=this._inflights.get(e.messageId);return r?t(null,r):t&&t(new Error("missing packet")),this}close(e){this.options.clean&&(this._inflights=null),e&&e()}}}),mr=h(e=>{d(),at(),He(),Object.defineProperty(e,"__esModule",{value:!0});var t=[0,16,128,131,135,144,145,151,153];e.default=(e,r,n)=>{e.log("handlePublish: packet %o",r),n=typeof n<"u"?n:e.noop;let o=r.topic.toString(),i=r.payload,{qos:s}=r,{messageId:a}=r,{options:l}=e;if(5===e.options.protocolVersion){let t;if(r.properties&&(t=r.properties.topicAlias),typeof t<"u")if(0===o.length){if(!(t>0&&t<=65535))return e.log("handlePublish :: topic alias out of range. alias: %d",t),void e.emit("error",new Error("Received Topic Alias is out of range"));{let r=e.topicAliasRecv.getTopicByAlias(t);if(!r)return e.log("handlePublish :: unregistered topic alias. alias: %d",t),void e.emit("error",new Error("Received unregistered Topic Alias"));o=r,e.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",o,t)}}else{if(!e.topicAliasRecv.put(o,t))return e.log("handlePublish :: topic alias out of range. alias: %d",t),void e.emit("error",new Error("Received Topic Alias is out of range"));e.log("handlePublish :: registered topic: %s - alias: %d",o,t)}}switch(e.log("handlePublish: qos %d",s),s){case 2:l.customHandleAcks(o,i,r,(o,i)=>("number"==typeof o&&(i=o,o=null),o?e.emit("error",o):-1===t.indexOf(i)?e.emit("error",new Error("Wrong reason code for pubrec")):void(i?e._sendPacket({cmd:"pubrec",messageId:a,reasonCode:i},n):e.incomingStore.put(r,()=>{e._sendPacket({cmd:"pubrec",messageId:a},n)}))));break;case 1:l.customHandleAcks(o,i,r,(s,l)=>("number"==typeof s&&(l=s,s=null),s?e.emit("error",s):-1===t.indexOf(l)?e.emit("error",new Error("Wrong reason code for puback")):(l||e.emit("message",o,i,r),void e.handleMessage(r,t=>{if(t)return n&&n(t);e._sendPacket({cmd:"puback",messageId:a,reasonCode:l},n)}))));break;case 0:e.emit("message",o,i,r),e.handleMessage(r,n);break;default:e.log("handlePublish: unknown QoS. Doing nothing.")}}}),gr=h((e,t)=>{t.exports={version:"5.14.1"}}),yr=h(e=>{d(),at(),He(),Object.defineProperty(e,"__esModule",{value:!0}),e.MQTTJS_VERSION=e.nextTick=e.ErrorWithSubackPacket=e.ErrorWithReasonCode=void 0,e.applyMixin=function(e,t,r=!1){let n=[t];for(;;){let e=n[0],t=Object.getPrototypeOf(e);if(!t?.prototype)break;n.unshift(t)}for(let t of n)for(let n of Object.getOwnPropertyNames(t.prototype))(r||"constructor"!==n)&&Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype,n)??Object.create(null))};var t=class e extends Error{code;constructor(t,r){super(t),this.code=r,Object.setPrototypeOf(this,e.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};e.ErrorWithReasonCode=t;var r=class e extends Error{packet;constructor(t,r){super(t),this.packet=r,Object.setPrototypeOf(this,e.prototype),Object.getPrototypeOf(this).name="ErrorWithSubackPacket"}};e.ErrorWithSubackPacket=r,e.nextTick="function"==typeof m?.nextTick?m.nextTick:e=>{setTimeout(e,0)},e.MQTTJS_VERSION=gr().version}),br=h(e=>{d(),at(),He(),Object.defineProperty(e,"__esModule",{value:!0}),e.ReasonCodes=void 0;var t=yr();e.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},e.default=(r,n)=>{let{messageId:o}=n,i=n.cmd,s=null,a=r.outgoing[o]?r.outgoing[o].cb:null,l=null;if(a){switch(r.log("_handleAck :: packet type",i),i){case"pubcomp":case"puback":{let i=n.reasonCode;i&&i>0&&16!==i?(l=new t.ErrorWithReasonCode(`Publish error: ${e.ReasonCodes[i]}`,i),r._removeOutgoingAndStoreMessage(o,()=>{a(l,n)})):r._removeOutgoingAndStoreMessage(o,a);break}case"pubrec":{s={cmd:"pubrel",qos:2,messageId:o};let i=n.reasonCode;i&&i>0&&16!==i?(l=new t.ErrorWithReasonCode(`Publish error: ${e.ReasonCodes[i]}`,i),r._removeOutgoingAndStoreMessage(o,()=>{a(l,n)})):r._sendPacket(s);break}case"suback":{delete r.outgoing[o],r.messageIdProvider.deallocate(o);let t=n.granted;for(let n=0;n<t.length;n++){let i=t[n];if(128&i){l=new Error(`Subscribe error: ${e.ReasonCodes[i]}`),l.code=i;let t=r.messageIdToTopic[o];t&&t.forEach(e=>{delete r._resubscribeTopics[e]})}}delete r.messageIdToTopic[o],r._invokeStoreProcessingQueue(),a(l,n);break}case"unsuback":delete r.outgoing[o],r.messageIdProvider.deallocate(o),r._invokeStoreProcessingQueue(),a(null,n);break;default:r.emit("error",new Error("unrecognized packet type"))}r.disconnecting&&0===Object.keys(r.outgoing).length&&r.emit("outgoingEmpty")}else r.log("_handleAck :: Server sent an ack in error. Ignoring.")}}),_r=h(e=>{d(),at(),He(),Object.defineProperty(e,"__esModule",{value:!0});var t=yr(),r=br();e.default=(e,n)=>{let{options:o}=e,i=o.protocolVersion,s=5===i?n.reasonCode:n.returnCode;if(5!==i){let r=new t.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${i}`,s);return void e.emit("error",r)}e.handleAuth(n,(n,o)=>{if(n)e.emit("error",n);else if(24===s)e.reconnecting=!1,e._sendPacket(o);else{let n=new t.ErrorWithReasonCode(`Connection refused: ${r.ReasonCodes[s]}`,s);e.emit("error",n)}})}}),vr=h(e=>{d(),at(),He(),Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=void 0;var t="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,r=new Set,n="object"==typeof m&&m?m:{},o=(e,t,r,o)=>{"function"==typeof n.emitWarning?n.emitWarning(e,t,r,o):console.error(`[${r}] ${t}: ${e}`)},i=globalThis.AbortController,s=globalThis.AbortSignal;if(typeof i>"u"){s=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(e,t){this._onabort.push(t)}},i=class{constructor(){t()}signal=new s;abort(e){if(!this.signal.aborted){this.signal.reason=e,this.signal.aborted=!0;for(let t of this.signal._onabort)t(e);this.signal.onabort?.(e)}}};let e="1"!==n.env?.LRU_CACHE_IGNORE_AC_WARNING,t=()=>{e&&(e=!1,o("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}Symbol("type");var a=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),l=e=>a(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?c:null:null,c=class extends Array{constructor(e){super(e),this.fill(0)}},u=class e{heap;length;static#e=!1;static create(t){let r=l(t);if(!r)return[];e.#e=!0;let n=new e(t,r);return e.#e=!1,n}constructor(t,r){if(!e.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(t),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},h=class e{#e;#t;#r;#n;#o;#i;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#s;#a;#l;#c;#u;#h;#f;#p;#d;#m;#g;#y;#b;#_;#v;#w;#S;static unsafeExposeInternals(e){return{starts:e.#b,ttls:e.#_,sizes:e.#y,keyMap:e.#l,keyList:e.#c,valList:e.#u,next:e.#h,prev:e.#f,get head(){return e.#p},get tail(){return e.#d},free:e.#m,isBackgroundFetch:t=>e.#E(t),backgroundFetch:(t,r,n,o)=>e.#A(t,r,n,o),moveToTail:t=>e.#I(t),indexes:t=>e.#P(t),rindexes:t=>e.#k(t),isStale:t=>e.#x(t)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#a}get size(){return this.#s}get fetchMethod(){return this.#o}get memoMethod(){return this.#i}get dispose(){return this.#r}get disposeAfter(){return this.#n}constructor(t){let{max:n=0,ttl:i,ttlResolution:s=1,ttlAutopurge:c,updateAgeOnGet:h,updateAgeOnHas:f,allowStale:p,dispose:d,disposeAfter:m,noDisposeOnSet:g,noUpdateTTL:y,maxSize:b=0,maxEntrySize:_=0,sizeCalculation:v,fetchMethod:w,memoMethod:S,noDeleteOnFetchRejection:E,noDeleteOnStaleGet:A,allowStaleOnFetchRejection:I,allowStaleOnFetchAbort:P,ignoreFetchAbort:k}=t;if(0!==n&&!a(n))throw new TypeError("max option must be a nonnegative integer");let x=n?l(n):Array;if(!x)throw new Error("invalid max value: "+n);if(this.#e=n,this.#t=b,this.maxEntrySize=_||this.#t,this.sizeCalculation=v,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw new TypeError("sizeCalculation set to non-function")}if(void 0!==S&&"function"!=typeof S)throw new TypeError("memoMethod must be a function if defined");if(this.#i=S,void 0!==w&&"function"!=typeof w)throw new TypeError("fetchMethod must be a function if specified");if(this.#o=w,this.#w=!!w,this.#l=new Map,this.#c=new Array(n).fill(void 0),this.#u=new Array(n).fill(void 0),this.#h=new x(n),this.#f=new x(n),this.#p=0,this.#d=0,this.#m=u.create(n),this.#s=0,this.#a=0,"function"==typeof d&&(this.#r=d),"function"==typeof m?(this.#n=m,this.#g=[]):(this.#n=void 0,this.#g=void 0),this.#v=!!this.#r,this.#S=!!this.#n,this.noDisposeOnSet=!!g,this.noUpdateTTL=!!y,this.noDeleteOnFetchRejection=!!E,this.allowStaleOnFetchRejection=!!I,this.allowStaleOnFetchAbort=!!P,this.ignoreFetchAbort=!!k,0!==this.maxEntrySize){if(0!==this.#t&&!a(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!a(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#O()}if(this.allowStale=!!p,this.noDeleteOnStaleGet=!!A,this.updateAgeOnGet=!!h,this.updateAgeOnHas=!!f,this.ttlResolution=a(s)||0===s?s:1,this.ttlAutopurge=!!c,this.ttl=i||0,this.ttl){if(!a(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#$()}if(0===this.#e&&0===this.ttl&&0===this.#t)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let t="LRU_CACHE_UNBOUNDED";(e=>!r.has(e))(t)&&(r.add(t),o("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",t,e))}}getRemainingTTL(e){return this.#l.has(e)?1/0:0}#$(){let e=new c(this.#e),r=new c(this.#e);this.#_=e,this.#b=r,this.#T=(n,o,i=t.now())=>{if(r[n]=0!==o?i:0,e[n]=o,0!==o&&this.ttlAutopurge){let e=setTimeout(()=>{this.#x(n)&&this.#C(this.#c[n],"expire")},o+1);e.unref&&e.unref()}},this.#j=n=>{r[n]=0!==e[n]?t.now():0},this.#R=(t,i)=>{if(e[i]){let s=e[i],a=r[i];if(!s||!a)return;t.ttl=s,t.start=a,t.now=n||o();let l=t.now-a;t.remainingTTL=s-l}};let n=0,o=()=>{let e=t.now();if(this.ttlResolution>0){n=e;let t=setTimeout(()=>n=0,this.ttlResolution);t.unref&&t.unref()}return e};this.getRemainingTTL=t=>{let i=this.#l.get(t);if(void 0===i)return 0;let s=e[i],a=r[i];return s&&a?s-((n||o())-a):1/0},this.#x=t=>{let i=r[t],s=e[t];return!!s&&!!i&&(n||o())-i>s}}#j=()=>{};#R=()=>{};#T=()=>{};#x=()=>!1;#O(){let e=new c(this.#e);this.#a=0,this.#y=e,this.#N=t=>{this.#a-=e[t],e[t]=0},this.#M=(e,t,r,n)=>{if(this.#E(t))return 0;if(!a(r)){if(!n)throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");if("function"!=typeof n)throw new TypeError("sizeCalculation must be a function");if(r=n(t,e),!a(r))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}return r},this.#B=(t,r,n)=>{if(e[t]=r,this.#t){let r=this.#t-e[t];for(;this.#a>r;)this.#L(!0)}this.#a+=e[t],n&&(n.entrySize=r,n.totalCalculatedSize=this.#a)}}#N=e=>{};#B=(e,t,r)=>{};#M=(e,t,r,n)=>{if(r||n)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#P({allowStale:e=this.allowStale}={}){if(this.#s)for(let t=this.#d;this.#U(t)&&((e||!this.#x(t))&&(yield t),t!==this.#p);)t=this.#f[t]}*#k({allowStale:e=this.allowStale}={}){if(this.#s)for(let t=this.#p;this.#U(t)&&((e||!this.#x(t))&&(yield t),t!==this.#d);)t=this.#h[t]}#U(e){return void 0!==e&&this.#l.get(this.#c[e])===e}*entries(){for(let e of this.#P())void 0!==this.#u[e]&&void 0!==this.#c[e]&&!this.#E(this.#u[e])&&(yield[this.#c[e],this.#u[e]])}*rentries(){for(let e of this.#k())void 0!==this.#u[e]&&void 0!==this.#c[e]&&!this.#E(this.#u[e])&&(yield[this.#c[e],this.#u[e]])}*keys(){for(let e of this.#P()){let t=this.#c[e];void 0!==t&&!this.#E(this.#u[e])&&(yield t)}}*rkeys(){for(let e of this.#k()){let t=this.#c[e];void 0!==t&&!this.#E(this.#u[e])&&(yield t)}}*values(){for(let e of this.#P())void 0!==this.#u[e]&&!this.#E(this.#u[e])&&(yield this.#u[e])}*rvalues(){for(let e of this.#k())void 0!==this.#u[e]&&!this.#E(this.#u[e])&&(yield this.#u[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(let r of this.#P()){let n=this.#u[r],o=this.#E(n)?n.__staleWhileFetching:n;if(void 0!==o&&e(o,this.#c[r],this))return this.get(this.#c[r],t)}}forEach(e,t=this){for(let r of this.#P()){let n=this.#u[r],o=this.#E(n)?n.__staleWhileFetching:n;void 0!==o&&e.call(t,o,this.#c[r],this)}}rforEach(e,t=this){for(let r of this.#k()){let n=this.#u[r],o=this.#E(n)?n.__staleWhileFetching:n;void 0!==o&&e.call(t,o,this.#c[r],this)}}purgeStale(){let e=!1;for(let t of this.#k({allowStale:!0}))this.#x(t)&&(this.#C(this.#c[t],"expire"),e=!0);return e}info(e){let r=this.#l.get(e);if(void 0===r)return;let n=this.#u[r],o=this.#E(n)?n.__staleWhileFetching:n;if(void 0===o)return;let i={value:o};if(this.#_&&this.#b){let e=this.#_[r],n=this.#b[r];if(e&&n){let r=e-(t.now()-n);i.ttl=r,i.start=Date.now()}}return this.#y&&(i.size=this.#y[r]),i}dump(){let e=[];for(let r of this.#P({allowStale:!0})){let n=this.#c[r],o=this.#u[r],i=this.#E(o)?o.__staleWhileFetching:o;if(void 0===i||void 0===n)continue;let s={value:i};if(this.#_&&this.#b){s.ttl=this.#_[r];let e=t.now()-this.#b[r];s.start=Math.floor(Date.now()-e)}this.#y&&(s.size=this.#y[r]),e.unshift([n,s])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let e=Date.now()-n.start;n.start=t.now()-e}this.set(r,n.value,n)}}set(e,t,r={}){if(void 0===t)return this.delete(e),this;let{ttl:n=this.ttl,start:o,noDisposeOnSet:i=this.noDisposeOnSet,sizeCalculation:s=this.sizeCalculation,status:a}=r,{noUpdateTTL:l=this.noUpdateTTL}=r,c=this.#M(e,t,r.size||0,s);if(this.maxEntrySize&&c>this.maxEntrySize)return a&&(a.set="miss",a.maxEntrySizeExceeded=!0),this.#C(e,"set"),this;let u=0===this.#s?void 0:this.#l.get(e);if(void 0===u)u=0===this.#s?this.#d:0!==this.#m.length?this.#m.pop():this.#s===this.#e?this.#L(!1):this.#s,this.#c[u]=e,this.#u[u]=t,this.#l.set(e,u),this.#h[this.#d]=u,this.#f[u]=this.#d,this.#d=u,this.#s++,this.#B(u,c,a),a&&(a.set="add"),l=!1;else{this.#I(u);let r=this.#u[u];if(t!==r){if(this.#w&&this.#E(r)){r.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:t}=r;void 0!==t&&!i&&(this.#v&&this.#r?.(t,e,"set"),this.#S&&this.#g?.push([t,e,"set"]))}else i||(this.#v&&this.#r?.(r,e,"set"),this.#S&&this.#g?.push([r,e,"set"]));if(this.#N(u),this.#B(u,c,a),this.#u[u]=t,a){a.set="replace";let e=r&&this.#E(r)?r.__staleWhileFetching:r;void 0!==e&&(a.oldValue=e)}}else a&&(a.set="update")}if(0!==n&&!this.#_&&this.#$(),this.#_&&(l||this.#T(u,n,o),a&&this.#R(a,u)),!i&&this.#S&&this.#g){let e,t=this.#g;for(;e=t?.shift();)this.#n?.(...e)}return this}pop(){try{for(;this.#s;){let e=this.#u[this.#p];if(this.#L(!0),this.#E(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(void 0!==e)return e}}finally{if(this.#S&&this.#g){let e,t=this.#g;for(;e=t?.shift();)this.#n?.(...e)}}}#L(e){let t=this.#p,r=this.#c[t],n=this.#u[t];return this.#w&&this.#E(n)?n.__abortController.abort(new Error("evicted")):(this.#v||this.#S)&&(this.#v&&this.#r?.(n,r,"evict"),this.#S&&this.#g?.push([n,r,"evict"])),this.#N(t),e&&(this.#c[t]=void 0,this.#u[t]=void 0,this.#m.push(t)),1===this.#s?(this.#p=this.#d=0,this.#m.length=0):this.#p=this.#h[t],this.#l.delete(r),this.#s--,t}has(e,t={}){let{updateAgeOnHas:r=this.updateAgeOnHas,status:n}=t,o=this.#l.get(e);if(void 0!==o){let e=this.#u[o];if(this.#E(e)&&void 0===e.__staleWhileFetching)return!1;if(!this.#x(o))return r&&this.#j(o),n&&(n.has="hit",this.#R(n,o)),!0;n&&(n.has="stale",this.#R(n,o))}else n&&(n.has="miss");return!1}peek(e,t={}){let{allowStale:r=this.allowStale}=t,n=this.#l.get(e);if(void 0===n||!r&&this.#x(n))return;let o=this.#u[n];return this.#E(o)?o.__staleWhileFetching:o}#A(e,t,r,n){let o=void 0===t?void 0:this.#u[t];if(this.#E(o))return o;let s=new i,{signal:a}=r;a?.addEventListener("abort",()=>s.abort(a.reason),{signal:s.signal});let l={signal:s.signal,options:r,context:n},c=(n,o=!1)=>{let{aborted:i}=s.signal,a=r.ignoreFetchAbort&&void 0!==n;if(r.status&&(i&&!o?(r.status.fetchAborted=!0,r.status.fetchError=s.signal.reason,a&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),i&&!a&&!o)return u(s.signal.reason);let c=h;return this.#u[t]===h&&(void 0===n?c.__staleWhileFetching?this.#u[t]=c.__staleWhileFetching:this.#C(e,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(e,n,l.options))),n},u=n=>{let{aborted:o}=s.signal,i=o&&r.allowStaleOnFetchAbort,a=i||r.allowStaleOnFetchRejection,l=a||r.noDeleteOnFetchRejection,c=h;if(this.#u[t]===h&&(l&&void 0!==c.__staleWhileFetching?i||(this.#u[t]=c.__staleWhileFetching):this.#C(e,"fetch")),a)return r.status&&void 0!==c.__staleWhileFetching&&(r.status.returnedStale=!0),c.__staleWhileFetching;if(c.__returned===c)throw n};r.status&&(r.status.fetchDispatched=!0);let h=new Promise((t,n)=>{let i=this.#o?.(e,o,l);i&&i instanceof Promise&&i.then(e=>t(void 0===e?void 0:e),n),s.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(t(void 0),r.allowStaleOnFetchAbort&&(t=e=>c(e,!0)))})}).then(c,e=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=e),u(e))),f=Object.assign(h,{__abortController:s,__staleWhileFetching:o,__returned:void 0});return void 0===t?(this.set(e,f,{...l.options,status:void 0}),t=this.#l.get(e)):this.#u[t]=f,f}#E(e){if(!this.#w)return!1;let t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof i}async fetch(e,t={}){let{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:i=this.ttl,noDisposeOnSet:s=this.noDisposeOnSet,size:a=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:c=this.noUpdateTTL,noDeleteOnFetchRejection:u=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:h=this.allowStaleOnFetchRejection,ignoreFetchAbort:f=this.ignoreFetchAbort,allowStaleOnFetchAbort:p=this.allowStaleOnFetchAbort,context:d,forceRefresh:m=!1,status:g,signal:y}=t;if(!this.#w)return g&&(g.fetch="get"),this.get(e,{allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:o,status:g});let b={allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:o,ttl:i,noDisposeOnSet:s,size:a,sizeCalculation:l,noUpdateTTL:c,noDeleteOnFetchRejection:u,allowStaleOnFetchRejection:h,allowStaleOnFetchAbort:p,ignoreFetchAbort:f,status:g,signal:y},_=this.#l.get(e);if(void 0===_){g&&(g.fetch="miss");let t=this.#A(e,_,b,d);return t.__returned=t}{let t=this.#u[_];if(this.#E(t)){let e=r&&void 0!==t.__staleWhileFetching;return g&&(g.fetch="inflight",e&&(g.returnedStale=!0)),e?t.__staleWhileFetching:t.__returned=t}let o=this.#x(_);if(!m&&!o)return g&&(g.fetch="hit"),this.#I(_),n&&this.#j(_),g&&this.#R(g,_),t;let i=this.#A(e,_,b,d),s=void 0!==i.__staleWhileFetching&&r;return g&&(g.fetch=o?"stale":"refresh",s&&o&&(g.returnedStale=!0)),s?i.__staleWhileFetching:i.__returned=i}}async forceFetch(e,t={}){let r=await this.fetch(e,t);if(void 0===r)throw new Error("fetch() returned undefined");return r}memo(e,t={}){let r=this.#i;if(!r)throw new Error("no memoMethod provided to constructor");let{context:n,forceRefresh:o,...i}=t,s=this.get(e,i);if(!o&&void 0!==s)return s;let a=r(e,s,{options:i,context:n});return this.set(e,a,i),a}get(e,t={}){let{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:i}=t,s=this.#l.get(e);if(void 0!==s){let t=this.#u[s],a=this.#E(t);return i&&this.#R(i,s),this.#x(s)?(i&&(i.get="stale"),a?(i&&r&&void 0!==t.__staleWhileFetching&&(i.returnedStale=!0),r?t.__staleWhileFetching:void 0):(o||this.#C(e,"expire"),i&&r&&(i.returnedStale=!0),r?t:void 0)):(i&&(i.get="hit"),a?t.__staleWhileFetching:(this.#I(s),n&&this.#j(s),t))}i&&(i.get="miss")}#D(e,t){this.#f[t]=e,this.#h[e]=t}#I(e){e!==this.#d&&(e===this.#p?this.#p=this.#h[e]:this.#D(this.#f[e],this.#h[e]),this.#D(this.#d,e),this.#d=e)}delete(e){return this.#C(e,"delete")}#C(e,t){let r=!1;if(0!==this.#s){let n=this.#l.get(e);if(void 0!==n)if(r=!0,1===this.#s)this.#F(t);else{this.#N(n);let r=this.#u[n];if(this.#E(r)?r.__abortController.abort(new Error("deleted")):(this.#v||this.#S)&&(this.#v&&this.#r?.(r,e,t),this.#S&&this.#g?.push([r,e,t])),this.#l.delete(e),this.#c[n]=void 0,this.#u[n]=void 0,n===this.#d)this.#d=this.#f[n];else if(n===this.#p)this.#p=this.#h[n];else{let e=this.#f[n];this.#h[e]=this.#h[n];let t=this.#h[n];this.#f[t]=this.#f[n]}this.#s--,this.#m.push(n)}}if(this.#S&&this.#g?.length){let e,t=this.#g;for(;e=t?.shift();)this.#n?.(...e)}return r}clear(){return this.#F("delete")}#F(e){for(let t of this.#k({allowStale:!0})){let r=this.#u[t];if(this.#E(r))r.__abortController.abort(new Error("deleted"));else{let n=this.#c[t];this.#v&&this.#r?.(r,n,e),this.#S&&this.#g?.push([r,n,e])}}if(this.#l.clear(),this.#u.fill(void 0),this.#c.fill(void 0),this.#_&&this.#b&&(this.#_.fill(0),this.#b.fill(0)),this.#y&&this.#y.fill(0),this.#p=0,this.#d=0,this.#m.length=0,this.#a=0,this.#s=0,this.#S&&this.#g){let e,t=this.#g;for(;e=t?.shift();)this.#n?.(...e)}}};e.LRUCache=h}),wr=h(e=>{d(),at(),He(),Object.defineProperty(e,"t",{value:!0}),e.ContainerIterator=e.Container=e.Base=void 0,e.ContainerIterator=class{constructor(e=0){this.iteratorType=e}equals(e){return this.o===e.o}};var t=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return 0===this.i}};e.Base=t,e.Container=class extends t{}}),Sr=h(e=>{d(),at(),He(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=wr(),r=class extends t.Base{constructor(e=[]){super(),this.S=[];let t=this;e.forEach(function(e){t.push(e)})}clear(){this.i=0,this.S=[]}push(e){return this.S.push(e),this.i+=1,this.i}pop(){if(0!==this.i)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}};e.default=r}),Er=h(e=>{d(),at(),He(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=wr(),r=class extends t.Base{constructor(e=[]){super(),this.j=0,this.q=[];let t=this;e.forEach(function(e){t.push(e)})}clear(){this.q=[],this.i=this.j=0}push(e){let t=this.q.length;if(this.j/t>.5&&this.j+this.i>=t&&t>4096){let t=this.i;for(let e=0;e<t;++e)this.q[e]=this.q[this.j+e];this.j=0,this.q[this.i]=e}else this.q[this.j+this.i]=e;return++this.i}pop(){if(0===this.i)return;let e=this.q[this.j++];return this.i-=1,e}front(){if(0!==this.i)return this.q[this.j]}};e.default=r}),Ar=h(e=>{d(),at(),He(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=wr(),r=class extends t.Base{constructor(e=[],t=function(e,t){return e>t?-1:e<t?1:0},r=!0){if(super(),this.v=t,Array.isArray(e))this.C=r?[...e]:e;else{this.C=[];let t=this;e.forEach(function(e){t.C.push(e)})}this.i=this.C.length;let n=this.i>>1;for(let e=this.i-1>>1;e>=0;--e)this.k(e,n)}m(e){let t=this.C[e];for(;e>0;){let r=e-1>>1,n=this.C[r];if(this.v(n,t)<=0)break;this.C[e]=n,e=r}this.C[e]=t}k(e,t){let r=this.C[e];for(;e<t;){let t=e<<1|1,n=t+1,o=this.C[t];if(n<this.i&&this.v(o,this.C[n])>0&&(t=n,o=this.C[n]),this.v(o,r)>=0)break;this.C[e]=o,e=t}this.C[e]=r}clear(){this.i=0,this.C.length=0}push(e){this.C.push(e),this.m(this.i),this.i+=1}pop(){if(0===this.i)return;let e=this.C[0],t=this.C.pop();return this.i-=1,this.i&&(this.C[0]=t,this.k(0,this.i>>1)),e}top(){return this.C[0]}find(e){return this.C.indexOf(e)>=0}remove(e){let t=this.C.indexOf(e);return!(t<0||(0===t?this.pop():t===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(t,1,this.C.pop()),this.i-=1,this.m(t),this.k(t,this.i>>1)),0))}updateItem(e){let t=this.C.indexOf(e);return!(t<0||(this.m(t),this.k(t,this.i>>1),0))}toArray(){return[...this.C]}};e.default=r}),Ir=h(e=>{d(),at(),He(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=wr(),r=class extends t.Container{};e.default=r}),Pr=h(e=>{d(),at(),He(),Object.defineProperty(e,"t",{value:!0}),e.throwIteratorAccessError=function(){throw new RangeError("Iterator access denied!")}}),kr=h(e=>{d(),at(),He(),Object.defineProperty(e,"t",{value:!0}),e.RandomIterator=void 0;var t=wr(),r=Pr(),n=class extends t.ContainerIterator{constructor(e,t){super(t),this.o=e,0===this.iteratorType?(this.pre=function(){return 0===this.o&&(0,r.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,r.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,r.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return-1===this.o&&(0,r.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(e){this.container.setElementByPos(this.o,e)}};e.RandomIterator=n}),xr=h(e=>{d(),at(),He(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t,r=(t=Ir())&&t.t?t:{default:t},n=kr(),o=class e extends n.RandomIterator{constructor(e,t,r){super(e,r),this.container=t}copy(){return new e(this.o,this.container,this.iteratorType)}},i=class extends r.default{constructor(e=[],t=!0){if(super(),Array.isArray(e))this.J=t?[...e]:e,this.i=e.length;else{this.J=[];let t=this;e.forEach(function(e){t.pushBack(e)})}}clear(){this.i=0,this.J.length=0}begin(){return new o(0,this)}end(){return new o(this.i,this)}rBegin(){return new o(this.i-1,this,1)}rEnd(){return new o(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;return this.J[e]}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;return this.J.splice(e,1),this.i-=1,this.i}eraseElementByValue(e){let t=0;for(let r=0;r<this.i;++r)this.J[r]!==e&&(this.J[t++]=this.J[r]);return this.i=this.J.length=t,this.i}eraseElementByIterator(e){let t=e.o;return e=e.next(),this.eraseElementByPos(t),e}pushBack(e){return this.J.push(e),this.i+=1,this.i}popBack(){if(0!==this.i)return this.i-=1,this.J.pop()}setElementByPos(e,t){if(e<0||e>this.i-1)throw new RangeError;this.J[e]=t}insert(e,t,r=1){if(e<0||e>this.i)throw new RangeError;return this.J.splice(e,0,...new Array(r).fill(t)),this.i+=r,this.i}find(e){for(let t=0;t<this.i;++t)if(this.J[t]===e)return new o(t,this);return this.end()}reverse(){this.J.reverse()}unique(){let e=1;for(let t=1;t<this.i;++t)this.J[t]!==this.J[t-1]&&(this.J[e++]=this.J[t]);return this.i=this.J.length=e,this.i}sort(e){this.J.sort(e)}forEach(e){for(let t=0;t<this.i;++t)e(this.J[t],t,this)}[Symbol.iterator](){return function*(){yield*this.J}.bind(this)()}};e.default=i}),Or=h(e=>{d(),at(),He(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t,r=(t=Ir())&&t.t?t:{default:t},n=wr(),o=Pr(),i=class e extends n.ContainerIterator{constructor(e,t,r,n){super(n),this.o=e,this.h=t,this.container=r,0===this.iteratorType?(this.pre=function(){return this.o.L===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o.l}set pointer(e){this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o.l=e}copy(){return new e(this.o,this.h,this.container,this.iteratorType)}},s=class extends r.default{constructor(e=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let t=this;e.forEach(function(e){t.pushBack(e)})}V(e){let{L:t,B:r}=e;t.B=r,r.L=t,e===this.p&&(this.p=r),e===this._&&(this._=t),this.i-=1}G(e,t){let r=t.B,n={l:e,L:t,B:r};t.B=n,r.L=n,t===this.h&&(this.p=n),r===this.h&&(this._=n),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new i(this.p,this.h,this)}end(){return new i(this.h,this.h,this)}rBegin(){return new i(this._,this.h,this,1)}rEnd(){return new i(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let t=this.p;for(;e--;)t=t.B;return t.l}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let t=this.p;for(;e--;)t=t.B;return this.V(t),this.i}eraseElementByValue(e){let t=this.p;for(;t!==this.h;)t.l===e&&this.V(t),t=t.B;return this.i}eraseElementByIterator(e){let t=e.o;return t===this.h&&(0,o.throwIteratorAccessError)(),e=e.next(),this.V(t),e}pushBack(e){return this.G(e,this._),this.i}popBack(){if(0===this.i)return;let e=this._.l;return this.V(this._),e}pushFront(e){return this.G(e,this.h),this.i}popFront(){if(0===this.i)return;let e=this.p.l;return this.V(this.p),e}setElementByPos(e,t){if(e<0||e>this.i-1)throw new RangeError;let r=this.p;for(;e--;)r=r.B;r.l=t}insert(e,t,r=1){if(e<0||e>this.i)throw new RangeError;if(r<=0)return this.i;if(0===e)for(;r--;)this.pushFront(t);else if(e===this.i)for(;r--;)this.pushBack(t);else{let n=this.p;for(let t=1;t<e;++t)n=n.B;let o=n.B;for(this.i+=r;r--;)n.B={l:t,L:n},n.B.L=n,n=n.B;n.B=o,o.L=n}return this.i}find(e){let t=this.p;for(;t!==this.h;){if(t.l===e)return new i(t,this.h,this);t=t.B}return this.end()}reverse(){if(this.i<=1)return;let e=this.p,t=this._,r=0;for(;r<<1<this.i;){let n=e.l;e.l=t.l,t.l=n,e=e.B,t=t.L,r+=1}}unique(){if(this.i<=1)return this.i;let e=this.p;for(;e!==this.h;){let t=e;for(;t.B!==this.h&&t.l===t.B.l;)t=t.B,this.i-=1;e.B=t.B,e.B.L=e,e=e.B}return this.i}sort(e){if(this.i<=1)return;let t=[];this.forEach(function(e){t.push(e)}),t.sort(e);let r=this.p;t.forEach(function(e){r.l=e,r=r.B})}merge(e){let t=this;if(0===this.i)e.forEach(function(e){t.pushBack(e)});else{let r=this.p;e.forEach(function(e){for(;r!==t.h&&r.l<=e;)r=r.B;t.G(e,r.L)})}return this.i}forEach(e){let t=this.p,r=0;for(;t!==this.h;)e(t.l,r++,this),t=t.B}[Symbol.iterator](){return function*(){if(0===this.i)return;let e=this.p;for(;e!==this.h;)yield e.l,e=e.B}.bind(this)()}};e.default=s}),$r=h(e=>{d(),at(),He(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t,r=(t=Ir())&&t.t?t:{default:t},n=kr(),o=class e extends n.RandomIterator{constructor(e,t,r){super(e,r),this.container=t}copy(){return new e(this.o,this.container,this.iteratorType)}},i=class extends r.default{constructor(e=[],t=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let r=(()=>{if("number"==typeof e.length)return e.length;if("number"==typeof e.size)return e.size;if("function"==typeof e.size)return e.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=t,this.P=Math.max(Math.ceil(r/this.F),1);for(let e=0;e<this.P;++e)this.A.push(new Array(this.F));let n=Math.ceil(r/this.F);this.j=this.R=(this.P>>1)-(n>>1),this.D=this.N=this.F-r%this.F>>1;let o=this;e.forEach(function(e){o.pushBack(e)})}T(){let e=[],t=Math.max(this.P>>1,1);for(let r=0;r<t;++r)e[r]=new Array(this.F);for(let t=this.j;t<this.P;++t)e[e.length]=this.A[t];for(let t=0;t<this.R;++t)e[e.length]=this.A[t];e[e.length]=[...this.A[this.R]],this.j=t,this.R=e.length-1;for(let r=0;r<t;++r)e[e.length]=new Array(this.F);this.A=e,this.P=e.length}O(e){let t=this.D+e+1,r=t%this.F,n=r-1,o=this.j+(t-r)/this.F;return 0===r&&(o-=1),o%=this.P,n<0&&(n+=this.F),{curNodeBucketIndex:o,curNodePointerIndex:n}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new o(0,this)}end(){return new o(this.i,this)}rBegin(){return new o(this.i-1,this,1)}rEnd(){return new o(-1,this,1)}front(){if(0!==this.i)return this.A[this.j][this.D]}back(){if(0!==this.i)return this.A[this.R][this.N]}pushBack(e){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=e,this.i}popBack(){if(0===this.i)return;let e=this.A[this.R][this.N];return 1!==this.i&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,e}pushFront(e){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=e,this.i}popFront(){if(0===this.i)return;let e=this.A[this.j][this.D];return 1!==this.i&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,e}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let{curNodeBucketIndex:t,curNodePointerIndex:r}=this.O(e);return this.A[t][r]}setElementByPos(e,t){if(e<0||e>this.i-1)throw new RangeError;let{curNodeBucketIndex:r,curNodePointerIndex:n}=this.O(e);this.A[r][n]=t}insert(e,t,r=1){if(e<0||e>this.i)throw new RangeError;if(0===e)for(;r--;)this.pushFront(t);else if(e===this.i)for(;r--;)this.pushBack(t);else{let n=[];for(let t=e;t<this.i;++t)n.push(this.getElementByPos(t));this.cut(e-1);for(let e=0;e<r;++e)this.pushBack(t);for(let e=0;e<n.length;++e)this.pushBack(n[e])}return this.i}cut(e){if(e<0)return this.clear(),0;let{curNodeBucketIndex:t,curNodePointerIndex:r}=this.O(e);return this.R=t,this.N=r,this.i=e+1,this.i}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;if(0===e)this.popFront();else if(e===this.i-1)this.popBack();else{let t=[];for(let r=e+1;r<this.i;++r)t.push(this.getElementByPos(r));this.cut(e),this.popBack();let r=this;t.forEach(function(e){r.pushBack(e)})}return this.i}eraseElementByValue(e){if(0===this.i)return 0;let t=[];for(let r=0;r<this.i;++r){let n=this.getElementByPos(r);n!==e&&t.push(n)}let r=t.length;for(let e=0;e<r;++e)this.setElementByPos(e,t[e]);return this.cut(r-1)}eraseElementByIterator(e){let t=e.o;return this.eraseElementByPos(t),e.next()}find(e){for(let t=0;t<this.i;++t)if(this.getElementByPos(t)===e)return new o(t,this);return this.end()}reverse(){let e=0,t=this.i-1;for(;e<t;){let r=this.getElementByPos(e);this.setElementByPos(e,this.getElementByPos(t)),this.setElementByPos(t,r),e+=1,t-=1}}unique(){if(this.i<=1)return this.i;let e=1,t=this.getElementByPos(0);for(let r=1;r<this.i;++r){let n=this.getElementByPos(r);n!==t&&(t=n,this.setElementByPos(e++,n))}for(;this.i>e;)this.popBack();return this.i}sort(e){let t=[];for(let e=0;e<this.i;++e)t.push(this.getElementByPos(e));t.sort(e);for(let e=0;e<this.i;++e)this.setElementByPos(e,t[e])}shrinkToFit(){if(0===this.i)return;let e=[];this.forEach(function(t){e.push(t)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let e=0;e<this.P;++e)this.A.push(new Array(this.F));for(let t=0;t<e.length;++t)this.pushBack(e[t])}forEach(e){for(let t=0;t<this.i;++t)e(this.getElementByPos(t),t,this)}[Symbol.iterator](){return function*(){for(let e=0;e<this.i;++e)yield this.getElementByPos(e)}.bind(this)()}};e.default=i}),Tr=h(e=>{d(),at(),He(),Object.defineProperty(e,"t",{value:!0}),e.TreeNodeEnableIndex=e.TreeNode=void 0;var t=class{constructor(e,t){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=e,this.l=t}L(){let e=this;if(1===e.ee&&e.tt.tt===e)e=e.W;else if(e.U)for(e=e.U;e.W;)e=e.W;else{let t=e.tt;for(;t.U===e;)e=t,t=e.tt;e=t}return e}B(){let e=this;if(e.W){for(e=e.W;e.U;)e=e.U;return e}{let t=e.tt;for(;t.W===e;)e=t,t=e.tt;return e.W!==t?t:e}}te(){let e=this.tt,t=this.W,r=t.U;return e.tt===this?e.tt=t:e.U===this?e.U=t:e.W=t,t.tt=e,t.U=this,this.tt=t,this.W=r,r&&(r.tt=this),t}se(){let e=this.tt,t=this.U,r=t.W;return e.tt===this?e.tt=t:e.U===this?e.U=t:e.W=t,t.tt=e,t.W=this,this.tt=t,this.U=r,r&&(r.tt=this),t}};e.TreeNode=t,e.TreeNodeEnableIndex=class extends t{constructor(){super(...arguments),this.rt=1}te(){let e=super.te();return this.ie(),e.ie(),e}se(){let e=super.se();return this.ie(),e.ie(),e}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}}}),Cr=h(e=>{d(),at(),He(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=Tr(),r=wr(),n=Pr(),o=class extends r.Container{constructor(e=function(e,t){return e<t?-1:e>t?1:0},r=!1){super(),this.Y=void 0,this.v=e,r?(this.re=t.TreeNodeEnableIndex,this.M=function(e,t,r){let n=this.ne(e,t,r);if(n){let e=n.tt;for(;e!==this.h;)e.rt+=1,e=e.tt;let t=this.he(n);if(t){let{parentNode:e,grandParent:r,curNode:n}=t;e.ie(),r.ie(),n.ie()}}return this.i},this.V=function(e){let t=this.fe(e);for(;t!==this.h;)t.rt-=1,t=t.tt}):(this.re=t.TreeNode,this.M=function(e,t,r){let n=this.ne(e,t,r);return n&&this.he(n),this.i},this.V=this.fe),this.h=new this.re}X(e,t){let r=this.h;for(;e;){let n=this.v(e.u,t);if(n<0)e=e.W;else{if(!(n>0))return e;r=e,e=e.U}}return r}Z(e,t){let r=this.h;for(;e;)this.v(e.u,t)<=0?e=e.W:(r=e,e=e.U);return r}$(e,t){let r=this.h;for(;e;){let n=this.v(e.u,t);if(n<0)r=e,e=e.W;else{if(!(n>0))return e;e=e.U}}return r}rr(e,t){let r=this.h;for(;e;)this.v(e.u,t)<0?(r=e,e=e.W):e=e.U;return r}ue(e){for(;;){let t=e.tt;if(t===this.h)return;if(1===e.ee)return void(e.ee=0);if(e===t.U){let r=t.W;if(1===r.ee)r.ee=0,t.ee=1,t===this.Y?this.Y=t.te():t.te();else{if(r.W&&1===r.W.ee)return r.ee=t.ee,t.ee=0,r.W.ee=0,void(t===this.Y?this.Y=t.te():t.te());r.U&&1===r.U.ee?(r.ee=1,r.U.ee=0,r.se()):(r.ee=1,e=t)}}else{let r=t.U;if(1===r.ee)r.ee=0,t.ee=1,t===this.Y?this.Y=t.se():t.se();else{if(r.U&&1===r.U.ee)return r.ee=t.ee,t.ee=0,r.U.ee=0,void(t===this.Y?this.Y=t.se():t.se());r.W&&1===r.W.ee?(r.ee=1,r.W.ee=0,r.te()):(r.ee=1,e=t)}}}}fe(e){if(1===this.i)return this.clear(),this.h;let t=e;for(;t.U||t.W;){if(t.W)for(t=t.W;t.U;)t=t.U;else t=t.U;[e.u,t.u]=[t.u,e.u],[e.l,t.l]=[t.l,e.l],e=t}this.h.U===t?this.h.U=t.tt:this.h.W===t&&(this.h.W=t.tt),this.ue(t);let r=t.tt;return t===r.U?r.U=void 0:r.W=void 0,this.i-=1,this.Y.ee=0,r}oe(e,t){return void 0!==e&&(!(!this.oe(e.U,t)&&!t(e))||this.oe(e.W,t))}he(e){for(;;){let t=e.tt;if(0===t.ee)return;let r=t.tt;if(t===r.U){let n=r.W;if(n&&1===n.ee){if(n.ee=t.ee=0,r===this.Y)return;r.ee=1,e=r;continue}if(e===t.W){if(e.ee=0,e.U&&(e.U.tt=t),e.W&&(e.W.tt=r),t.W=e.U,r.U=e.W,e.U=t,e.W=r,r===this.Y)this.Y=e,this.h.tt=e;else{let t=r.tt;t.U===r?t.U=e:t.W=e}return e.tt=r.tt,t.tt=e,r.tt=e,r.ee=1,{parentNode:t,grandParent:r,curNode:e}}t.ee=0,r===this.Y?this.Y=r.se():r.se(),r.ee=1}else{let n=r.U;if(n&&1===n.ee){if(n.ee=t.ee=0,r===this.Y)return;r.ee=1,e=r;continue}if(e===t.U){if(e.ee=0,e.U&&(e.U.tt=r),e.W&&(e.W.tt=t),r.W=e.U,t.U=e.W,e.U=r,e.W=t,r===this.Y)this.Y=e,this.h.tt=e;else{let t=r.tt;t.U===r?t.U=e:t.W=e}return e.tt=r.tt,t.tt=e,r.tt=e,r.ee=1,{parentNode:t,grandParent:r,curNode:e}}t.ee=0,r===this.Y?this.Y=r.te():r.te(),r.ee=1}return}}ne(e,t,r){if(void 0===this.Y)return this.i+=1,this.Y=new this.re(e,t),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,void(this.h.W=this.Y);let n,o=this.h.U,i=this.v(o.u,e);if(0!==i){if(i>0)o.U=new this.re(e,t),o.U.tt=o,n=o.U,this.h.U=n;else{let o=this.h.W,i=this.v(o.u,e);if(0===i)return void(o.l=t);if(i<0)o.W=new this.re(e,t),o.W.tt=o,n=o.W,this.h.W=n;else{if(void 0!==r){let o=r.o;if(o!==this.h){let r=this.v(o.u,e);if(0===r)return void(o.l=t);if(r>0){let r=o.L(),i=this.v(r.u,e);if(0===i)return void(r.l=t);i<0&&(n=new this.re(e,t),void 0===r.W?(r.W=n,n.tt=r):(o.U=n,n.tt=o))}}}if(void 0===n)for(n=this.Y;;){let r=this.v(n.u,e);if(r>0){if(void 0===n.U){n.U=new this.re(e,t),n.U.tt=n,n=n.U;break}n=n.U}else{if(!(r<0))return void(n.l=t);if(void 0===n.W){n.W=new this.re(e,t),n.W.tt=n,n=n.W;break}n=n.W}}}}return this.i+=1,n}o.l=t}I(e,t){for(;e;){let r=this.v(e.u,t);if(r<0)e=e.W;else{if(!(r>0))return e;e=e.U}}return e||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(e,t){let r=e.o;if(r===this.h&&(0,n.throwIteratorAccessError)(),1===this.i)return r.u=t,!0;if(r===this.h.U)return this.v(r.B().u,t)>0&&(r.u=t,!0);if(r===this.h.W)return this.v(r.L().u,t)<0&&(r.u=t,!0);let o=r.L().u;if(this.v(o,t)>=0)return!1;let i=r.B().u;return!(this.v(i,t)<=0||(r.u=t,0))}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let t=0,r=this;return this.oe(this.Y,function(n){return e===t?(r.V(n),!0):(t+=1,!1)}),this.i}eraseElementByKey(e){if(0===this.i)return!1;let t=this.I(this.Y,e);return t!==this.h&&(this.V(t),!0)}eraseElementByIterator(e){let t=e.o;t===this.h&&(0,n.throwIteratorAccessError)();let r=void 0===t.W;return 0===e.iteratorType?r&&e.next():(!r||void 0===t.U)&&e.next(),this.V(t),e}forEach(e){let t=0;for(let r of this)e(r,t++,this)}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let t,r=0;for(let n of this){if(r===e){t=n;break}r+=1}return t}getHeight(){if(0===this.i)return 0;let e=function(t){return t?Math.max(e(t.U),e(t.W))+1:0};return e(this.Y)}};e.default=o}),jr=h(e=>{d(),at(),He(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=wr(),r=Pr(),n=class extends t.ContainerIterator{constructor(e,t,n){super(n),this.o=e,this.h=t,0===this.iteratorType?(this.pre=function(){return this.o===this.h.U&&(0,r.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,r.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,r.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,r.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let e=this.o,t=this.h.tt;if(e===this.h)return t?t.rt-1:0;let r=0;for(e.U&&(r+=e.U.rt);e!==t;){let t=e.tt;e===t.W&&(r+=1,t.U&&(r+=t.U.rt)),e=t}return r}};e.default=n}),Rr=h(e=>{d(),at(),He(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=o(Cr()),r=o(jr()),n=Pr();function o(e){return e&&e.t?e:{default:e}}var i=class e extends r.default{constructor(e,t,r,n){super(e,t,n),this.container=r}get pointer(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.u}copy(){return new e(this.o,this.h,this.container,this.iteratorType)}},s=class extends t.default{constructor(e=[],t,r){super(t,r);let n=this;e.forEach(function(e){n.insert(e)})}*K(e){void 0!==e&&(yield*this.K(e.U),yield e.u,yield*this.K(e.W))}begin(){return new i(this.h.U||this.h,this.h,this)}end(){return new i(this.h,this.h,this)}rBegin(){return new i(this.h.W||this.h,this.h,this,1)}rEnd(){return new i(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(e,t){return this.M(e,void 0,t)}find(e){let t=this.I(this.Y,e);return new i(t,this.h,this)}lowerBound(e){let t=this.X(this.Y,e);return new i(t,this.h,this)}upperBound(e){let t=this.Z(this.Y,e);return new i(t,this.h,this)}reverseLowerBound(e){let t=this.$(this.Y,e);return new i(t,this.h,this)}reverseUpperBound(e){let t=this.rr(this.Y,e);return new i(t,this.h,this)}union(e){let t=this;return e.forEach(function(e){t.insert(e)}),this.i}[Symbol.iterator](){return this.K(this.Y)}};e.default=s}),Nr=h(e=>{d(),at(),He(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=o(Cr()),r=o(jr()),n=Pr();function o(e){return e&&e.t?e:{default:e}}var i=class e extends r.default{constructor(e,t,r,n){super(e,t,n),this.container=r}get pointer(){this.o===this.h&&(0,n.throwIteratorAccessError)();let e=this;return new Proxy([],{get:(t,r)=>"0"===r?e.o.u:"1"===r?e.o.l:void 0,set(t,r,n){if("1"!==r)throw new TypeError("props must be 1");return e.o.l=n,!0}})}copy(){return new e(this.o,this.h,this.container,this.iteratorType)}},s=class extends t.default{constructor(e=[],t,r){super(t,r);let n=this;e.forEach(function(e){n.setElement(e[0],e[1])})}*K(e){void 0!==e&&(yield*this.K(e.U),yield[e.u,e.l],yield*this.K(e.W))}begin(){return new i(this.h.U||this.h,this.h,this)}end(){return new i(this.h,this.h,this)}rBegin(){return new i(this.h.W||this.h,this.h,this,1)}rEnd(){return new i(this.h,this.h,this,1)}front(){if(0===this.i)return;let e=this.h.U;return[e.u,e.l]}back(){if(0===this.i)return;let e=this.h.W;return[e.u,e.l]}lowerBound(e){let t=this.X(this.Y,e);return new i(t,this.h,this)}upperBound(e){let t=this.Z(this.Y,e);return new i(t,this.h,this)}reverseLowerBound(e){let t=this.$(this.Y,e);return new i(t,this.h,this)}reverseUpperBound(e){let t=this.rr(this.Y,e);return new i(t,this.h,this)}setElement(e,t,r){return this.M(e,t,r)}find(e){let t=this.I(this.Y,e);return new i(t,this.h,this)}getElementByKey(e){return this.I(this.Y,e).l}union(e){let t=this;return e.forEach(function(e){t.setElement(e[0],e[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}};e.default=s}),Mr=h(e=>{d(),at(),He(),Object.defineProperty(e,"t",{value:!0}),e.default=function(e){let t=typeof e;return"object"===t&&null!==e||"function"===t}}),Br=h(e=>{d(),at(),He(),Object.defineProperty(e,"t",{value:!0}),e.HashContainerIterator=e.HashContainer=void 0;var t,r=wr(),n=(t=Mr())&&t.t?t:{default:t},o=Pr(),i=class extends r.ContainerIterator{constructor(e,t,r){super(r),this.o=e,this.h=t,0===this.iteratorType?(this.pre=function(){return this.o.L===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,o.throwIteratorAccessError)(),this.o=this.o.L,this})}};e.HashContainerIterator=i;var s=class extends r.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(e){let{L:t,B:r}=e;t.B=r,r.L=t,e===this.p&&(this.p=r),e===this._&&(this._=t),this.i-=1}M(e,t,r){let o;if(void 0===r&&(r=(0,n.default)(e)),r){let r=e[this.HASH_TAG];if(void 0!==r)return this.H[r].l=t,this.i;Object.defineProperty(e,this.HASH_TAG,{value:this.H.length,configurable:!0}),o={u:e,l:t,L:this._,B:this.h},this.H.push(o)}else{let r=this.g[e];if(r)return r.l=t,this.i;o={u:e,l:t,L:this._,B:this.h},this.g[e]=o}return 0===this.i?(this.p=o,this.h.B=o):this._.B=o,this._=o,this.h.L=o,++this.i}I(e,t){if(void 0===t&&(t=(0,n.default)(e)),t){let t=e[this.HASH_TAG];return void 0===t?this.h:this.H[t]}return this.g[e]||this.h}clear(){let e=this.HASH_TAG;this.H.forEach(function(t){delete t.u[e]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(e,t){let r;if(void 0===t&&(t=(0,n.default)(e)),t){let t=e[this.HASH_TAG];if(void 0===t)return!1;delete e[this.HASH_TAG],r=this.H[t],delete this.H[t]}else{if(r=this.g[e],void 0===r)return!1;delete this.g[e]}return this.V(r),!0}eraseElementByIterator(e){let t=e.o;return t===this.h&&(0,o.throwIteratorAccessError)(),this.V(t),e.next()}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let t=this.p;for(;e--;)t=t.B;return this.V(t),this.i}};e.HashContainer=s}),Lr=h(e=>{d(),at(),He(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=Br(),r=Pr(),n=class e extends t.HashContainerIterator{constructor(e,t,r,n){super(e,t,n),this.container=r}get pointer(){return this.o===this.h&&(0,r.throwIteratorAccessError)(),this.o.u}copy(){return new e(this.o,this.h,this.container,this.iteratorType)}},o=class extends t.HashContainer{constructor(e=[]){super();let t=this;e.forEach(function(e){t.insert(e)})}begin(){return new n(this.p,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this._,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(e,t){return this.M(e,void 0,t)}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let t=this.p;for(;e--;)t=t.B;return t.u}find(e,t){let r=this.I(e,t);return new n(r,this.h,this)}forEach(e){let t=0,r=this.p;for(;r!==this.h;)e(r.u,t++,this),r=r.B}[Symbol.iterator](){return function*(){let e=this.p;for(;e!==this.h;)yield e.u,e=e.B}.bind(this)()}};e.default=o}),Ur=h(e=>{d(),at(),He(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t,r=Br(),n=(t=Mr())&&t.t?t:{default:t},o=Pr(),i=class e extends r.HashContainerIterator{constructor(e,t,r,n){super(e,t,n),this.container=r}get pointer(){this.o===this.h&&(0,o.throwIteratorAccessError)();let e=this;return new Proxy([],{get:(t,r)=>"0"===r?e.o.u:"1"===r?e.o.l:void 0,set(t,r,n){if("1"!==r)throw new TypeError("props must be 1");return e.o.l=n,!0}})}copy(){return new e(this.o,this.h,this.container,this.iteratorType)}},s=class extends r.HashContainer{constructor(e=[]){super();let t=this;e.forEach(function(e){t.setElement(e[0],e[1])})}begin(){return new i(this.p,this.h,this)}end(){return new i(this.h,this.h,this)}rBegin(){return new i(this._,this.h,this,1)}rEnd(){return new i(this.h,this.h,this,1)}front(){if(0!==this.i)return[this.p.u,this.p.l]}back(){if(0!==this.i)return[this._.u,this._.l]}setElement(e,t,r){return this.M(e,t,r)}getElementByKey(e,t){if(void 0===t&&(t=(0,n.default)(e)),t){let t=e[this.HASH_TAG];return void 0!==t?this.H[t].l:void 0}let r=this.g[e];return r?r.l:void 0}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let t=this.p;for(;e--;)t=t.B;return[t.u,t.l]}find(e,t){let r=this.I(e,t);return new i(r,this.h,this)}forEach(e){let t=0,r=this.p;for(;r!==this.h;)e([r.u,r.l],t++,this),r=r.B}[Symbol.iterator](){return function*(){let e=this.p;for(;e!==this.h;)yield[e.u,e.l],e=e.B}.bind(this)()}};e.default=s}),Dr=h(e=>{d(),at(),He(),Object.defineProperty(e,"t",{value:!0}),Object.defineProperty(e,"Deque",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"HashMap",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"HashSet",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"LinkList",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"OrderedMap",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"OrderedSet",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"PriorityQueue",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"Queue",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"Stack",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"Vector",{enumerable:!0,get:function(){return o.default}});var t=h(Sr()),r=h(Er()),n=h(Ar()),o=h(xr()),i=h(Or()),s=h($r()),a=h(Rr()),l=h(Nr()),c=h(Lr()),u=h(Ur());function h(e){return e&&e.t?e:{default:e}}}),Fr=h((e,t)=>{d(),at(),He();var r=Dr().OrderedSet,n=or()("number-allocator:trace"),o=or()("number-allocator:error");function i(e,t){this.low=e,this.high=t}function s(e,t){if(!(this instanceof s))return new s(e,t);this.min=e,this.max=t,this.ss=new r([],(e,t)=>e.compare(t)),n("Create"),this.clear()}i.prototype.equals=function(e){return this.low===e.low&&this.high===e.high},i.prototype.compare=function(e){return this.low<e.low&&this.high<e.low?-1:e.low<this.low&&e.high<this.low?1:0},s.prototype.firstVacant=function(){return 0===this.ss.size()?null:this.ss.front().low},s.prototype.alloc=function(){if(0===this.ss.size())return n("alloc():empty"),null;let e=this.ss.begin(),t=e.pointer.low,r=e.pointer.high,o=t;return o+1<=r?this.ss.updateKeyByIterator(e,new i(t+1,r)):this.ss.eraseElementByPos(0),n("alloc():"+o),o},s.prototype.use=function(e){let t=new i(e,e),r=this.ss.lowerBound(t);if(!r.equals(this.ss.end())){let o=r.pointer.low,s=r.pointer.high;return r.pointer.equals(t)?(this.ss.eraseElementByIterator(r),n("use():"+e),!0):!(o>e||(o===e?(this.ss.updateKeyByIterator(r,new i(o+1,s)),n("use():"+e),0):s===e?(this.ss.updateKeyByIterator(r,new i(o,s-1)),n("use():"+e),0):(this.ss.updateKeyByIterator(r,new i(e+1,s)),this.ss.insert(new i(o,e-1)),n("use():"+e),0)))}return n("use():failed"),!1},s.prototype.free=function(e){if(e<this.min||e>this.max)return void o("free():"+e+" is out of range");let t=new i(e,e),r=this.ss.upperBound(t);if(r.equals(this.ss.end())){if(r.equals(this.ss.begin()))return void this.ss.insert(t);r.pre();let n=r.pointer.high;r.pointer.high+1===e?this.ss.updateKeyByIterator(r,new i(n,e)):this.ss.insert(t)}else if(r.equals(this.ss.begin()))if(e+1===r.pointer.low){let t=r.pointer.high;this.ss.updateKeyByIterator(r,new i(e,t))}else this.ss.insert(t);else{let n=r.pointer.low,o=r.pointer.high;r.pre();let s=r.pointer.low;r.pointer.high+1===e?e+1===n?(this.ss.eraseElementByIterator(r),this.ss.updateKeyByIterator(r,new i(s,o))):this.ss.updateKeyByIterator(r,new i(s,e)):e+1===n?(this.ss.eraseElementByIterator(r.next()),this.ss.insert(new i(e,o))):this.ss.insert(t)}n("free():"+e)},s.prototype.clear=function(){n("clear()"),this.ss.clear(),this.ss.insert(new i(this.min,this.max))},s.prototype.intervalCount=function(){return this.ss.size()},s.prototype.dump=function(){console.log("length:"+this.ss.size());for(let e of this.ss)console.log(e)},t.exports=s}),Wr=h((e,t)=>{d(),at(),He();var r=Fr();t.exports.NumberAllocator=r}),qr=h(e=>{d(),at(),He(),Object.defineProperty(e,"__esModule",{value:!0});var t=vr(),r=Wr();e.default=class{aliasToTopic;topicToAlias;max;numberAllocator;length;constructor(e){e>0&&(this.aliasToTopic=new t.LRUCache({max:e}),this.topicToAlias={},this.numberAllocator=new r.NumberAllocator(1,e),this.max=e,this.length=0)}put(e,t){if(0===t||t>this.max)return!1;let r=this.aliasToTopic.get(t);return r&&delete this.topicToAlias[r],this.aliasToTopic.set(t,e),this.topicToAlias[e]=t,this.numberAllocator.use(t),this.length=this.aliasToTopic.size,!0}getTopicByAlias(e){return this.aliasToTopic.get(e)}getAliasByTopic(e){let t=this.topicToAlias[e];return typeof t<"u"&&this.aliasToTopic.get(t),t}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}}}),Vr=h(e=>{d(),at(),He();var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0});var r=br(),n=t(qr()),o=yr();e.default=(e,t)=>{e.log("_handleConnack");let{options:i}=e,s=5===i.protocolVersion?t.reasonCode:t.returnCode;if(clearTimeout(e.connackTimer),delete e.topicAliasSend,t.properties){if(t.properties.topicAliasMaximum){if(t.properties.topicAliasMaximum>65535)return void e.emit("error",new Error("topicAliasMaximum from broker is out of range"));t.properties.topicAliasMaximum>0&&(e.topicAliasSend=new n.default(t.properties.topicAliasMaximum))}t.properties.serverKeepAlive&&i.keepalive&&(i.keepalive=t.properties.serverKeepAlive),t.properties.maximumPacketSize&&(i.properties||(i.properties={}),i.properties.maximumPacketSize=t.properties.maximumPacketSize)}if(0===s)e.reconnecting=!1,e._onConnect(t);else if(s>0){let t=new o.ErrorWithReasonCode(`Connection refused: ${r.ReasonCodes[s]}`,s);e.emit("error",t),e.options.reconnectOnConnackError&&e._cleanUp(!0)}}}),zr=h(e=>{d(),at(),He(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=(e,t,r)=>{e.log("handling pubrel packet");let n=typeof r<"u"?r:e.noop,{messageId:o}=t,i={cmd:"pubcomp",messageId:o};e.incomingStore.get(t,(t,r)=>{t?e._sendPacket(i,n):(e.emit("message",r.topic,r.payload,r),e.handleMessage(r,t=>{if(t)return n(t);e.incomingStore.del(r,e.noop),e._sendPacket(i,n)}))})}}),Hr=h(e=>{d(),at(),He();var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0});var r=t(mr()),n=t(_r()),o=t(Vr()),i=t(br()),s=t(zr());e.default=(e,t,a)=>{let{options:l}=e;if(5===l.protocolVersion&&l.properties&&l.properties.maximumPacketSize&&l.properties.maximumPacketSize<t.length)return e.emit("error",new Error(`exceeding packets size ${t.cmd}`)),e.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),e;switch(e.log("_handlePacket :: emitting packetreceive"),e.emit("packetreceive",t),t.cmd){case"publish":(0,r.default)(e,t,a);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":e.reschedulePing(),(0,i.default)(e,t),a();break;case"pubrel":e.reschedulePing(),(0,s.default)(e,t,a);break;case"connack":(0,o.default)(e,t),a();break;case"auth":e.reschedulePing(),(0,n.default)(e,t),a();break;case"pingresp":e.log("_handlePacket :: received pingresp"),e.reschedulePing(!0),a();break;case"disconnect":e.emit("disconnect",t),a();break;default:e.log("_handlePacket :: unknown command"),a()}}}),Kr=h(e=>{d(),at(),He(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{nextId;constructor(){this.nextId=Math.max(1,Math.floor(65535*Math.random()))}allocate(){let e=this.nextId++;return 65536===this.nextId&&(this.nextId=1),e}getLastAllocated(){return 1===this.nextId?65535:this.nextId-1}register(e){return!0}deallocate(e){}clear(){}}}),Gr=h(e=>{d(),at(),He(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{aliasToTopic;max;length;constructor(e){this.aliasToTopic={},this.max=e}put(e,t){return!(0===t||t>this.max||(this.aliasToTopic[t]=e,this.length=Object.keys(this.aliasToTopic).length,0))}getTopicByAlias(e){return this.aliasToTopic[e]}clear(){this.aliasToTopic={}}}}),Qr=h(e=>{d(),at(),He();var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.TypedEventEmitter=void 0;var r=t((It(),p(ft))),n=yr(),o=class{};e.TypedEventEmitter=o,(0,n.applyMixin)(o,r.default)}),Jr=h((e,t)=>{function r(e){return t.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,r(e)}d(),at(),He(),t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}),Yr=h((e,t)=>{d(),at(),He();var r=Jr().default;t.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},t.exports.__esModule=!0,t.exports.default=t.exports}),Xr=h((e,t)=>{d(),at(),He();var r=Jr().default,n=Yr();t.exports=function(e){var t=n(e,"string");return"symbol"==r(t)?t:t+""},t.exports.__esModule=!0,t.exports.default=t.exports}),Zr=h((e,t)=>{d(),at(),He();var r=Xr();t.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},t.exports.__esModule=!0,t.exports.default=t.exports}),en=h((e,t)=>{d(),at(),He(),t.exports=function(e){if(Array.isArray(e))return e},t.exports.__esModule=!0,t.exports.default=t.exports}),tn=h((e,t)=>{d(),at(),He(),t.exports=function(e,t){var r=null==e?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,s,a=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}},t.exports.__esModule=!0,t.exports.default=t.exports}),rn=h((e,t)=>{d(),at(),He(),t.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n},t.exports.__esModule=!0,t.exports.default=t.exports}),nn=h((e,t)=>{d(),at(),He();var r=rn();t.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports}),on=h((e,t)=>{d(),at(),He(),t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports}),sn=h((e,t)=>{d(),at(),He();var r=en(),n=tn(),o=nn(),i=on();t.exports=function(e,t){return r(e)||n(e,t)||o(e,t)||i()},t.exports.__esModule=!0,t.exports.default=t.exports}),an=h((r,s)=>{var a;d(),at(),He(),a=function(e){var t,r=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,n=536870912,o=2*n,i=new WeakMap,s=function(e,t){return function(i){var s=t.get(i),a=void 0===s?i.size:s<o?s+1:0;if(!i.has(a))return e(i,a);if(i.size<n){for(;i.has(a);)a=Math.floor(Math.random()*o);return e(i,a)}if(i.size>r)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;i.has(a);)a=Math.floor(Math.random()*r);return e(i,a)}}((t=i,function(e,r){return t.set(e,r),r}),i),a=function(e){return function(t){var r=e(t);return t.add(r),r}}(s);e.addUniqueNumber=a,e.generateUniqueNumber=s},"object"==typeof r&&typeof s<"u"?a(r):(o=[t],void 0===(i="function"==typeof(n=a)?n.apply(t,o):n)||(e.exports=i))}),ln=h((e,t)=>{function r(e,t,r,n,o,i,s){try{var a=e[i](s),l=a.value}catch(e){return void r(e)}a.done?t(l):Promise.resolve(l).then(n,o)}d(),at(),He(),t.exports=function(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var s=e.apply(t,n);function a(e){r(s,o,i,a,l,"next",e)}function l(e){r(s,o,i,a,l,"throw",e)}a(void 0)})}},t.exports.__esModule=!0,t.exports.default=t.exports}),cn=h((e,t)=>{d(),at(),He(),t.exports=function(e,t){this.v=e,this.k=t},t.exports.__esModule=!0,t.exports.default=t.exports}),un=h((e,t)=>{function r(e,n,o,i){var s=Object.defineProperty;try{s({},"",{})}catch{s=0}t.exports=r=function(e,t,n,o){function i(t,n){r(e,t,function(e){return this._invoke(t,n,e)})}t?s?s(e,t,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},t.exports.__esModule=!0,t.exports.default=t.exports,r(e,n,o,i)}d(),at(),He(),t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}),hn=h((e,t)=>{d(),at(),He();var r=un();function n(){var e,o,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.toStringTag||"@@toStringTag";function l(t,n,i,s){var a=n&&n.prototype instanceof u?n:u,l=Object.create(a.prototype);return r(l,"_invoke",function(t,r,n){var i,s,a,l=0,u=n||[],h=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return i=t,s=0,a=e,f.n=r,c}};function p(t,r){for(s=t,a=r,o=0;!h&&l&&!n&&o<u.length;o++){var n,i=u[o],p=f.p,d=i[2];t>3?(n=d===r)&&(a=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=p&&((n=t<2&&p<i[1])?(s=0,f.v=r,f.n=i[1]):p<d&&(n=t<3||i[0]>r||r>d)&&(i[4]=t,i[5]=r,f.n=d,s=0))}if(n||t>1)return c;throw h=!0,r}return function(n,u,d){if(l>1)throw TypeError("Generator is already running");for(h&&1===u&&p(u,d),s=u,a=d;(o=s<2?e:a)||!h;){i||(s?s<3?(s>1&&(f.n=-1),p(s,a)):f.n=a:f.v=a);try{if(l=2,i){if(s||(n="next"),o=i[n]){if(!(o=o.call(i,a)))throw TypeError("iterator result is not an object");if(!o.done)return o;a=o.value,s<2&&(s=0)}else 1===s&&(o=i.return)&&o.call(i),s<2&&(a=TypeError("The iterator does not provide a '"+n+"' method"),s=1);i=e}else if((o=(h=f.n<0)?a:t.call(r,f))!==c)break}catch(t){i=e,s=1,a=t}finally{l=1}}return{value:o,done:h}}}(t,i,s),!0),l}var c={};function u(){}function h(){}function f(){}o=Object.getPrototypeOf;var p=[][s]?o(o([][s]())):(r(o={},s,function(){return this}),o),d=f.prototype=u.prototype=Object.create(p);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,r(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return h.prototype=f,r(d,"constructor",f),r(f,"constructor",h),h.displayName="GeneratorFunction",r(f,a,"GeneratorFunction"),r(d),r(d,a,"Generator"),r(d,s,function(){return this}),r(d,"toString",function(){return"[object Generator]"}),(t.exports=n=function(){return{w:l,m}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}),fn=h((e,t)=>{d(),at(),He();var r=cn(),n=un();t.exports=function e(t,o){function i(e,n,s,a){try{var l=t[e](n),c=l.value;return c instanceof r?o.resolve(c.v).then(function(e){i("next",e,s,a)},function(e){i("throw",e,s,a)}):o.resolve(c).then(function(e){l.value=e,s(l)},function(e){return i("throw",e,s,a)})}catch(e){a(e)}}var s;this.next||(n(e.prototype),n(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),n(this,"_invoke",function(e,t,r){function n(){return new o(function(t,n){i(e,r,t,n)})}return s=s?s.then(n,n):n()},!0)},t.exports.__esModule=!0,t.exports.default=t.exports}),pn=h((e,t)=>{d(),at(),He();var r=hn(),n=fn();t.exports=function(e,t,o,i,s){return new n(r().w(e,t,o,i),s||Promise)},t.exports.__esModule=!0,t.exports.default=t.exports}),dn=h((e,t)=>{d(),at(),He();var r=pn();t.exports=function(e,t,n,o,i){var s=r(e,t,n,o,i);return s.next().then(function(e){return e.done?e.value:s.next()})},t.exports.__esModule=!0,t.exports.default=t.exports}),mn=h((e,t)=>{d(),at(),He(),t.exports=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},t.exports.__esModule=!0,t.exports.default=t.exports}),gn=h((e,t)=>{d(),at(),He();var r=Jr().default;t.exports=function(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(r(e)+" is not iterable")},t.exports.__esModule=!0,t.exports.default=t.exports}),yn=h((e,t)=>{d(),at(),He();var r=cn(),n=hn(),o=dn(),i=pn(),s=fn(),a=mn(),l=gn();function c(){var e=n(),u=e.m(c),h=(Object.getPrototypeOf?Object.getPrototypeOf(u):u.__proto__).constructor;function f(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))}var p={throw:1,return:2,break:3,continue:3};function d(e){var t,r;return function(n){t||(t={stop:function(){return r(n.a,2)},catch:function(){return n.v},abrupt:function(e,t){return r(n.a,p[e],t)},delegateYield:function(e,o,i){return t.resultName=o,r(n.d,l(e),i)},finish:function(e){return r(n.f,e)}},r=function(e,r,o){n.p=t.prev,n.n=t.next;try{return e(r,o)}finally{t.next=n.n}}),t.resultName&&(t[t.resultName]=n.v,t.resultName=void 0),t.sent=n.v,t.next=n.n;try{return e.call(this,t)}finally{n.p=t.prev,n.n=t.next}}}return(t.exports=c=function(){return{wrap:function(t,r,n,o){return e.w(d(t),r,n,o&&o.reverse())},isGeneratorFunction:f,mark:e.m,awrap:function(e,t){return new r(e,t)},AsyncIterator:s,async:function(e,t,r,n,s){return(f(t)?i:o)(d(e),t,r,n,s)},keys:a,values:l}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=c,t.exports.__esModule=!0,t.exports.default=t.exports}),bn=h((e,t)=>{d(),at(),He();var r=yn()();t.exports=r;try{regeneratorRuntime=r}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}}),_n=h((s,a)=>{var l;d(),at(),He(),l=function(e,t,r,n,o,i){var s=new WeakMap;function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function l(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?a(Object(n),!0).forEach(function(r){t(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?c(Object(n),!0).forEach(function(r){t(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h=new WeakMap;e.createBroker=function(e){var a=function(e){return l(l({},e),{},{connect:function(e){var t=e.call;return o(i.mark(function e(){var r,n,o,a;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new MessageChannel,n=r.port1,o=r.port2,e.next=1,t("connect",{port:n},[n]);case 1:return a=e.sent,s.set(o,a),e.abrupt("return",o);case 2:case"end":return e.stop()}},e)}))},disconnect:function(e){var t,r=e.call;return t=o(i.mark(function e(t){var n;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(n=s.get(t))){e.next=1;break}throw new Error("The given port is not connected.");case 1:return e.next=2,r("disconnect",{portId:n});case 2:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}},isSupported:function(e){var t=e.call;return function(){return t("isSupported")}}})}(e);return function(e){var o=function(e){if(h.has(e))return h.get(e);var t=new Map;return h.set(e,t),t}(e);e.addEventListener("message",function(e){var t=e.data,r=t.id;if(null!==r&&o.has(r)){var n=o.get(r),i=n.reject,s=n.resolve;o.delete(r),void 0===t.error?s(t.result):i(new Error(t.error.message))}}),function(e){return"function"==typeof e.start}(e)&&e.start();for(var i=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return new Promise(function(s,a){var l=n.generateUniqueNumber(o);o.set(l,{reject:a,resolve:s}),null===r?e.postMessage({id:l,method:t},i):e.postMessage({id:l,method:t,params:r},i)})},s=function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e.postMessage({id:null,method:t,params:r},n)},l={},c=0,f=Object.entries(a);c<f.length;c++){var p=r(f[c],2),d=p[0],m=p[1];l=u(u({},l),{},t({},d,m({call:i,notify:s})))}return u({},l)}}},"object"==typeof s&&typeof a<"u"?l(s,Zr(),sn(),an(),ln(),bn()):(o=[t,r(3693),r(5715),r(8389),r(9293),r(4756)],void 0===(i="function"==typeof(n=l)?n.apply(t,o):n)||(e.exports=i))}),vn=h((s,a)=>{var l;d(),at(),He(),l=function(e,t,r,n){var o=new Map([[0,null]]),i=new Map([[0,null]]),s=r.createBroker({clearInterval:function(e){var r=e.call;return function(e){"symbol"===t(o.get(e))&&(o.set(e,null),r("clear",{timerId:e,timerType:"interval"}).then(function(){o.delete(e)}))}},clearTimeout:function(e){var r=e.call;return function(e){"symbol"===t(i.get(e))&&(i.set(e,null),r("clear",{timerId:e,timerType:"timeout"}).then(function(){i.delete(e)}))}},setInterval:function(e){var t=e.call;return function(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];var l=Symbol(),c=n.generateUniqueNumber(o);o.set(c,l);var u=function(){return t("set",{delay:r,now:performance.timeOrigin+performance.now(),timerId:c,timerType:"interval"}).then(function(){var t=o.get(c);if(void 0===t)throw new Error("The timer is in an undefined state.");t===l&&(e.apply(void 0,s),o.get(c)===l&&u())})};return u(),c}},setTimeout:function(e){var t=e.call;return function(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length,s=new Array(o>2?o-2:0),a=2;a<o;a++)s[a-2]=arguments[a];var l=Symbol(),c=n.generateUniqueNumber(i);return i.set(c,l),t("set",{delay:r,now:performance.timeOrigin+performance.now(),timerId:c,timerType:"timeout"}).then(function(){var t=i.get(c);if(void 0===t)throw new Error("The timer is in an undefined state.");t===l&&(i.delete(c),e.apply(void 0,s))}),c}}});e.load=function(e){var t=new Worker(e);return s(t)},e.wrap=s},"object"==typeof s&&typeof a<"u"?l(s,Jr(),_n(),an()):(o=[t,r(3738),r(7403),r(8389)],void 0===(i="function"==typeof(n=l)?n.apply(t,o):n)||(e.exports=i))}),wn=h((s,a)=>{var l;d(),at(),He(),l=function(e,t){var r,n,o=(r=t.load,n=null,function(){if(null!==n)return n;var e=new Blob(['(()=>{var e={45:(e,t,r)=>{var n=r(738).default;e.exports=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},79:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},122:(e,t,r)=>{var n=r(79);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},156:e=>{e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,u,a,i=[],s=!0,c=!1;try{if(u=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=u.call(r)).done)&&(i.push(n.value),i.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},172:e=>{e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},293:e=>{function t(e,t,r,n,o,u,a){try{var i=e[u](a),s=i.value}catch(e){return void r(e)}i.done?t(s):Promise.resolve(s).then(n,o)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(o,u){var a=e.apply(r,n);function i(e){t(a,o,u,i,s,"next",e)}function s(e){t(a,o,u,i,s,"throw",e)}i(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},373:e=>{e.exports=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},e.exports.__esModule=!0,e.exports.default=e.exports},389:function(e,t){!function(e){"use strict";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,u=2*o,a=function(e,t){return function(r){var a=t.get(r),i=void 0===a?r.size:a<u?a+1:0;if(!r.has(i))return e(r,i);if(r.size<o){for(;r.has(i);)i=Math.floor(Math.random()*u);return e(r,i)}if(r.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(i);)i=Math.floor(Math.random()*n);return e(r,i)}},i=new WeakMap,s=r(i),c=a(s,i),f=t(c);e.addUniqueNumber=f,e.generateUniqueNumber=c}(t)},472:function(e,t,r){!function(e,t,r,n){"use strict";var o=function(e,t){return function(r){var o=t.get(r);if(void 0===o)return Promise.resolve(!1);var u=n(o,2),a=u[0],i=u[1];return e(a),t.delete(r),i(!1),Promise.resolve(!0)}},u=function(e,t){var r=function(n,o,u,a){var i=n-e.now();i>0?o.set(a,[t(r,i,n,o,u,a),u]):(o.delete(a),u(!0))};return r},a=function(e,t,r,n){return function(o,u,a){var i=o+u-t.timeOrigin,s=i-t.now();return new Promise((function(t){e.set(a,[r(n,s,i,e,t,a),t])}))}},i=new Map,s=o(globalThis.clearTimeout,i),c=new Map,f=o(globalThis.clearTimeout,c),l=u(performance,globalThis.setTimeout),p=a(i,performance,globalThis.setTimeout,l),d=a(c,performance,globalThis.setTimeout,l);r.createWorker(self,{clear:function(){var r=e(t.mark((function e(r){var n,o,u;return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.timerId,o=r.timerType,e.next=1,"interval"===o?s(n):f(n);case 1:return u=e.sent,e.abrupt("return",{result:u});case 2:case"end":return e.stop()}}),e)})));function n(e){return r.apply(this,arguments)}return n}(),set:function(){var r=e(t.mark((function e(r){var n,o,u,a,i;return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.delay,o=r.now,u=r.timerId,a=r.timerType,e.next=1,("interval"===a?p:d)(n,o,u);case 1:return i=e.sent,e.abrupt("return",{result:i});case 2:case"end":return e.stop()}}),e)})));function n(e){return r.apply(this,arguments)}return n}()})}(r(293),r(756),r(623),r(715))},546:e=>{function t(r,n,o,u){var a=Object.defineProperty;try{a({},"",{})}catch(r){a=0}e.exports=t=function(e,r,n,o){if(r)a?a(e,r,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[r]=n;else{var u=function(r,n){t(e,r,(function(e){return this._invoke(r,n,e)}))};u("next",0),u("throw",1),u("return",2)}},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n,o,u)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},579:(e,t,r)=>{var n=r(738).default;e.exports=function(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(n(e)+" is not iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},623:function(e,t,r){!function(e,t,r,n,o){"use strict";var u={INTERNAL_ERROR:-32603,INVALID_PARAMS:-32602,METHOD_NOT_FOUND:-32601},a=function(e,t){return Object.assign(new Error(e),{status:t})},i=function(e){return a(\'The requested method called "\'.concat(e,\'" is not supported.\'),u.METHOD_NOT_FOUND)},s=function(e){return a(\'The handler of the method called "\'.concat(e,\'" returned no required result.\'),u.INTERNAL_ERROR)},c=function(e){return a(\'The handler of the method called "\'.concat(e,\'" returned an unexpected result.\'),u.INTERNAL_ERROR)},f=function(e){return a(\'The specified parameter called "portId" with the given value "\'.concat(e,\'" does not identify a port connected to this worker.\'),u.INVALID_PARAMS)},l=function(e,n){return function(){var o=t(r.mark((function t(o){var u,a,f,l,p,d,v,x,y,b,h,m,_,g,w;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=o.data,a=u.id,f=u.method,l=u.params,p=n[f],t.prev=1,void 0!==p){t.next=2;break}throw i(f);case 2:if(void 0!==(d=void 0===l?p():p(l))){t.next=3;break}throw s(f);case 3:if(!(d instanceof Promise)){t.next=5;break}return t.next=4,d;case 4:g=t.sent,t.next=6;break;case 5:g=d;case 6:if(v=g,null!==a){t.next=8;break}if(void 0===v.result){t.next=7;break}throw c(f);case 7:t.next=10;break;case 8:if(void 0!==v.result){t.next=9;break}throw c(f);case 9:x=v.result,y=v.transferables,b=void 0===y?[]:y,e.postMessage({id:a,result:x},b);case 10:t.next=12;break;case 11:t.prev=11,w=t.catch(1),h=w.message,m=w.status,_=void 0===m?-32603:m,e.postMessage({error:{code:_,message:h},id:a});case 12:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return o.apply(this,arguments)}}()},p=function(){return new Promise((function(e){var t=new ArrayBuffer(0),r=new MessageChannel,n=r.port1,o=r.port2;n.onmessage=function(t){var r=t.data;return e(null!==r)},o.postMessage(t,[t])}))};function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x=new Map,y=function(e,n,u){return v(v({},n),{},{connect:function(t){var r=t.port;r.start();var u=e(r,n),a=o.generateUniqueNumber(x);return x.set(a,(function(){u(),r.close(),x.delete(a)})),{result:a}},disconnect:function(e){var t=e.portId,r=x.get(t);if(void 0===r)throw f(t);return r(),{result:null}},isSupported:function(){var e=t(r.mark((function e(){var t,n,o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,p();case 1:if(!e.sent){e.next=5;break}if(!((t=u())instanceof Promise)){e.next=3;break}return e.next=2,t;case 2:o=e.sent,e.next=4;break;case 3:o=t;case 4:return n=o,e.abrupt("return",{result:n});case 5:return e.abrupt("return",{result:!1});case 6:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()})},b=function(e,t){var r=y(b,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0}),n=l(e,r);return e.addEventListener("message",n),function(){return e.removeEventListener("message",n)}};e.createWorker=b,e.isSupported=p}(t,r(293),r(756),r(693),r(389))},633:(e,t,r)=>{var n=r(172),o=r(993),u=r(869),a=r(887),i=r(791),s=r(373),c=r(579);function f(){"use strict";var t=o(),r=t.m(f),l=(Object.getPrototypeOf?Object.getPrototypeOf(r):r.__proto__).constructor;function p(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===l||"GeneratorFunction"===(t.displayName||t.name))}var d={throw:1,return:2,break:3,continue:3};function v(e){var t,r;return function(n){t||(t={stop:function(){return r(n.a,2)},catch:function(){return n.v},abrupt:function(e,t){return r(n.a,d[e],t)},delegateYield:function(e,o,u){return t.resultName=o,r(n.d,c(e),u)},finish:function(e){return r(n.f,e)}},r=function(e,r,o){n.p=t.prev,n.n=t.next;try{return e(r,o)}finally{t.next=n.n}}),t.resultName&&(t[t.resultName]=n.v,t.resultName=void 0),t.sent=n.v,t.next=n.n;try{return e.call(this,t)}finally{n.p=t.prev,n.n=t.next}}}return(e.exports=f=function(){return{wrap:function(e,r,n,o){return t.w(v(e),r,n,o&&o.reverse())},isGeneratorFunction:p,mark:t.m,awrap:function(e,t){return new n(e,t)},AsyncIterator:i,async:function(e,t,r,n,o){return(p(t)?a:u)(v(e),t,r,n,o)},keys:s,values:c}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=f,e.exports.__esModule=!0,e.exports.default=e.exports},693:(e,t,r)=>{var n=r(736);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},715:(e,t,r)=>{var n=r(987),o=r(156),u=r(122),a=r(752);e.exports=function(e,t){return n(e)||o(e,t)||u(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},736:(e,t,r)=>{var n=r(738).default,o=r(45);e.exports=function(e){var t=o(e,"string");return"symbol"==n(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},752:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},756:(e,t,r)=>{var n=r(633)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},791:(e,t,r)=>{var n=r(172),o=r(546);e.exports=function e(t,r){function u(e,o,a,i){try{var s=t[e](o),c=s.value;return c instanceof n?r.resolve(c.v).then((function(e){u("next",e,a,i)}),(function(e){u("throw",e,a,i)})):r.resolve(c).then((function(e){s.value=e,a(s)}),(function(e){return u("throw",e,a,i)}))}catch(e){i(e)}}var a;this.next||(o(e.prototype),o(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),o(this,"_invoke",(function(e,t,n){function o(){return new r((function(t,r){u(e,n,t,r)}))}return a=a?a.then(o,o):o()}),!0)},e.exports.__esModule=!0,e.exports.default=e.exports},869:(e,t,r)=>{var n=r(887);e.exports=function(e,t,r,o,u){var a=n(e,t,r,o,u);return a.next().then((function(e){return e.done?e.value:a.next()}))},e.exports.__esModule=!0,e.exports.default=e.exports},887:(e,t,r)=>{var n=r(993),o=r(791);e.exports=function(e,t,r,u,a){return new o(n().w(e,t,r,u),a||Promise)},e.exports.__esModule=!0,e.exports.default=e.exports},987:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},993:(e,t,r)=>{var n=r(546);function o(){var t,r,u="function"==typeof Symbol?Symbol:{},a=u.iterator||"@@iterator",i=u.toStringTag||"@@toStringTag";function s(e,o,u,a){var i=o&&o.prototype instanceof f?o:f,s=Object.create(i.prototype);return n(s,"_invoke",function(e,n,o){var u,a,i,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,r){return u=e,a=0,i=t,p.n=r,c}};function d(e,n){for(a=e,i=n,r=0;!l&&s&&!o&&r<f.length;r++){var o,u=f[r],d=p.p,v=u[2];e>3?(o=v===n)&&(i=u[(a=u[4])?5:(a=3,3)],u[4]=u[5]=t):u[0]<=d&&((o=e<2&&d<u[1])?(a=0,p.v=n,p.n=u[1]):d<v&&(o=e<3||u[0]>n||n>v)&&(u[4]=e,u[5]=n,p.n=v,a=0))}if(o||e>1)return c;throw l=!0,n}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),a=f,i=v;(r=a<2?t:i)||!l;){u||(a?a<3?(a>1&&(p.n=-1),d(a,i)):p.n=i:p.v=i);try{if(s=2,u){if(a||(o="next"),r=u[o]){if(!(r=r.call(u,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,a<2&&(a=0)}else 1===a&&(r=u.return)&&r.call(u),a<2&&(i=TypeError("The iterator does not provide a \'"+o+"\' method"),a=1);u=t}else if((r=(l=p.n<0)?i:e.call(n,p))!==c)break}catch(e){u=t,a=1,i=e}finally{s=1}}return{value:r,done:l}}}(e,u,a),!0),s}var c={};function f(){}function l(){}function p(){}r=Object.getPrototypeOf;var d=[][a]?r(r([][a]())):(n(r={},a,(function(){return this})),r),v=p.prototype=f.prototype=Object.create(d);function x(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,n(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e}return l.prototype=p,n(v,"constructor",p),n(p,"constructor",l),l.displayName="GeneratorFunction",n(p,i,"GeneratorFunction"),n(v),n(v,i,"Generator"),n(v,a,(function(){return this})),n(v,"toString",(function(){return"[object Generator]"})),(e.exports=o=function(){return{w:s,m:x}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var u=t[n]={exports:{}};return e[n].call(u.exports,u,u.exports,r),u.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();'],{type:"application/javascript; charset=utf-8"}),t=URL.createObjectURL(e);return n=r(t),setTimeout(function(){return URL.revokeObjectURL(t)}),n});e.clearInterval=function(e){return o().clearInterval(e)},e.clearTimeout=function(e){return o().clearTimeout(e)},e.setInterval=function(){var e;return(e=o()).setInterval.apply(e,arguments)},e.setTimeout=function(){var e;return(e=o()).setTimeout.apply(e,arguments)}},"object"==typeof s&&typeof a<"u"?l(s,vn()):(o=[t,r(4932)],void 0===(i="function"==typeof(n=l)?n.apply(t,o):n)||(e.exports=i))}),Sn=h(e=>{d(),at(),He(),Object.defineProperty(e,"__esModule",{value:!0}),e.isReactNativeBrowser=e.isWebWorker=void 0;var t=()=>!!("object"==typeof self&&self?.constructor?.name?.includes("WorkerGlobalScope")&&typeof Deno>"u"),r=()=>typeof navigator<"u"&&"ReactNative"===navigator.product,n=typeof window<"u"&&(typeof navigator<"u"&&navigator.userAgent?.toLowerCase().indexOf(" electron/")>-1&&m?.versions?!Object.prototype.hasOwnProperty.call(m.versions,"electron"):typeof window.document<"u")||t()||r();e.isWebWorker=t(),e.isReactNativeBrowser=r(),e.default=n}),En=h(e=>{d(),at(),He();var t,r=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e&&e.__importStar||(t=function(e){return(t=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var o={};if(null!=e)for(var i=t(e),s=0;s<i.length;s++)"default"!==i[s]&&r(o,e,i[s]);return n(o,e),o});Object.defineProperty(e,"__esModule",{value:!0});var i=wn(),s=o(Sn()),a={set:i.setInterval,clear:i.clearInterval},l={set:(e,t)=>setInterval(e,t),clear:e=>clearInterval(e)};e.default=e=>{switch(e){case"native":return l;case"worker":return a;default:return!s.default||s.isWebWorker||s.isReactNativeBrowser?l:a}}}),An=h(e=>{d(),at(),He();var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0});var r=t(En());e.default=class{_keepalive;timerId;timer;destroyed=!1;counter;client;_keepaliveTimeoutTimestamp;_intervalEvery;get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(e,t){this.client=e,this.timer="object"==typeof t&&"set"in t&&"clear"in t?t:(0,r.default)(t),this.setKeepalive(e.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(e){if(e*=1e3,isNaN(e)||e<=0||e>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${e}`);this._keepalive=e,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${e}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let e=Math.ceil(1.5*this._keepalive);this._keepaliveTimeoutTimestamp=Date.now()+e,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,2===this.counter?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}}}),In=h(e=>{d(),at(),He();var t,r=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e&&e.__importStar||(t=function(e){return(t=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var o={};if(null!=e)for(var i=t(e),s=0;s<i.length;s++)"default"!==i[s]&&r(o,e,i[s]);return n(o,e),o}),i=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0});var s=i(ur()),a=Jt(),l=i(fr()),c=i(or()),u=o(pr()),h=i(dr()),f=i(Hr()),p=i(Kr()),m=i(Gr()),g=yr(),y=Qr(),b=i(An()),_=o(Sn()),v=globalThis.setImmediate||((...e)=>{let t=e.shift();(0,g.nextTick)(()=>{t(...e)})}),w={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0,subscribeBatchSize:null,writeCache:!0,timerVariant:"auto"},S=class e extends y.TypedEventEmitter{static VERSION=g.MQTTJS_VERSION;connected;disconnecting;disconnected;reconnecting;incomingStore;outgoingStore;options;queueQoSZero;_reconnectCount;log;messageIdProvider;outgoing;messageIdToTopic;noop;keepaliveManager;stream;queue;streamBuilder;_resubscribeTopics;connackTimer;reconnectTimer;_storeProcessing;_packetIdsDuringStoreProcessing;_storeProcessingQueue;_firstConnection;topicAliasRecv;topicAliasSend;_deferredReconnect;connackPacket;static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(t,r){super(),this.options=r||{};for(let e in w)typeof this.options[e]>"u"?this.options[e]=w[e]:this.options[e]=r[e];this.log=this.options.log||(0,c.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",e.VERSION),_.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",_.default?"browser":"node"),this.log("MqttClient :: options.protocol",r.protocol),this.log("MqttClient :: options.protocolVersion",r.protocolVersion),this.log("MqttClient :: options.username",r.username),this.log("MqttClient :: options.keepalive",r.keepalive),this.log("MqttClient :: options.reconnectPeriod",r.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",r.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",r.properties?r.properties.topicAliasMaximum:void 0),this.options.clientId="string"==typeof r.clientId?r.clientId:e.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=5===r.protocolVersion&&r.customHandleAcks?r.customHandleAcks:(...e)=>{e[3](null,0)},this.options.writeCache||(s.default.writeToStream.cacheNumbers=!1),this.streamBuilder=t,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new p.default:this.options.messageIdProvider,this.outgoingStore=r.outgoingStore||new h.default,this.incomingStore=r.incomingStore||new h.default,this.queueQoSZero=void 0===r.queueQoSZero||r.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,r.properties&&r.properties.topicAliasMaximum>0&&(r.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new m.default(r.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:e}=this,t=()=>{let r=e.shift();this.log("deliver :: entry %o",r);let n=null;if(!r)return void this._resubscribe();n=r.packet,this.log("deliver :: call _sendPacket for %o",n);let o=!0;n.messageId&&0!==n.messageId&&(this.messageIdProvider.register(n.messageId)||(o=!1)),o?this._sendPacket(n,e=>{r.cb&&r.cb(e),t()}):(this.log("messageId: %d has already used. The message is skipped and removed.",n.messageId),t())};this.log("connect :: sending queued packets"),t()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(e,t){t()}handleMessage(e,t){t()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){let e=new a.Writable,t=s.default.parser(this.options),r=null,n=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new h.default,this.outgoingStore=this.options.outgoingStore||new h.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),t.on("packet",e=>{this.log("parser :: on packet push to packets array."),n.push(e)});let o=()=>{this.log("work :: getting next packet in queue");let e=n.shift();if(e)this.log("work :: packet pulled from queue"),(0,f.default)(this,e,i);else{this.log("work :: no packets in queue");let e=r;r=null,this.log("work :: done flag is %s",!!e),e&&e()}},i=()=>{if(n.length)(0,g.nextTick)(o);else{let e=r;r=null,e()}};e._write=(e,n,i)=>{r=i,this.log("writable stream :: parsing buffer"),t.parse(e),o()},this.log("connect :: pipe stream to writable stream"),this.stream.pipe(e),this.stream.on("error",e=>{this.log("streamErrorHandler :: error",e.message),e.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",e)):this.noop(e)}),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let l={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(l.will={...this.options.will,payload:this.options.will?.payload}),this.topicAliasRecv&&(l.properties||(l.properties={}),this.topicAliasRecv&&(l.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(l),t.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&"object"==typeof this.options.authPacket){let e={cmd:"auth",reasonCode:0,...this.options.authPacket};this._writePacket(e)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(e,t,r,n){this.log("publish :: message `%s` to topic `%s`",t,e);let{options:o}=this;"function"==typeof r&&(n=r,r=null),r=r||{},r={qos:0,retain:!1,dup:!1,...r};let{qos:i,retain:s,dup:a,properties:l,cbStorePut:c}=r;if(this._checkDisconnecting(n))return this;let u=()=>{let r=0;if((1===i||2===i)&&(r=this._nextId(),null===r))return this.log("No messageId left"),!1;let u={cmd:"publish",topic:e,payload:t,qos:i,retain:s,messageId:r,dup:a};switch(5===o.protocolVersion&&(u.properties=l),this.log("publish :: qos",i),i){case 1:case 2:this.outgoing[u.messageId]={volatile:!1,cb:n||this.noop},this.log("MqttClient:publish: packet cmd: %s",u.cmd),this._sendPacket(u,void 0,c);break;default:this.log("MqttClient:publish: packet cmd: %s",u.cmd),this._sendPacket(u,n,c)}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!u())&&this._storeProcessingQueue.push({invoke:u,cbStorePut:r.cbStorePut,callback:n}),this}publishAsync(e,t,r){return new Promise((n,o)=>{this.publish(e,t,r,(e,t)=>{e?o(e):n(t)})})}subscribe(e,t,r){let n=this.options.protocolVersion;"function"==typeof t&&(r=t),r=r||this.noop;let o=!1,i=[];"string"==typeof e?i=e=[e]:Array.isArray(e)?i=e:"object"==typeof e&&(o=e.resubscribe,delete e.resubscribe,i=Object.keys(e));let s=u.validateTopics(i);if(null!==s)return v(r,new Error(`Invalid topic ${s}`)),this;if(this._checkDisconnecting(r))return this.log("subscribe: discconecting true"),this;let a={qos:0};5===n&&(a.nl=!1,a.rap=!1,a.rh=0),t={...a,...t};let{properties:l}=t,c=[],h=(e,r)=>{if(r=r||t,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,e)||this._resubscribeTopics[e].qos<r.qos||o){let t={topic:e,qos:r.qos};5===n&&(t.nl=r.nl,t.rap=r.rap,t.rh=r.rh,t.properties=l),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",t.topic,t.qos),c.push(t)}};if(Array.isArray(e)?e.forEach(e=>{this.log("subscribe: array topic %s",e),h(e)}):Object.keys(e).forEach(t=>{this.log("subscribe: object topic %s, %o",t,e[t]),h(t,e[t])}),!c.length)return r(null,[]),this;let f=(e,t)=>{let r={cmd:"subscribe",subscriptions:e,messageId:t};if(l&&(r.properties=l),this.options.resubscribe){this.log("subscribe :: resubscribe true");let t=[];e.forEach(e=>{if(this.options.reconnectPeriod>0){let r={qos:e.qos};5===n&&(r.nl=e.nl||!1,r.rap=e.rap||!1,r.rh=e.rh||0,r.properties=e.properties),this._resubscribeTopics[e.topic]=r,t.push(e.topic)}}),this.messageIdToTopic[r.messageId]=t}let o=new Promise((t,n)=>{this.outgoing[r.messageId]={volatile:!0,cb(r,o){if(!r){let{granted:t}=o;for(let r=0;r<t.length;r+=1)e[r].qos=t[r]}r?n(new g.ErrorWithSubackPacket(r.message,o)):t(o)}}});return this.log("subscribe :: call _sendPacket"),this._sendPacket(r),o},p=()=>{let e=this.options.subscribeBatchSize??c.length,t=[];for(let r=0;r<c.length;r+=e){let n=c.slice(r,r+e),o=this._nextId();if(null===o)return this.log("No messageId left"),!1;t.push(f(n,o))}return Promise.all(t).then(e=>{r(null,c,e.at(-1))}).catch(e=>{r(e,c,e.packet)}),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!p())&&this._storeProcessingQueue.push({invoke:p,callback:r}),this}subscribeAsync(e,t){return new Promise((r,n)=>{this.subscribe(e,t,(e,t)=>{e?n(e):r(t)})})}unsubscribe(e,t,r){"string"==typeof e&&(e=[e]),"function"==typeof t&&(r=t),r=r||this.noop;let n=u.validateTopics(e);if(null!==n)return v(r,new Error(`Invalid topic ${n}`)),this;if(this._checkDisconnecting(r))return this;let o=()=>{let n=this._nextId();if(null===n)return this.log("No messageId left"),!1;let o={cmd:"unsubscribe",messageId:n,unsubscriptions:[]};return"string"==typeof e?o.unsubscriptions=[e]:Array.isArray(e)&&(o.unsubscriptions=e),this.options.resubscribe&&o.unsubscriptions.forEach(e=>{delete this._resubscribeTopics[e]}),"object"==typeof t&&t.properties&&(o.properties=t.properties),this.outgoing[o.messageId]={volatile:!0,cb:r},this.log("unsubscribe: call _sendPacket"),this._sendPacket(o),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!o())&&this._storeProcessingQueue.push({invoke:o,callback:r}),this}unsubscribeAsync(e,t){return new Promise((r,n)=>{this.unsubscribe(e,t,(e,t)=>{e?n(e):r(t)})})}end(e,t,r){this.log("end :: (%s)",this.options.clientId),(null==e||"boolean"!=typeof e)&&(r=r||t,t=e,e=!1),"object"!=typeof t&&(r=r||t,t=null),this.log("end :: cb? %s",!!r),(!r||"function"!=typeof r)&&(r=this.noop);let n=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(e=>{this.outgoingStore.close(t=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),r){let n=e||t;this.log("end :: closeStores: invoking callback with args"),r(n)}})}),this._deferredReconnect?this._deferredReconnect():(0===this.options.reconnectPeriod||this.options.manualConnect)&&(this.disconnecting=!1)},o=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,e),this._cleanUp(e,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,g.nextTick)(n)},t)};return this.disconnecting?(r(),this):(this._clearReconnect(),this.disconnecting=!0,!e&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,o,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),o()),this)}endAsync(e,t){return new Promise((r,n)=>{this.end(e,t,e=>{e?n(e):r()})})}removeOutgoingMessage(e){if(this.outgoing[e]){let{cb:t}=this.outgoing[e];this._removeOutgoingAndStoreMessage(e,()=>{t(new Error("Message removed"))})}return this}reconnect(e){this.log("client reconnect");let t=()=>{e?(this.options.incomingStore=e.incomingStore,this.options.outgoingStore=e.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new h.default,this.outgoingStore=this.options.outgoingStore||new h.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=t:t(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(e=>{this.outgoing[e].volatile&&"function"==typeof this.outgoing[e].cb&&(this.outgoing[e].cb(new Error("Connection closed")),delete this.outgoing[e])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(e=>{"function"==typeof this.outgoing[e].cb&&(this.outgoing[e].cb(new Error("Connection closed")),delete this.outgoing[e])}))}_removeTopicAliasAndRecoverTopicName(e){let t;e.properties&&(t=e.properties.topicAlias);let r=e.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",t,r),0===r.length){if(typeof t>"u")return new Error("Unregistered Topic Alias");if(r=this.topicAliasSend.getTopicByAlias(t),typeof r>"u")return new Error("Unregistered Topic Alias");e.topic=r}t&&delete e.properties.topicAlias}_checkDisconnecting(e){return this.disconnecting&&(e&&e!==this.noop?e(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(e,t,r={}){if(t&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",t)),this.log("_cleanUp :: forced? %s",e),e)0===this.options.reconnectPeriod&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let e={cmd:"disconnect",...r};this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(e,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),v(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),t&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",t),t())}_storeAndSend(e,t,r){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",e.cmd);let n,o=e;if("publish"===o.cmd&&(o=(0,l.default)(e),n=this._removeTopicAliasAndRecoverTopicName(o),n))return t&&t(n);this.outgoingStore.put(o,n=>{if(n)return t&&t(n);r(),this._writePacket(e,t)})}_applyTopicAlias(e){if(5===this.options.protocolVersion&&"publish"===e.cmd){let t;e.properties&&(t=e.properties.topicAlias);let r=e.topic.toString();if(this.topicAliasSend)if(t){if(0!==r.length&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",r,t),!this.topicAliasSend.put(r,t)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",r,t),new Error("Sending Topic Alias out of range")}else 0!==r.length&&(this.options.autoAssignTopicAlias?(t=this.topicAliasSend.getAliasByTopic(r),t?(e.topic="",e.properties={...e.properties,topicAlias:t},this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",r,t)):(t=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(r,t),e.properties={...e.properties,topicAlias:t},this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",r,t))):this.options.autoUseTopicAlias&&(t=this.topicAliasSend.getAliasByTopic(r),t&&(e.topic="",e.properties={...e.properties,topicAlias:t},this.log("applyTopicAlias :: auto use topic: %s - alias: %d",r,t))));else if(t)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",r,t),new Error("Sending Topic Alias out of range")}}_noop(e){this.log("noop ::",e)}_writePacket(e,t){this.log("_writePacket :: packet: %O",e),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",e),this.log("_writePacket :: writing to stream");let r=s.default.writeToStream(e,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",r),!r&&t&&t!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",t)):t&&(this.log("_writePacket :: invoking cb"),t())}_sendPacket(e,t,r,n){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),r=r||this.noop,t=t||this.noop;let o=this._applyTopicAlias(e);if(o)t(o);else{if(!this.connected)return"auth"===e.cmd?void this._writePacket(e,t):(this.log("_sendPacket :: client not connected. Storing packet offline."),void this._storePacket(e,t,r));if(n)this._writePacket(e,t);else{switch(e.cmd){case"publish":break;case"pubrel":return void this._storeAndSend(e,t,r);default:return void this._writePacket(e,t)}switch(e.qos){case 2:case 1:this._storeAndSend(e,t,r);break;default:this._writePacket(e,t)}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}}}_storePacket(e,t,r){this.log("_storePacket :: packet: %o",e),this.log("_storePacket :: cb? %s",!!t),r=r||this.noop;let n=e;if("publish"===n.cmd){n=(0,l.default)(e);let r=this._removeTopicAliasAndRecoverTopicName(n);if(r)return t&&t(r)}let o=n.qos||0;0===o&&this.queueQoSZero||"publish"!==n.cmd?this.queue.push({packet:n,cb:t}):o>0?(t=this.outgoing[n.messageId]?this.outgoing[n.messageId].cb:null,this.outgoingStore.put(n,e=>{if(e)return t&&t(e);r()})):t&&t(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new b.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(e=!1){this.keepaliveManager&&this.options.keepalive&&(e||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let e=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&e.length>0)if(this.options.resubscribe)if(5===this.options.protocolVersion){this.log("_resubscribe: protocolVersion 5");for(let t=0;t<e.length;t++){let r={};r[e[t]]=this._resubscribeTopics[e[t]],r.resubscribe=!0,this.subscribe(r,{properties:r[e[t]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(e){if(this.disconnected)return void this.emit("connect",e);this.connackPacket=e,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let t=()=>{let r=this.outgoingStore.createStream(),n=()=>{r.destroy(),r=null,this._flushStoreProcessingQueue(),o()},o=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",n),r.on("error",e=>{o(),this._flushStoreProcessingQueue(),this.removeListener("close",n),this.emit("error",e)});let i=()=>{if(!r)return;let e,t=r.read(1);t?(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[t.messageId]?i():this.disconnecting||this.reconnectTimer?r.destroy&&r.destroy():(e=this.outgoing[t.messageId]?this.outgoing[t.messageId].cb:null,this.outgoing[t.messageId]={volatile:!1,cb(t,r){e&&e(t,r),i()}},this._packetIdsDuringStoreProcessing[t.messageId]=!0,this.messageIdProvider.register(t.messageId)?this._sendPacket(t,void 0,void 0,!0):this.log("messageId: %d has already used.",t.messageId))):r.once("readable",i)};r.on("end",()=>{let r=!0;for(let e in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[e]){r=!1;break}this.removeListener("close",n),r?(o(),this._invokeAllStoreProcessingQueue(),this.emit("connect",e)):t()}),i()};t()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let e=this._storeProcessingQueue[0];if(e&&e.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let e of this._storeProcessingQueue)e.cbStorePut&&e.cbStorePut(new Error("Connection closed")),e.callback&&e.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(e,t){delete this.outgoing[e],this.outgoingStore.del({messageId:e},(r,n)=>{t(r,n),this.messageIdProvider.deallocate(e),this._invokeStoreProcessingQueue()})}};e.default=S}),Pn=h(e=>{d(),at(),He(),Object.defineProperty(e,"__esModule",{value:!0});var t=Wr();e.default=class{numberAllocator;lastId;constructor(){this.numberAllocator=new t.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(e){return this.numberAllocator.use(e)}deallocate(e){this.numberAllocator.free(e)}clear(){this.numberAllocator.clear()}}}),kn=u(()=>{d(),at(),He(),St={},Et=!1,(At=function(){if(Et)return St;Et=!0;let e=2147483647,t=36,r=/^xn--/,n=/[^\0-\x7F]/,o=/[\x2E\u3002\uFF0E\uFF61]/g,i={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},s=Math.floor,a=String.fromCharCode;function l(e){throw new RangeError(i[e])}function c(e,t){let r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]);let i=function(e,t){let r=[],n=e.length;for(;n--;)r[n]=t(e[n]);return r}((e=e.replace(o,".")).split("."),t).join(".");return n+i}function u(e){let t=[],r=0,n=e.length;for(;r<n;){let o=e.charCodeAt(r++);if(o>=55296&&o<=56319&&r<n){let n=e.charCodeAt(r++);56320==(64512&n)?t.push(((1023&o)<<10)+(1023&n)+65536):(t.push(o),r--)}else t.push(o)}return t}let h=function(e){return e>=48&&e<58?e-48+26:e>=65&&e<91?e-65:e>=97&&e<123?e-97:t},f=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},p=function(e,r,n){let o=0;for(e=n?s(e/700):e>>1,e+=s(e/r);e>455;o+=t)e=s(e/35);return s(o+36*e/(e+38))},d=function(r){let n=[],o=r.length,i=0,a=128,c=72,u=r.lastIndexOf("-");u<0&&(u=0);for(let e=0;e<u;++e)r.charCodeAt(e)>=128&&l("not-basic"),n.push(r.charCodeAt(e));for(let f=u>0?u+1:0;f<o;){let u=i;for(let n=1,a=t;;a+=t){f>=o&&l("invalid-input");let u=h(r.charCodeAt(f++));u>=t&&l("invalid-input"),u>s((e-i)/n)&&l("overflow"),i+=u*n;let p=a<=c?1:a>=c+26?26:a-c;if(u<p)break;let d=t-p;n>s(e/d)&&l("overflow"),n*=d}let d=n.length+1;c=p(i-u,d,0==u),s(i/d)>e-a&&l("overflow"),a+=s(i/d),i%=d,n.splice(i++,0,a)}return String.fromCodePoint(...n)},m=function(r){let n=[],o=(r=u(r)).length,i=128,c=0,h=72;for(let e of r)e<128&&n.push(a(e));let d=n.length,m=d;for(d&&n.push("-");m<o;){let o=e;for(let e of r)e>=i&&e<o&&(o=e);let u=m+1;o-i>s((e-c)/u)&&l("overflow"),c+=(o-i)*u,i=o;for(let o of r)if(o<i&&++c>e&&l("overflow"),o===i){let e=c;for(let r=t;;r+=t){let o=r<=h?1:r>=h+26?26:r-h;if(e<o)break;let i=e-o,l=t-o;n.push(a(f(o+i%l,0))),e=s(i/l)}n.push(a(f(e,0))),h=p(c,u,m===d),c=0,++m}++c,++i}return n.join("")};return St={version:"2.3.1",ucs2:{decode:u,encode:e=>String.fromCodePoint(...e)},decode:d,encode:m,toASCII:function(e){return c(e,function(e){return n.test(e)?"xn--"+m(e):e})},toUnicode:function(e){return c(e,function(e){return r.test(e)?d(e.slice(4).toLowerCase()):e})}}}()).decode,At.encode,At.toASCII,At.toUnicode,At.ucs2,At.version});function xn(){return Hn||(Hn=!0,zn=SyntaxError),zn}function On(){return Gn||(Gn=!0,Kn=TypeError),Kn}function $n(){if(oo)return no;oo=!0;var e=function(){if(ro)return to;ro=!0;var e=Object.prototype.toString,t=Math.max,r=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var o=0;o<t.length;o+=1)r[o+e.length]=t[o];return r};return to=function(n){var o=this;if("function"!=typeof o||"[object Function]"!==e.apply(o))throw new TypeError("Function.prototype.bind called on incompatible "+o);for(var i,s=function(e){for(var t=[],r=1,n=0;r<e.length;r+=1,n+=1)t[n]=e[r];return t}(arguments),a=t(0,o.length-s.length),l=[],c=0;c<a;c++)l[c]="$"+c;if(i=Function("binder","return function ("+function(e){for(var t="",r=0;r<e.length;r+=1)t+=e[r],r+1<e.length&&(t+=",");return t}(l)+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof i){var e=o.apply(this,r(s,arguments));return Object(e)===e?e:this}return o.apply(n,r(s,arguments))}),o.prototype){var u=function(){};u.prototype=o.prototype,i.prototype=new u,u.prototype=null}return i},to}();return no=Function.prototype.bind||e}function Tn(){if(lo)return ao;lo=!0;var e,t=(Ln||(Ln=!0,Bn=Error),Bn),r=(Dn||(Dn=!0,Un=EvalError),Un),n=(Wn||(Wn=!0,Fn=RangeError),Fn),o=(Vn||(Vn=!0,qn=ReferenceError),qn),i=xn(),s=On(),a=(Jn||(Jn=!0,Qn=URIError),Qn),l=Function,c=function(e){try{return l('"use strict"; return ('+e+").constructor;")()}catch{}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch{u=null}var h=function(){throw new s},f=u?function(){try{return h}catch{try{return u(arguments,"callee").get}catch{return h}}}():h,p=function(){if(Xn)return Yn;Xn=!0;var e=typeof Symbol<"u"&&Symbol,t=(Mn||(Mn=!0,Nn=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t||"[object Symbol]"!==Object.prototype.toString.call(t)||"[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}),Nn);return Yn=function(){return"function"==typeof e&&"function"==typeof Symbol&&"symbol"==typeof e("foo")&&"symbol"==typeof Symbol("bar")&&t()}}()(),d=function(){if(eo)return Zn;eo=!0;var e={__proto__:null,foo:{}},t=Object;return Zn=function(){return{__proto__:e}.foo===e.foo&&!(e instanceof t)}}()(),m=Object.getPrototypeOf||(d?function(e){return e.__proto__}:null),g={},y=typeof Uint8Array>"u"||!m?e:m(Uint8Array),b={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?e:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?e:ArrayBuffer,"%ArrayIteratorPrototype%":p&&m?m([][Symbol.iterator]()):e,"%AsyncFromSyncIteratorPrototype%":e,"%AsyncFunction%":g,"%AsyncGenerator%":g,"%AsyncGeneratorFunction%":g,"%AsyncIteratorPrototype%":g,"%Atomics%":typeof Atomics>"u"?e:Atomics,"%BigInt%":typeof BigInt>"u"?e:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?e:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?e:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?e:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":r,"%Float32Array%":typeof Float32Array>"u"?e:Float32Array,"%Float64Array%":typeof Float64Array>"u"?e:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?e:FinalizationRegistry,"%Function%":l,"%GeneratorFunction%":g,"%Int8Array%":typeof Int8Array>"u"?e:Int8Array,"%Int16Array%":typeof Int16Array>"u"?e:Int16Array,"%Int32Array%":typeof Int32Array>"u"?e:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":p&&m?m(m([][Symbol.iterator]())):e,"%JSON%":"object"==typeof JSON?JSON:e,"%Map%":typeof Map>"u"?e:Map,"%MapIteratorPrototype%":typeof Map>"u"||!p||!m?e:m((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?e:Promise,"%Proxy%":typeof Proxy>"u"?e:Proxy,"%RangeError%":n,"%ReferenceError%":o,"%Reflect%":typeof Reflect>"u"?e:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?e:Set,"%SetIteratorPrototype%":typeof Set>"u"||!p||!m?e:m((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?e:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":p&&m?m(""[Symbol.iterator]()):e,"%Symbol%":p?Symbol:e,"%SyntaxError%":i,"%ThrowTypeError%":f,"%TypedArray%":y,"%TypeError%":s,"%Uint8Array%":typeof Uint8Array>"u"?e:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?e:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?e:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?e:Uint32Array,"%URIError%":a,"%WeakMap%":typeof WeakMap>"u"?e:WeakMap,"%WeakRef%":typeof WeakRef>"u"?e:WeakRef,"%WeakSet%":typeof WeakSet>"u"?e:WeakSet};if(m)try{null.error}catch(e){var _=m(m(e));b["%Error.prototype%"]=_}var v=function e(t){var r;if("%AsyncFunction%"===t)r=c("async function () {}");else if("%GeneratorFunction%"===t)r=c("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=c("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&m&&(r=m(o.prototype))}return b[t]=r,r},w={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},S=$n(),E=function(){if(so)return io;so=!0;var e=Function.prototype.call,t=Object.prototype.hasOwnProperty,r=$n();return io=r.call(e,t)}(),A=S.call(Function.call,Array.prototype.concat),I=S.call(Function.apply,Array.prototype.splice),P=S.call(Function.call,String.prototype.replace),k=S.call(Function.call,String.prototype.slice),x=S.call(Function.call,RegExp.prototype.exec),O=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,$=/\\(\\)?/g,T=function(e,t){var r,n=e;if(E(w,n)&&(n="%"+(r=w[n])[0]+"%"),E(b,n)){var o=b[n];if(o===g&&(o=v(n)),typeof o>"u"&&!t)throw new s("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new i("intrinsic "+e+" does not exist!")};return ao=function(e,t){if("string"!=typeof e||0===e.length)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new s('"allowMissing" argument must be a boolean');if(null===x(/^%?[^%]*%?$/,e))throw new i("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(e){var t=k(e,0,1),r=k(e,-1);if("%"===t&&"%"!==r)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new i("invalid intrinsic syntax, expected opening `%`");var n=[];return P(e,O,function(e,t,r,o){n[n.length]=r?P(o,$,"$1"):t||e}),n}(e),n=r.length>0?r[0]:"",o=T("%"+n+"%",t),a=o.name,l=o.value,c=!1,h=o.alias;h&&(n=h[0],I(r,A([0,1],h)));for(var f=1,p=!0;f<r.length;f+=1){var d=r[f],m=k(d,0,1),g=k(d,-1);if(('"'===m||"'"===m||"`"===m||'"'===g||"'"===g||"`"===g)&&m!==g)throw new i("property names with quotes must have matching quotes");if(("constructor"===d||!p)&&(c=!0),E(b,a="%"+(n+="."+d)+"%"))l=b[a];else if(null!=l){if(!(d in l)){if(!t)throw new s("base intrinsic for "+e+" exists, but the property is not available.");return}if(u&&f+1>=r.length){var y=u(l,d);l=(p=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:l[d]}else p=E(l,d),l=l[d];p&&!c&&(b[a]=l)}}return l},ao}function Cn(){if(uo)return co;uo=!0;var e=Tn()("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return co=e}function jn(){if(fo)return ho;fo=!0;var e=Tn()("%Object.getOwnPropertyDescriptor%",!0);if(e)try{e([],"length")}catch{e=null}return ho=e}function Rn(){if(Eo)return So;Eo=!0;var e=Tn(),t=function(){if(wo)return vo;wo=!0;var e=$n(),t=Tn(),r=function(){if(_o)return bo;_o=!0;var e=Tn(),t=function(){if(mo)return po;mo=!0;var e=Cn(),t=xn(),r=On(),n=jn();return po=function(o,i,s){if(!o||"object"!=typeof o&&"function"!=typeof o)throw new r("`obj` must be an object or a function`");if("string"!=typeof i&&"symbol"!=typeof i)throw new r("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new r("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new r("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new r("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new r("`loose`, if provided, must be a boolean");var a=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,c=arguments.length>5?arguments[5]:null,u=arguments.length>6&&arguments[6],h=!!n&&n(o,i);if(e)e(o,i,{configurable:null===c&&h?h.configurable:!c,enumerable:null===a&&h?h.enumerable:!a,value:s,writable:null===l&&h?h.writable:!l});else{if(!u&&(a||l||c))throw new t("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");o[i]=s}},po}(),r=function(){if(yo)return go;yo=!0;var e=Cn(),t=function(){return!!e};return t.hasArrayLengthDefineBug=function(){if(!e)return null;try{return 1!==e([],"length",{value:1}).length}catch{return!0}},go=t}()(),n=jn(),o=On(),i=e("%Math.floor%");return bo=function(e,s){if("function"!=typeof e)throw new o("`fn` is not a function");if("number"!=typeof s||s<0||s>4294967295||i(s)!==s)throw new o("`length` must be a positive 32-bit integer");var a=arguments.length>2&&!!arguments[2],l=!0,c=!0;if("length"in e&&n){var u=n(e,"length");u&&!u.configurable&&(l=!1),u&&!u.writable&&(c=!1)}return(l||c||!a)&&(r?t(e,"length",s,!0,!0):t(e,"length",s)),e},bo}(),n=On(),o=t("%Function.prototype.apply%"),i=t("%Function.prototype.call%"),s=t("%Reflect.apply%",!0)||e.call(i,o),a=Cn(),l=t("%Math.max%");vo=function(t){if("function"!=typeof t)throw new n("a function is required");var o=s(e,i,arguments);return r(o,1+l(0,t.length-(arguments.length-1)),!0)};var c=function(){return s(e,o,arguments)};return a?a(vo,"apply",{value:c}):vo.apply=c,vo}(),r=t(e("String.prototype.indexOf"));return So=function(n,o){var i=e(n,!!o);return"function"==typeof i&&r(n,".prototype.")>-1?t(i):i}}var Nn,Mn,Bn,Ln,Un,Dn,Fn,Wn,qn,Vn,zn,Hn,Kn,Gn,Qn,Jn,Yn,Xn,Zn,eo,to,ro,no,oo,io,so,ao,lo,co,uo,ho,fo,po,mo,go,yo,bo,_o,vo,wo,So,Eo,Ao=u(()=>{d(),at(),He(),Nn={},Mn=!1,Bn={},Ln=!1,Un={},Dn=!1,Fn={},Wn=!1,qn={},Vn=!1,zn={},Hn=!1,Kn={},Gn=!1,Qn={},Jn=!1,Yn={},Xn=!1,Zn={},eo=!1,to={},ro=!1,no={},oo=!1,io={},so=!1,ao={},lo=!1,co={},uo=!1,ho={},fo=!1,po={},mo=!1,go={},yo=!1,bo={},_o=!1,vo={},wo=!1,So={},Eo=!1});function Io(e){throw new Error("Node.js process "+e+" is not supported by JSPM core outside of Node.js")}function Po(){!Wo||!qo||(Wo=!1,qo.length?Fo=qo.concat(Fo):Vo=-1,Fo.length&&ko())}function ko(){if(!Wo){var e=setTimeout(Po,0);Wo=!0;for(var t=Fo.length;t;){for(qo=Fo,Fo=[];++Vo<t;)qo&&qo[Vo].run();Vo=-1,t=Fo.length}qo=null,Wo=!1,clearTimeout(e)}}function xo(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];Fo.push(new Oo(e,t)),1===Fo.length&&!Wo&&setTimeout(ko,0)}function Oo(e,t){this.fun=e,this.array=t}function $o(){}function To(e){Io("_linkedBinding")}function Co(e){Io("dlopen")}function jo(){return[]}function Ro(){return[]}function No(e,t){if(!e)throw new Error(t||"assertion error")}function Mo(){return!1}function Bo(){return Ii.now()/1e3}function Lo(e){var t=Math.floor(.001*(Date.now()-Ii.now())),r=.001*Ii.now(),n=Math.floor(r)+t,o=Math.floor(r%1*1e9);return e&&(n-=e[0],(o-=e[1])<0&&(n--,o+=ki)),[n,o]}function Uo(){return xi}function Do(e){return[]}var Fo,Wo,qo,Vo,zo,Ho,Ko,Go,Qo,Jo,Yo,Xo,Zo,ei,ti,ri,ni,oi,ii,si,ai,li,ci,ui,hi,fi,pi,di,mi,gi,yi,bi,_i,vi,wi,Si,Ei,Ai,Ii,Pi,ki,xi,Oi,$i,Ti,Ci=u(()=>{d(),at(),He(),Fo=[],Wo=!1,Vo=-1,Oo.prototype.run=function(){this.fun.apply(null,this.array)},zo={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},Ho=["/usr/bin/node"],Ko=[],Go={},Qo=function(e,t){console.warn((t?t+": ":"")+e)},Jo=function(e){Io("binding")},Yo=function(e){return 0},Xo=function(){return"/"},Zo=function(e){},ei={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},ti=$o,ri=[],ni={},oi={},ii=$o,si=$o,li=ai=function(){return{}},ci=ai,ui=$o,hi=$o,fi=$o,pi={},di={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},mi=$o,gi=$o,yi=$o,bi=$o,_i=$o,vi=$o,wi=$o,Si=$o,Ei=[],Ai=$o,void 0===(Ii={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0}).now&&(Pi=Date.now(),Ii.timing&&Ii.timing.navigationStart&&(Pi=Ii.timing.navigationStart),Ii.now=()=>Date.now()-Pi),ki=1e9,Lo.bigint=function(e){var t=Lo(e);return typeof BigInt>"u"?t[0]*ki+t[1]:BigInt(t[0]*ki)+BigInt(t[1])},xi={version:"v16.8.0",versions:Go,arch:"x64",platform:"browser",release:ei,_rawDebug:ti,moduleLoadList:ri,binding:Jo,_linkedBinding:To,_events:{},_eventsCount:0,_maxListeners:10,on:Uo,addListener:Uo,once:Uo,off:Uo,removeListener:Uo,removeAllListeners:Uo,emit:$o,prependListener:Uo,prependOnceListener:Uo,listeners:Do,domain:ni,_exiting:!1,config:oi,dlopen:Co,uptime:Bo,_getActiveRequests:jo,_getActiveHandles:Ro,reallyExit:ii,_kill:si,cpuUsage:ai,resourceUsage:li,memoryUsage:ci,kill:ui,exit:hi,openStdin:fi,allowedNodeEnvironmentFlags:pi,assert:No,features:di,_fatalExceptions:mi,setUncaughtExceptionCaptureCallback:gi,hasUncaughtExceptionCaptureCallback:Mo,emitWarning:Qo,nextTick:xo,_tickCallback:yi,_debugProcess:bi,_debugEnd:_i,_startProfilerIdleNotifier:vi,_stopProfilerIdleNotifier:wi,stdout:void 0,stdin:void 0,stderr:void 0,abort:Si,umask:Yo,chdir:Zo,cwd:Xo,env:zo,title:"browser",argv:Ho,execArgv:Ko,pid:2,ppid:1,execPath:"/bin/usr/node",debugPort:9229,hrtime:Lo,argv0:"node",_preload_modules:Ei,setSourceMapsEnabled:Ai}}),ji=u(()=>{d(),at(),He(),Ci(),Oi={},$i=!1,Ti=function(){if($i)return Oi;$i=!0;var e=xi;function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function r(e,t){for(var r,n="",o=0,i=-1,s=0,a=0;a<=e.length;++a){if(a<e.length)r=e.charCodeAt(a);else{if(47===r)break;r=47}if(47===r){if(i!==a-1&&1!==s)if(i!==a-1&&2===s){if(n.length<2||2!==o||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){-1===l?(n="",o=0):o=(n=n.slice(0,l)).length-1-n.lastIndexOf("/"),i=a,s=0;continue}}else if(2===n.length||1===n.length){n="",o=0,i=a,s=0;continue}t&&(n.length>0?n+="/..":n="..",o=2)}else n.length>0?n+="/"+e.slice(i+1,a):n=e.slice(i+1,a),o=a-i-1;i=a,s=0}else 46===r&&-1!==s?++s:s=-1}return n}var n={resolve:function(){for(var n,o="",i=!1,s=arguments.length-1;s>=-1&&!i;s--){var a;s>=0?a=arguments[s]:(void 0===n&&(n=e.cwd()),a=n),t(a),0!==a.length&&(o=a+"/"+o,i=47===a.charCodeAt(0))}return o=r(o,!i),i?o.length>0?"/"+o:"/":o.length>0?o:"."},normalize:function(e){if(t(e),0===e.length)return".";var n=47===e.charCodeAt(0),o=47===e.charCodeAt(e.length-1);return 0===(e=r(e,!n)).length&&!n&&(e="."),e.length>0&&o&&(e+="/"),n?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,r=0;r<arguments.length;++r){var o=arguments[r];t(o),o.length>0&&(void 0===e?e=o:e+="/"+o)}return void 0===e?".":n.normalize(e)},relative:function(e,r){if(t(e),t(r),e===r||(e=n.resolve(e))===(r=n.resolve(r)))return"";for(var o=1;o<e.length&&47===e.charCodeAt(o);++o);for(var i=e.length,s=i-o,a=1;a<r.length&&47===r.charCodeAt(a);++a);for(var l=r.length-a,c=s<l?s:l,u=-1,h=0;h<=c;++h){if(h===c){if(l>c){if(47===r.charCodeAt(a+h))return r.slice(a+h+1);if(0===h)return r.slice(a+h)}else s>c&&(47===e.charCodeAt(o+h)?u=h:0===h&&(u=0));break}var f=e.charCodeAt(o+h);if(f!==r.charCodeAt(a+h))break;47===f&&(u=h)}var p="";for(h=o+u+1;h<=i;++h)(h===i||47===e.charCodeAt(h))&&(0===p.length?p+="..":p+="/..");return p.length>0?p+r.slice(a+u):(a+=u,47===r.charCodeAt(a)&&++a,r.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var r=e.charCodeAt(0),n=47===r,o=-1,i=!0,s=e.length-1;s>=1;--s)if(47===(r=e.charCodeAt(s))){if(!i){o=s;break}}else i=!1;return-1===o?n?"/":".":n&&1===o?"//":e.slice(0,o)},basename:function(e,r){if(void 0!==r&&"string"!=typeof r)throw new TypeError('"ext" argument must be a string');t(e);var n,o=0,i=-1,s=!0;if(void 0!==r&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var a=r.length-1,l=-1;for(n=e.length-1;n>=0;--n){var c=e.charCodeAt(n);if(47===c){if(!s){o=n+1;break}}else-1===l&&(s=!1,l=n+1),a>=0&&(c===r.charCodeAt(a)?-1===--a&&(i=n):(a=-1,i=l))}return o===i?i=l:-1===i&&(i=e.length),e.slice(o,i)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!s){o=n+1;break}}else-1===i&&(s=!1,i=n+1);return-1===i?"":e.slice(o,i)},extname:function(e){t(e);for(var r=-1,n=0,o=-1,i=!0,s=0,a=e.length-1;a>=0;--a){var l=e.charCodeAt(a);if(47!==l)-1===o&&(i=!1,o=a+1),46===l?-1===r?r=a:1!==s&&(s=1):-1!==r&&(s=-1);else if(!i){n=a+1;break}}return-1===r||-1===o||0===s||1===s&&r===o-1&&r===n+1?"":e.slice(r,o)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var r=t.dir||t.root,n=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+n:r+"/"+n:n}(0,e)},parse:function(e){t(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return r;var n,o=e.charCodeAt(0),i=47===o;i?(r.root="/",n=1):n=0;for(var s=-1,a=0,l=-1,c=!0,u=e.length-1,h=0;u>=n;--u)if(47!==(o=e.charCodeAt(u)))-1===l&&(c=!1,l=u+1),46===o?-1===s?s=u:1!==h&&(h=1):-1!==s&&(h=-1);else if(!c){a=u+1;break}return-1===s||-1===l||0===h||1===h&&s===l-1&&s===a+1?-1!==l&&(r.base=r.name=0===a&&i?e.slice(1,l):e.slice(a,l)):(0===a&&i?(r.name=e.slice(1,s),r.base=e.slice(1,l)):(r.name=e.slice(a,s),r.base=e.slice(a,l)),r.ext=e.slice(s,l)),a>0?r.dir=e.slice(0,a-1):i&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};return n.posix=n,Oi=n}()}),Ri={};function Ni(){if(Vi)return qi;Vi=!0;var e="function"==typeof Map&&Map.prototype,t=Object.getOwnPropertyDescriptor&&e?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,r=e&&t&&"function"==typeof t.get?t.get:null,n=e&&Map.prototype.forEach,o="function"==typeof Set&&Set.prototype,i=Object.getOwnPropertyDescriptor&&o?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,s=o&&i&&"function"==typeof i.get?i.get:null,a=o&&Set.prototype.forEach,l="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,c="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,u="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,h=Boolean.prototype.valueOf,f=Object.prototype.toString,p=Function.prototype.toString,d=String.prototype.match,m=String.prototype.slice,g=String.prototype.replace,y=String.prototype.toUpperCase,b=String.prototype.toLowerCase,_=RegExp.prototype.test,v=Array.prototype.concat,w=Array.prototype.join,S=Array.prototype.slice,E=Math.floor,A="function"==typeof BigInt?BigInt.prototype.valueOf:null,I=Object.getOwnPropertySymbols,P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,k="function"==typeof Symbol&&"object"==typeof Symbol.iterator,x="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol.toStringTag,1)?Symbol.toStringTag:null,O=Object.prototype.propertyIsEnumerable,$=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function T(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||_.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var n=e<0?-E(-e):E(e);if(n!==e){var o=String(n),i=m.call(t,o.length+1);return g.call(o,r,"$&_")+"."+g.call(g.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return g.call(t,r,"$&_")}var C=Wi,j=C.custom,R=U(j)?j:null;function N(e,t,r){var n="double"===(r.quoteStyle||t)?'"':"'";return n+e+n}function M(e){return g.call(String(e),/"/g,"&quot;")}function B(e){return!("[object Array]"!==W(e)||x&&"object"==typeof e&&x in e)}function L(e){return!("[object RegExp]"!==W(e)||x&&"object"==typeof e&&x in e)}function U(e){if(k)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!P)return!1;try{return P.call(e),!0}catch{}return!1}qi=function e(t,o,i,f){var y=o||{};if(F(y,"quoteStyle")&&"single"!==y.quoteStyle&&"double"!==y.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(F(y,"maxStringLength")&&("number"==typeof y.maxStringLength?y.maxStringLength<0&&y.maxStringLength!==1/0:null!==y.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var _=!F(y,"customInspect")||y.customInspect;if("boolean"!=typeof _&&"symbol"!==_)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(F(y,"indent")&&null!==y.indent&&"\t"!==y.indent&&!(parseInt(y.indent,10)===y.indent&&y.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(F(y,"numericSeparator")&&"boolean"!=typeof y.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var E=y.numericSeparator;if(typeof t>"u")return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return V(t,y);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var I=String(t);return E?T(t,I):I}if("bigint"==typeof t){var j=String(t)+"n";return E?T(t,j):j}var D=typeof y.depth>"u"?5:y.depth;if(typeof i>"u"&&(i=0),i>=D&&D>0&&"object"==typeof t)return B(t)?"[Array]":"[Object]";var z=function(e,t){var r;if("\t"===e.indent)r="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;r=w.call(Array(e.indent+1)," ")}return{base:r,prev:w.call(Array(t+1),r)}}(y,i);if(typeof f>"u")f=[];else if(q(f,t)>=0)return"[Circular]";function Y(t,r,n){if(r&&(f=S.call(f)).push(r),n){var o={depth:y.depth};return F(y,"quoteStyle")&&(o.quoteStyle=y.quoteStyle),e(t,o,i+1,f)}return e(t,y,i+1,f)}if("function"==typeof t&&!L(t)){var X=function(e){if(e.name)return e.name;var t=d.call(p.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),Z=J(t,Y);return"[Function"+(X?": "+X:" (anonymous)")+"]"+(Z.length>0?" { "+w.call(Z,", ")+" }":"")}if(U(t)){var ee=k?g.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):P.call(t);return"object"!=typeof t||k?ee:H(ee)}if(function(e){return!(!e||"object"!=typeof e)&&(typeof HTMLElement<"u"&&e instanceof HTMLElement||"string"==typeof e.nodeName&&"function"==typeof e.getAttribute)}(t)){for(var te="<"+b.call(String(t.nodeName)),re=t.attributes||[],ne=0;ne<re.length;ne++)te+=" "+re[ne].name+"="+N(M(re[ne].value),"double",y);return te+=">",t.childNodes&&t.childNodes.length&&(te+="..."),te+"</"+b.call(String(t.nodeName))+">"}if(B(t)){if(0===t.length)return"[]";var oe=J(t,Y);return z&&!function(e){for(var t=0;t<e.length;t++)if(q(e[t],"\n")>=0)return!1;return!0}(oe)?"["+Q(oe,z)+"]":"[ "+w.call(oe,", ")+" ]"}if(function(e){return!("[object Error]"!==W(e)||x&&"object"==typeof e&&x in e)}(t)){var ie=J(t,Y);return"cause"in Error.prototype||!("cause"in t)||O.call(t,"cause")?0===ie.length?"["+String(t)+"]":"{ ["+String(t)+"] "+w.call(ie,", ")+" }":"{ ["+String(t)+"] "+w.call(v.call("[cause]: "+Y(t.cause),ie),", ")+" }"}if("object"==typeof t&&_){if(R&&"function"==typeof t[R]&&C)return C(t,{depth:D-i});if("symbol"!==_&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!r||!e||"object"!=typeof e)return!1;try{r.call(e);try{s.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}(t)){var se=[];return n&&n.call(t,function(e,r){se.push(Y(r,t,!0)+" => "+Y(e,t))}),G("Map",r.call(t),se,z)}if(function(e){if(!s||!e||"object"!=typeof e)return!1;try{s.call(e);try{r.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}(t)){var ae=[];return a&&a.call(t,function(e){ae.push(Y(e,t))}),G("Set",s.call(t),ae,z)}if(function(e){if(!l||!e||"object"!=typeof e)return!1;try{l.call(e,l);try{c.call(e,c)}catch{return!0}return e instanceof WeakMap}catch{}return!1}(t))return K("WeakMap");if(function(e){if(!c||!e||"object"!=typeof e)return!1;try{c.call(e,c);try{l.call(e,l)}catch{return!0}return e instanceof WeakSet}catch{}return!1}(t))return K("WeakSet");if(function(e){if(!u||!e||"object"!=typeof e)return!1;try{return u.call(e),!0}catch{}return!1}(t))return K("WeakRef");if(function(e){return!("[object Number]"!==W(e)||x&&"object"==typeof e&&x in e)}(t))return H(Y(Number(t)));if(function(e){if(!e||"object"!=typeof e||!A)return!1;try{return A.call(e),!0}catch{}return!1}(t))return H(Y(A.call(t)));if(function(e){return!("[object Boolean]"!==W(e)||x&&"object"==typeof e&&x in e)}(t))return H(h.call(t));if(function(e){return!("[object String]"!==W(e)||x&&"object"==typeof e&&x in e)}(t))return H(Y(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(typeof globalThis<"u"&&t===globalThis||typeof zi<"u"&&t===zi)return"{ [object globalThis] }";if(!function(e){return!("[object Date]"!==W(e)||x&&"object"==typeof e&&x in e)}(t)&&!L(t)){var le=J(t,Y),ce=$?$(t)===Object.prototype:t instanceof Object||t.constructor===Object,ue=t instanceof Object?"":"null prototype",he=!ce&&x&&Object(t)===t&&x in t?m.call(W(t),8,-1):ue?"Object":"",fe=(ce||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(he||ue?"["+w.call(v.call([],he||[],ue||[]),": ")+"] ":"");return 0===le.length?fe+"{}":z?fe+"{"+Q(le,z)+"}":fe+"{ "+w.call(le,", ")+" }"}return String(t)};var D=Object.prototype.hasOwnProperty||function(e){return e in(this||zi)};function F(e,t){return D.call(e,t)}function W(e){return f.call(e)}function q(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function V(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return V(m.call(e,0,t.maxStringLength),t)+n}return N(g.call(g.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,z),"single",t)}function z(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+y.call(t.toString(16))}function H(e){return"Object("+e+")"}function K(e){return e+" { ? }"}function G(e,t,r,n){return e+" ("+t+") {"+(n?Q(r,n):w.call(r,", "))+"}"}function Q(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+w.call(e,","+r)+"\n"+t.prev}function J(e,t){var r=B(e),n=[];if(r){n.length=e.length;for(var o=0;o<e.length;o++)n[o]=F(e,o)?t(e[o],e):""}var i,s="function"==typeof I?I(e):[];if(k){i={};for(var a=0;a<s.length;a++)i["$"+s[a]]=s[a]}for(var l in e)F(e,l)&&(r&&String(Number(l))===l&&l<e.length||k&&i["$"+l]instanceof Symbol||(_.call(/[^\w$]/,l)?n.push(t(l,e)+": "+t(e[l],e)):n.push(l+": "+t(e[l],e))));if("function"==typeof I)for(var c=0;c<s.length;c++)O.call(e,s[c])&&n.push("["+t(s[c])+"]: "+t(e[s[c]],e));return n}return qi}function Mi(){if(Qi)return Gi;Qi=!0;var e=String.prototype.replace,t=/%20/g,r="RFC3986";return Gi={default:r,formatters:{RFC1738:function(r){return e.call(r,t,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:r}}function Bi(){if(Yi)return Ji;Yi=!0;var e=Mi(),t=Object.prototype.hasOwnProperty,r=Array.isArray,n=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),o=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)typeof e[n]<"u"&&(r[n]=e[n]);return r},i=1024;return Ji={arrayToObject:o,assign:function(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],o=0;o<t.length;++o)for(var i=t[o],s=i.obj[i.prop],a=Object.keys(s),l=0;l<a.length;++l){var c=a[l],u=s[c];"object"==typeof u&&null!==u&&-1===n.indexOf(u)&&(t.push({obj:s,prop:c}),n.push(u))}return function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(r(n)){for(var o=[],i=0;i<n.length;++i)typeof n[i]<"u"&&o.push(n[i]);t.obj[t.prop]=o}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},encode:function(t,r,o,s,a){if(0===t.length)return t;var l=t;if("symbol"==typeof t?l=Symbol.prototype.toString.call(t):"string"!=typeof t&&(l=String(t)),"iso-8859-1"===o)return escape(l).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var c="",u=0;u<l.length;u+=i){for(var h=l.length>=i?l.slice(u,u+i):l,f=[],p=0;p<h.length;++p){var d=h.charCodeAt(p);45===d||46===d||95===d||126===d||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||a===e.RFC1738&&(40===d||41===d)?f[f.length]=h.charAt(p):d<128?f[f.length]=n[d]:d<2048?f[f.length]=n[192|d>>6]+n[128|63&d]:d<55296||d>=57344?f[f.length]=n[224|d>>12]+n[128|d>>6&63]+n[128|63&d]:(p+=1,d=65536+((1023&d)<<10|1023&h.charCodeAt(p)),f[f.length]=n[240|d>>18]+n[128|d>>12&63]+n[128|d>>6&63]+n[128|63&d])}c+=f.join("")}return c},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(r(e)){for(var n=[],o=0;o<e.length;o+=1)n.push(t(e[o]));return n}return t(e)},merge:function e(n,i,s){if(!i)return n;if("object"!=typeof i){if(r(n))n.push(i);else{if(!n||"object"!=typeof n)return[n,i];(s&&(s.plainObjects||s.allowPrototypes)||!t.call(Object.prototype,i))&&(n[i]=!0)}return n}if(!n||"object"!=typeof n)return[n].concat(i);var a=n;return r(n)&&!r(i)&&(a=o(n,s)),r(n)&&r(i)?(i.forEach(function(r,o){if(t.call(n,o)){var i=n[o];i&&"object"==typeof i&&r&&"object"==typeof r?n[o]=e(i,r,s):n.push(r)}else n[o]=r}),n):Object.keys(i).reduce(function(r,n){var o=i[n];return t.call(r,n)?r[n]=e(r[n],o,s):r[n]=o,r},a)}}}function Li(){if(Zi)return Xi;Zi=!0;var e=function(){if(Ki)return Hi;Ki=!0;var e=Tn(),t=Rn(),r=Ni(),n=On(),o=e("%WeakMap%",!0),i=e("%Map%",!0),s=t("WeakMap.prototype.get",!0),a=t("WeakMap.prototype.set",!0),l=t("WeakMap.prototype.has",!0),c=t("Map.prototype.get",!0),u=t("Map.prototype.set",!0),h=t("Map.prototype.has",!0),f=function(e,t){for(var r,n=e;null!==(r=n.next);n=r)if(r.key===t)return n.next=r.next,r.next=e.next,e.next=r,r};return Hi=function(){var e,t,p,d={assert:function(e){if(!d.has(e))throw new n("Side channel does not contain "+r(e))},get:function(r){if(o&&r&&("object"==typeof r||"function"==typeof r)){if(e)return s(e,r)}else if(i){if(t)return c(t,r)}else if(p)return function(e,t){var r=f(e,t);return r&&r.value}(p,r)},has:function(r){if(o&&r&&("object"==typeof r||"function"==typeof r)){if(e)return l(e,r)}else if(i){if(t)return h(t,r)}else if(p)return function(e,t){return!!f(e,t)}(p,r);return!1},set:function(r,n){o&&r&&("object"==typeof r||"function"==typeof r)?(e||(e=new o),a(e,r,n)):i?(t||(t=new i),u(t,r,n)):(p||(p={key:{},next:null}),function(e,t,r){var n=f(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}}(p,r,n))}};return d}}(),t=Bi(),r=Mi(),n=Object.prototype.hasOwnProperty,o={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},i=Array.isArray,s=Array.prototype.push,a=function(e,t){s.apply(e,i(t)?t:[t])},l=Date.prototype.toISOString,c=r.default,u={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:t.encode,encodeValuesOnly:!1,format:c,formatter:r.formatters[c],indices:!1,serializeDate:function(e){return l.call(e)},skipNulls:!1,strictNullHandling:!1},h={},f=function r(n,o,s,l,c,f,p,d,m,g,y,b,_,v,w,S,E,A){for(var I=n,P=A,k=0,x=!1;void 0!==(P=P.get(h))&&!x;){var O=P.get(n);if(k+=1,typeof O<"u"){if(O===k)throw new RangeError("Cyclic object value");x=!0}typeof P.get(h)>"u"&&(k=0)}if("function"==typeof g?I=g(o,I):I instanceof Date?I=_(I):"comma"===s&&i(I)&&(I=t.maybeMap(I,function(e){return e instanceof Date?_(e):e})),null===I){if(f)return m&&!S?m(o,u.encoder,E,"key",v):o;I=""}if(function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||"symbol"==typeof e||"bigint"==typeof e}(I)||t.isBuffer(I))return m?[w(S?o:m(o,u.encoder,E,"key",v))+"="+w(m(I,u.encoder,E,"value",v))]:[w(o)+"="+w(String(I))];var $,T=[];if(typeof I>"u")return T;if("comma"===s&&i(I))S&&m&&(I=t.maybeMap(I,m)),$=[{value:I.length>0?I.join(",")||null:void 0}];else if(i(g))$=g;else{var C=Object.keys(I);$=y?C.sort(y):C}var j=d?o.replace(/\./g,"%2E"):o,R=l&&i(I)&&1===I.length?j+"[]":j;if(c&&i(I)&&0===I.length)return R+"[]";for(var N=0;N<$.length;++N){var M=$[N],B="object"==typeof M&&typeof M.value<"u"?M.value:I[M];if(!p||null!==B){var L=b&&d?M.replace(/\./g,"%2E"):M,U=i(I)?"function"==typeof s?s(R,L):R:R+(b?"."+L:"["+L+"]");A.set(n,k);var D=e();D.set(h,A),a(T,r(B,U,s,l,c,f,p,d,"comma"===s&&S&&i(I)?null:m,g,y,b,_,v,w,S,E,D))}}return T};return Xi=function(t,s){var l,c=t,h=function(e){if(!e)return u;if(typeof e.allowEmptyArrays<"u"&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&"boolean"!=typeof e.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&typeof e.encoder<"u"&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||u.charset;if(typeof e.charset<"u"&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var s=r.default;if(typeof e.format<"u"){if(!n.call(r.formatters,e.format))throw new TypeError("Unknown format option provided.");s=e.format}var a,l=r.formatters[s],c=u.filter;if(("function"==typeof e.filter||i(e.filter))&&(c=e.filter),a=e.arrayFormat in o?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":u.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var h=typeof e.allowDots>"u"?!0===e.encodeDotInKeys||u.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:u.addQueryPrefix,allowDots:h,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:u.allowEmptyArrays,arrayFormat:a,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:u.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?u.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:u.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:u.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:u.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:u.encodeValuesOnly,filter:c,format:s,formatter:l,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:u.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:u.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:u.strictNullHandling}}(s);"function"==typeof h.filter?c=(0,h.filter)("",c):i(h.filter)&&(l=h.filter);var p=[];if("object"!=typeof c||null===c)return"";var d=o[h.arrayFormat],m="comma"===d&&h.commaRoundTrip;l||(l=Object.keys(c)),h.sort&&l.sort(h.sort);for(var g=e(),y=0;y<l.length;++y){var b=l[y];h.skipNulls&&null===c[b]||a(p,f(c[b],b,d,m,h.allowEmptyArrays,h.strictNullHandling,h.skipNulls,h.encodeDotInKeys,h.encode?h.encoder:null,h.filter,h.sort,h.allowDots,h.serializeDate,h.format,h.formatter,h.encodeValuesOnly,h.charset,g))}var _=p.join(h.delimiter),v=!0===h.addQueryPrefix?"?":"";return h.charsetSentinel&&("iso-8859-1"===h.charset?v+="utf8=%26%2310003%3B&":v+="utf8=%E2%9C%93&"),_.length>0?v+_:""}}function Ui(){if(is)return os;is=!0;var e=At;function t(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var r=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,o=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,i=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),s=["'"].concat(i),a=["%","/","?",";","#"].concat(s),l=["/","?","#"],c=/^[+a-z0-9A-Z_-]{0,63}$/,u=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,h={javascript:!0,"javascript:":!0},f={javascript:!0,"javascript:":!0},p={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},d=function(){if(ns)return rs;ns=!0;var e=Li(),t=function(){if(ts)return es;ts=!0;var e=Bi(),t=Object.prototype.hasOwnProperty,r=Array.isArray,n={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:e.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},o=function(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},i=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},s=function(e,r,n,o){if(e){var s=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,l=n.depth>0&&/(\[[^[\]]*])/.exec(s),c=l?s.slice(0,l.index):s,u=[];if(c){if(!n.plainObjects&&t.call(Object.prototype,c)&&!n.allowPrototypes)return;u.push(c)}for(var h=0;n.depth>0&&null!==(l=a.exec(s))&&h<n.depth;){if(h+=1,!n.plainObjects&&t.call(Object.prototype,l[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(l[1])}if(l){if(!0===n.strictDepth)throw new RangeError("Input depth exceeded depth option of "+n.depth+" and strictDepth is true");u.push("["+s.slice(l.index)+"]")}return function(e,t,r,n){for(var o=n?t:i(t,r),s=e.length-1;s>=0;--s){var a,l=e[s];if("[]"===l&&r.parseArrays)a=r.allowEmptyArrays&&(""===o||r.strictNullHandling&&null===o)?[]:[].concat(o);else{a=r.plainObjects?Object.create(null):{};var c="["===l.charAt(0)&&"]"===l.charAt(l.length-1)?l.slice(1,-1):l,u=r.decodeDotInKeys?c.replace(/%2E/g,"."):c,h=parseInt(u,10);r.parseArrays||""!==u?!isNaN(h)&&l!==u&&String(h)===u&&h>=0&&r.parseArrays&&h<=r.arrayLimit?(a=[])[h]=o:"__proto__"!==u&&(a[u]=o):a={0:o}}o=a}return o}(u,r,n,o)}};return es=function(a,l){var c=function(t){if(!t)return n;if(typeof t.allowEmptyArrays<"u"&&"boolean"!=typeof t.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.decodeDotInKeys<"u"&&"boolean"!=typeof t.decodeDotInKeys)throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==t.decoder&&typeof t.decoder<"u"&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof t.charset>"u"?n.charset:t.charset,o=typeof t.duplicates>"u"?n.duplicates:t.duplicates;if("combine"!==o&&"first"!==o&&"last"!==o)throw new TypeError("The duplicates option must be either combine, first, or last");return{allowDots:typeof t.allowDots>"u"?!0===t.decodeDotInKeys||n.allowDots:!!t.allowDots,allowEmptyArrays:"boolean"==typeof t.allowEmptyArrays?!!t.allowEmptyArrays:n.allowEmptyArrays,allowPrototypes:"boolean"==typeof t.allowPrototypes?t.allowPrototypes:n.allowPrototypes,allowSparse:"boolean"==typeof t.allowSparse?t.allowSparse:n.allowSparse,arrayLimit:"number"==typeof t.arrayLimit?t.arrayLimit:n.arrayLimit,charset:r,charsetSentinel:"boolean"==typeof t.charsetSentinel?t.charsetSentinel:n.charsetSentinel,comma:"boolean"==typeof t.comma?t.comma:n.comma,decodeDotInKeys:"boolean"==typeof t.decodeDotInKeys?t.decodeDotInKeys:n.decodeDotInKeys,decoder:"function"==typeof t.decoder?t.decoder:n.decoder,delimiter:"string"==typeof t.delimiter||e.isRegExp(t.delimiter)?t.delimiter:n.delimiter,depth:"number"==typeof t.depth||!1===t.depth?+t.depth:n.depth,duplicates:o,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof t.interpretNumericEntities?t.interpretNumericEntities:n.interpretNumericEntities,parameterLimit:"number"==typeof t.parameterLimit?t.parameterLimit:n.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"==typeof t.plainObjects?t.plainObjects:n.plainObjects,strictDepth:"boolean"==typeof t.strictDepth?!!t.strictDepth:n.strictDepth,strictNullHandling:"boolean"==typeof t.strictNullHandling?t.strictNullHandling:n.strictNullHandling}}(l);if(""===a||null===a||typeof a>"u")return c.plainObjects?Object.create(null):{};for(var u="string"==typeof a?function(s,a){var l={__proto__:null},c=a.ignoreQueryPrefix?s.replace(/^\?/,""):s;c=c.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var u,h=a.parameterLimit===1/0?void 0:a.parameterLimit,f=c.split(a.delimiter,h),p=-1,d=a.charset;if(a.charsetSentinel)for(u=0;u<f.length;++u)0===f[u].indexOf("utf8=")&&("utf8=%E2%9C%93"===f[u]?d="utf-8":"utf8=%26%2310003%3B"===f[u]&&(d="iso-8859-1"),p=u,u=f.length);for(u=0;u<f.length;++u)if(u!==p){var m,g,y=f[u],b=y.indexOf("]="),_=-1===b?y.indexOf("="):b+1;-1===_?(m=a.decoder(y,n.decoder,d,"key"),g=a.strictNullHandling?null:""):(m=a.decoder(y.slice(0,_),n.decoder,d,"key"),g=e.maybeMap(i(y.slice(_+1),a),function(e){return a.decoder(e,n.decoder,d,"value")})),g&&a.interpretNumericEntities&&"iso-8859-1"===d&&(g=o(g)),y.indexOf("[]=")>-1&&(g=r(g)?[g]:g);var v=t.call(l,m);v&&"combine"===a.duplicates?l[m]=e.combine(l[m],g):(!v||"last"===a.duplicates)&&(l[m]=g)}return l}(a,c):a,h=c.plainObjects?Object.create(null):{},f=Object.keys(u),p=0;p<f.length;++p){var d=f[p],m=s(d,u[d],c,"string"==typeof a);h=e.merge(h,m,c)}return!0===c.allowSparse?h:e.compact(h)}}(),r=Mi();return rs={formats:r,parse:t,stringify:e}}();function m(e,r,n){if(e&&"object"==typeof e&&e instanceof t)return e;var o=new t;return o.parse(e,r,n),o}return t.prototype.parse=function(t,n,i){if("string"!=typeof t)throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var m=t.indexOf("?"),g=-1!==m&&m<t.indexOf("#")?"?":"#",y=t.split(g);y[0]=y[0].replace(/\\/g,"/");var b=t=y.join(g);if(b=b.trim(),!i&&1===t.split("#").length){var _=o.exec(b);if(_)return this.path=b,this.href=b,this.pathname=_[1],_[2]?(this.search=_[2],this.query=n?d.parse(this.search.substr(1)):this.search.substr(1)):n&&(this.search="",this.query={}),this}var v=r.exec(b);if(v){var w=(v=v[0]).toLowerCase();this.protocol=w,b=b.substr(v.length)}if(i||v||b.match(/^\/\/[^@/]+@[^@/]+/)){var S="//"===b.substr(0,2);S&&(!v||!f[v])&&(b=b.substr(2),this.slashes=!0)}if(!f[v]&&(S||v&&!p[v])){for(var E=-1,A=0;A<l.length;A++)-1!==(k=b.indexOf(l[A]))&&(-1===E||k<E)&&(E=k);var I,P;for(-1!==(P=-1===E?b.lastIndexOf("@"):b.lastIndexOf("@",E))&&(I=b.slice(0,P),b=b.slice(P+1),this.auth=decodeURIComponent(I)),E=-1,A=0;A<a.length;A++){var k;-1!==(k=b.indexOf(a[A]))&&(-1===E||k<E)&&(E=k)}-1===E&&(E=b.length),this.host=b.slice(0,E),b=b.slice(E),this.parseHost(),this.hostname=this.hostname||"";var x="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!x)for(var O=this.hostname.split(/\./),$=(A=0,O.length);A<$;A++){var T=O[A];if(T&&!T.match(c)){for(var C="",j=0,R=T.length;j<R;j++)T.charCodeAt(j)>127?C+="x":C+=T[j];if(!C.match(c)){var N=O.slice(0,A),M=O.slice(A+1),B=T.match(u);B&&(N.push(B[1]),M.unshift(B[2])),M.length&&(b="/"+M.join(".")+b),this.hostname=N.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),x||(this.hostname=e.toASCII(this.hostname));var L=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+L,this.href+=this.host,x&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!h[w])for(A=0,$=s.length;A<$;A++){var D=s[A];if(-1!==b.indexOf(D)){var F=encodeURIComponent(D);F===D&&(F=escape(D)),b=b.split(D).join(F)}}var W=b.indexOf("#");-1!==W&&(this.hash=b.substr(W),b=b.slice(0,W));var q=b.indexOf("?");if(-1!==q?(this.search=b.substr(q),this.query=b.substr(q+1),n&&(this.query=d.parse(this.query)),b=b.slice(0,q)):n&&(this.search="",this.query={}),b&&(this.pathname=b),p[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){L=this.pathname||"";var V=this.search||"";this.path=L+V}return this.href=this.format(),this},t.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,i="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&"object"==typeof this.query&&Object.keys(this.query).length&&(i=d.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var s=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||p[t])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),t+o+(r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(s=s.replace("#","%23"))+n},t.prototype.resolve=function(e){return this.resolveObject(m(e,!1,!0)).format()},t.prototype.resolveObject=function(e){if("string"==typeof e){var r=new t;r.parse(e,!1,!0),e=r}for(var n=new t,o=Object.keys(this),i=0;i<o.length;i++){var s=o[i];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),l=0;l<a.length;l++){var c=a[l];"protocol"!==c&&(n[c]=e[c])}return p[n.protocol]&&n.hostname&&!n.pathname&&(n.pathname="/",n.path=n.pathname),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!p[e.protocol]){for(var u=Object.keys(e),h=0;h<u.length;h++){var d=u[h];n[d]=e[d]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||f[e.protocol])n.pathname=e.pathname;else{for(var m=(e.pathname||"").split("/");m.length&&!(e.host=m.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==m[0]&&m.unshift(""),m.length<2&&m.unshift(""),n.pathname=m.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var g=n.pathname||"",y=n.search||"";n.path=g+y}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),_=e.host||e.pathname&&"/"===e.pathname.charAt(0),v=_||b||n.host&&e.pathname,w=v,S=n.pathname&&n.pathname.split("/")||[],E=(m=e.pathname&&e.pathname.split("/")||[],n.protocol&&!p[n.protocol]);if(E&&(n.hostname="",n.port=null,n.host&&(""===S[0]?S[0]=n.host:S.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===m[0]?m[0]=e.host:m.unshift(e.host)),e.host=null),v=v&&(""===m[0]||""===S[0])),_)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,S=m;else if(m.length)S||(S=[]),S.pop(),S=S.concat(m),n.search=e.search,n.query=e.query;else if(null!=e.search)return E&&(n.host=S.shift(),n.hostname=n.host,(x=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=x.shift(),n.hostname=x.shift(),n.host=n.hostname)),n.search=e.search,n.query=e.query,(null!==n.pathname||null!==n.search)&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!S.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var A=S.slice(-1)[0],I=(n.host||e.host||S.length>1)&&("."===A||".."===A)||""===A,P=0,k=S.length;k>=0;k--)"."===(A=S[k])?S.splice(k,1):".."===A?(S.splice(k,1),P++):P&&(S.splice(k,1),P--);if(!v&&!w)for(;P--;P)S.unshift("..");v&&""!==S[0]&&(!S[0]||"/"!==S[0].charAt(0))&&S.unshift(""),I&&"/"!==S.join("/").substr(-1)&&S.push("");var x,O=""===S[0]||S[0]&&"/"===S[0].charAt(0);return E&&(n.hostname=O?"":S.length?S.shift():"",n.host=n.hostname,(x=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=x.shift(),n.hostname=x.shift(),n.host=n.hostname)),(v=v||n.host&&S.length)&&!O&&S.unshift(""),S.length>0?n.pathname=S.join("/"):(n.pathname=null,n.path=null),(null!==n.pathname||null!==n.search)&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},t.prototype.parseHost=function(){var e=this.host,t=n.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},os.parse=m,os.resolve=function(e,t){return m(e,!1,!0).resolve(t)},os.resolveObject=function(e,t){return e?m(e,!1,!0).resolveObject(t):t},os.format=function(e){return"string"==typeof e&&(e=m(e)),e instanceof t?e.format():t.prototype.format.call(e)},os.Url=t,os}function Di(e){if("string"==typeof e)e=new URL(e);else if(!(e instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if("file:"!==e.protocol)throw new Deno.errors.InvalidData("invalid url scheme");return bs?function(e){let t=e.hostname,r=e.pathname;for(let e=0;e<r.length;e++)if("%"===r[e]){let t=r.codePointAt(e+2)||32;if("2"===r[e+1]&&102===t||"5"===r[e+1]&&99===t)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(r=r.replace(_s,"\\"),r=decodeURIComponent(r),""!==t)return`\\\\${t}${r}`;{let e=32|r.codePointAt(1),t=r[2];if(e<gs||e>ys||":"!==t)throw new Deno.errors.InvalidData("file url path must be absolute");return r.slice(1)}}(e):function(e){if(""!==e.hostname)throw new Deno.errors.InvalidData("invalid file url hostname");let t=e.pathname;for(let e=0;e<t.length;e++)if("%"===t[e]){let r=t.codePointAt(e+2)||32;if("2"===t[e+1]&&102===r)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(t)}(e)}function Fi(e){let t=Ti.resolve(e),r=e.charCodeAt(e.length-1);(r===ms||bs&&r===ds)&&t[t.length-1]!==Ti.sep&&(t+="/");let n=new URL("file://");return t.includes("%")&&(t=t.replace(vs,"%25")),!bs&&t.includes("\\")&&(t=t.replace(ws,"%5C")),t.includes("\n")&&(t=t.replace(Ss,"%0A")),t.includes("\r")&&(t=t.replace(Es,"%0D")),t.includes("\t")&&(t=t.replace(As,"%09")),n.pathname=t,n}f(Ri,{URL:()=>ps,Url:()=>ls,default:()=>ss,fileURLToPath:()=>Di,format:()=>cs,parse:()=>fs,pathToFileURL:()=>Fi,resolve:()=>us,resolveObject:()=>hs});var Wi,qi,Vi,zi,Hi,Ki,Gi,Qi,Ji,Yi,Xi,Zi,es,ts,rs,ns,os,is,ss,as,ls,cs,us,hs,fs,ps,ds,ms,gs,ys,bs,_s,vs,ws,Ss,Es,As,Is=u(()=>{d(),at(),He(),kn(),Ao(),ji(),Ci(),Wi=Object.freeze(Object.create(null)),qi={},Vi=!1,zi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:r.g,Hi={},Ki=!1,Gi={},Qi=!1,Ji={},Yi=!1,Xi={},Zi=!1,es={},ts=!1,rs={},ns=!1,os={},is=!1,(ss=Ui()).parse,ss.resolve,ss.resolveObject,ss.format,ss.Url,as=typeof Deno<"u"?"windows"===Deno.build.os?"win32":Deno.build.os:void 0,ss.URL=typeof URL<"u"?URL:null,ss.pathToFileURL=Fi,ss.fileURLToPath=Di,ls=ss.Url,cs=ss.format,us=ss.resolve,hs=ss.resolveObject,fs=ss.parse,ps=ss.URL,ds=92,ms=47,gs=97,ys=122,bs="win32"===as,_s=/\//g,vs=/%/g,ws=/\\/g,Ss=/\n/g,Es=/\r/g,As=/\t/g}),Ps=h((e,t)=>{d(),at(),He(),t.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),ks=h(e=>{d(),at(),He(),Object.defineProperty(e,"__esModule",{value:!0}),e.BufferedDuplex=void 0,e.writev=n;var t=Jt(),r=(st(),p(tt));function n(e,t){let n=new Array(e.length);for(let t=0;t<e.length;t++)"string"==typeof e[t].chunk?n[t]=r.Buffer.from(e[t].chunk,"utf8"):n[t]=e[t].chunk;this._write(r.Buffer.concat(n),"binary",t)}var o=class extends t.Duplex{socket;proxy;isSocketOpen;writeQueue;constructor(e,t,r){super({objectMode:!0}),this.proxy=t,this.socket=r,this.writeQueue=[],e.objectMode||(this._writev=n.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",e=>{!this.destroyed&&this.readable&&this.push(e)})}_read(e){this.proxy.read(e)}_write(e,t,r){this.isSocketOpen?this.writeToProxy(e,t,r):this.writeQueue.push({chunk:e,encoding:t,cb:r})}_final(e){this.writeQueue=[],this.proxy.end(e)}_destroy(e,t){this.writeQueue=[],this.proxy.destroy(),t(e)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(e,t,r){!1===this.proxy.write(e,t)?this.proxy.once("drain",r):r()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:e,encoding:t,cb:r}=this.writeQueue.shift();this.writeToProxy(e,t,r)}}};e.BufferedDuplex=o}),xs=h(e=>{d(),at(),He();var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.streamBuilder=e.browserStreamBuilder=void 0;var r=(st(),p(tt)),n=t(Ps()),o=t(or()),i=Jt(),s=t(Sn()),a=ks(),l=(0,o.default)("mqttjs:ws"),c=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function u(e,t){let r=`${e.protocol}://${e.hostname}:${e.port}${e.path}`;return"function"==typeof e.transformWsUrl&&(r=e.transformWsUrl(r,e,t)),r}function h(e){let t=e;return e.port||("wss"===e.protocol?t.port=443:t.port=80),e.path||(t.path="/"),e.wsOptions||(t.wsOptions={}),!s.default&&!e.forceNativeWebSocket&&"wss"===e.protocol&&c.forEach(r=>{Object.prototype.hasOwnProperty.call(e,r)&&!Object.prototype.hasOwnProperty.call(e.wsOptions,r)&&(t.wsOptions[r]=e[r])}),t}e.streamBuilder=(e,t)=>{l("streamBuilder");let r=h(t);r.hostname=r.hostname||r.host||"localhost";let o=u(r,e),i=function(e,t,r){l("createWebSocket"),l(`protocol: ${r.protocolId} ${r.protocolVersion}`);let o,i="MQIsdp"===r.protocolId&&3===r.protocolVersion?"mqttv3.1":"mqtt";return l(`creating new Websocket for url: ${t} and protocol: ${i}`),o=r.createWebsocket?r.createWebsocket(t,[i],r):new n.default(t,[i],r.wsOptions),o}(0,o,r),s=n.default.createWebSocketStream(i,r.wsOptions);return s.url=o,i.on("close",()=>{s.destroy()}),s},e.browserStreamBuilder=(e,t)=>{l("browserStreamBuilder");let n,o=function(e){let t=h(e);if(t.hostname||(t.hostname=t.host),!t.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let e=new URL(document.URL);t.hostname=e.hostname,t.port||(t.port=Number(e.port))}return void 0===t.objectMode&&(t.objectMode=!(!0===t.binary||void 0===t.binary)),t}(t).browserBufferSize||524288,s=t.browserBufferTimeout||1e3,c=!t.objectMode,f=function(e,t){let r,n="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt",o=u(t,e);return r=t.createWebsocket?t.createWebsocket(o,[n],t):new WebSocket(o,[n]),r.binaryType="arraybuffer",r}(e,t),p=function(e){let t=new i.Transform({objectMode:e.objectMode});return t._write=function e(t,n,i){if(f.bufferedAmount>o)return void setTimeout(e,s,t,n,i);c&&"string"==typeof t&&(t=r.Buffer.from(t,"utf8"));try{f.send(t)}catch(e){return i(e)}i()},t._flush=function(e){f.close(),e()},t}(t);t.objectMode||(p._writev=a.writev.bind(p)),p.on("close",()=>{f.close()});let d=typeof f.addEventListener<"u";function m(){l("WebSocket onOpen"),n instanceof a.BufferedDuplex&&n.socketReady()}function g(e){l("WebSocket onClose",e),n.end(),n.destroy()}function y(e){l("WebSocket onError",e);let t=new Error("WebSocket error");t.event=e,n.destroy(t)}async function b(e){if(!p||!p.readable||!p.writable)return;let{data:t}=e;t=t instanceof ArrayBuffer?r.Buffer.from(t):t instanceof Blob?r.Buffer.from(await new Response(t).arrayBuffer()):r.Buffer.from(t,"utf8"),p.push(t)}return f.readyState===f.OPEN?(n=p,n.socket=f):(n=new a.BufferedDuplex(t,p,f),d?f.addEventListener("open",m):f.onopen=m),d?(f.addEventListener("close",g),f.addEventListener("error",y),f.addEventListener("message",b)):(f.onclose=g,f.onerror=y,f.onmessage=b),n}}),Os={};function $s(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}f(Os,{Server:()=>$s,Socket:()=>$s,Stream:()=>$s,_createServerHandle:()=>$s,_normalizeArgs:()=>$s,_setSimultaneousAccepts:()=>$s,connect:()=>$s,createConnection:()=>$s,createServer:()=>$s,default:()=>Ts,isIP:()=>$s,isIPv4:()=>$s,isIPv6:()=>$s});var Ts,Cs=u(()=>{d(),at(),He(),Ts={_createServerHandle:$s,_normalizeArgs:$s,_setSimultaneousAccepts:$s,connect:$s,createConnection:$s,createServer:$s,isIP:$s,isIPv4:$s,isIPv6:$s,Server:$s,Socket:$s,Stream:$s}}),js=h((e,t)=>{d(),at(),He(),t.exports={}}),Rs=h(e=>{d(),at(),He();var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0});var r=t((Cs(),p(Os))),n=t(or()),o=t(js()),i=(0,n.default)("mqttjs:tcp");e.default=(e,t)=>{if(t.port=t.port||1883,t.hostname=t.hostname||t.host||"localhost",t.socksProxy)return(0,o.default)(t.hostname,t.port,t.socksProxy,{timeout:t.socksTimeout});let{port:n,path:s}=t,a=t.hostname;return i("port %d and host %s",n,a),r.default.createConnection({port:n,host:a,path:s})}}),Ns={};f(Ns,{default:()=>Ms});var Ms,Bs=u(()=>{d(),at(),He(),Ms={}}),Ls=h(e=>{d(),at(),He();var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0});var r=(Bs(),p(Ns)),n=t((Cs(),p(Os))),o=t(or()),i=t(js()),s=(0,o.default)("mqttjs:tls");e.default=(e,t)=>{t.port=t.port||8883,t.host=t.hostname||t.host||"localhost",0===n.default.isIP(t.host)&&(t.servername=t.host),t.rejectUnauthorized=!1!==t.rejectUnauthorized,delete t.path,s("port %d host %s rejectUnauthorized %b",t.port,t.host,t.rejectUnauthorized);let o=function(e){let{host:t,port:n,socksProxy:o,...s}=e;if(void 0!==o){let a=(0,i.default)(t,n,o,{timeout:e.socksTimeout});return(0,r.connect)({...s,socket:a})}return(0,r.connect)(e)}(t);function a(r){t.rejectUnauthorized&&e.emit("error",r),o.end()}return o.on("secureConnect",()=>{t.rejectUnauthorized&&!o.authorized?o.emit("error",new Error("TLS not authorized")):o.removeListener("error",a)}),o.on("error",a),o}}),Us=h(e=>{d(),at(),He(),Object.defineProperty(e,"__esModule",{value:!0});var t,r,n,o=(st(),p(tt)),i=Jt(),s=ks();e.default=(e,a)=>{if(a.hostname=a.hostname||a.host,!a.hostname)throw new Error("Could not determine host. Specify host manually.");let l="MQIsdp"===a.protocolId&&3===a.protocolVersion?"mqttv3.1":"mqtt";!function(e){e.hostname||(e.hostname="localhost"),e.path||(e.path="/"),e.wsOptions||(e.wsOptions={})}(a);let c=function(e,t){let r="wxs"===e.protocol?"wss":"ws",n=`${r}://${e.hostname}${e.path}`;return e.port&&80!==e.port&&443!==e.port&&(n=`${r}://${e.hostname}:${e.port}${e.path}`),"function"==typeof e.transformWsUrl&&(n=e.transformWsUrl(n,e,t)),n}(a,e);t=wx.connectSocket({url:c,protocols:[l]}),r=function(){let e=new i.Transform;return e._write=(e,r,n)=>{t.send({data:e.buffer,success(){n()},fail(e){n(new Error(e))}})},e._flush=e=>{t.close({success(){e()}})},e}(),(n=new s.BufferedDuplex(a,r,t))._destroy=(e,r)=>{t.close({success(){r&&r(e)}})};let u=n.destroy;return n.destroy=(e,r)=>(n.destroy=u,setTimeout(()=>{t.close({fail(){n._destroy(e,r)}})},0),n),t.onOpen(()=>{n.socketReady()}),t.onMessage(e=>{let{data:t}=e;t=t instanceof ArrayBuffer?o.Buffer.from(t):o.Buffer.from(t,"utf8"),r.push(t)}),t.onClose(()=>{n.emit("close"),n.end(),n.destroy()}),t.onError(e=>{let t=new Error(e.errMsg);n.destroy(t)}),n}}),Ds=h(e=>{d(),at(),He(),Object.defineProperty(e,"__esModule",{value:!0});var t,r,n,o=(st(),p(tt)),i=Jt(),s=ks(),a=!1;e.default=(e,l)=>{if(l.hostname=l.hostname||l.host,!l.hostname)throw new Error("Could not determine host. Specify host manually.");let c="MQIsdp"===l.protocolId&&3===l.protocolVersion?"mqttv3.1":"mqtt";!function(e){e.hostname||(e.hostname="localhost"),e.path||(e.path="/"),e.wsOptions||(e.wsOptions={})}(l);let u=function(e,t){let r="alis"===e.protocol?"wss":"ws",n=`${r}://${e.hostname}${e.path}`;return e.port&&80!==e.port&&443!==e.port&&(n=`${r}://${e.hostname}:${e.port}${e.path}`),"function"==typeof e.transformWsUrl&&(n=e.transformWsUrl(n,e,t)),n}(l,e);return(t=l.my).connectSocket({url:u,protocols:c}),r=function(){let e=new i.Transform;return e._write=(e,r,n)=>{t.sendSocketMessage({data:e.buffer,success(){n()},fail(){n(new Error)}})},e._flush=e=>{t.closeSocket({success(){e()}})},e}(),n=new s.BufferedDuplex(l,r,t),a||(a=!0,t.onSocketOpen(()=>{n.socketReady()}),t.onSocketMessage(e=>{if("string"==typeof e.data){let t=o.Buffer.from(e.data,"base64");r.push(t)}else{let t=new FileReader;t.addEventListener("load",()=>{t.result instanceof ArrayBuffer?r.push(o.Buffer.from(t.result)):r.push(o.Buffer.from(t.result,"utf-8"))}),t.readAsArrayBuffer(e.data)}}),t.onSocketClose(()=>{n.end(),n.destroy()}),t.onSocketError(e=>{n.destroy(e)})),n}}),Fs=h(e=>{d(),at(),He();var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.connectAsync=function(e,t,r=!0){return new Promise((n,o)=>{let i=l(e,t),s={connect:e=>{a(),n(i)},end:()=>{a(),n(i)},error:e=>{a(),i.end(),o(e)}};function a(){Object.keys(s).forEach(e=>{i.off(e,s[e])})}!1===r&&(s.close=()=>{s.error(new Error("Couldn't connect to server"))}),Object.keys(s).forEach(e=>{i.on(e,s[e])})})};var r=t(or()),n=t((Is(),p(Ri))),o=t(In()),i=t(Sn());"function"!=typeof m?.nextTick&&(m.nextTick=setImmediate);var s=(0,r.default)("mqttjs"),a=null;function l(e,t){if(s("connecting to an MQTT broker..."),"object"==typeof e&&!t&&(t=e,e=""),t=t||{},e&&"string"==typeof e){let r=n.default.parse(e,!0),o={};if(null!=r.port&&(o.port=Number(r.port)),o.host=r.hostname,o.query=r.query,o.auth=r.auth,o.protocol=r.protocol,o.path=r.path,!(t={...o,...t}).protocol)throw new Error("Missing protocol");t.protocol=t.protocol.replace(/:$/,"")}if(t.unixSocket=t.unixSocket||t.protocol?.includes("+unix"),t.unixSocket?t.protocol=t.protocol.replace("+unix",""):!t.protocol?.startsWith("ws")&&!t.protocol?.startsWith("wx")&&delete t.path,function(e){let t;if(e.auth)if(t=e.auth.match(/^(.+):(.+)$/),t){let[,r,n]=t;e.username=r,e.password=n}else e.username=e.auth}(t),t.query&&"string"==typeof t.query.clientId&&(t.clientId=t.query.clientId),i.default||t.unixSocket?t.socksProxy=void 0:void 0===t.socksProxy&&typeof m<"u"&&(t.socksProxy=m.env.MQTTJS_SOCKS_PROXY),t.cert&&t.key){if(!t.protocol)throw new Error("Missing secure protocol key");if(-1===["mqtts","wss","wxs","alis"].indexOf(t.protocol))switch(t.protocol){case"mqtt":t.protocol="mqtts";break;case"ws":t.protocol="wss";break;case"wx":t.protocol="wxs";break;case"ali":t.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${t.protocol}"!`)}}if(a||(a={},i.default||t.forceNativeWebSocket?(a.ws=xs().browserStreamBuilder,a.wss=xs().browserStreamBuilder,a.wx=Us().default,a.wxs=Us().default,a.ali=Ds().default,a.alis=Ds().default):(a.ws=xs().streamBuilder,a.wss=xs().streamBuilder,a.mqtt=Rs().default,a.tcp=Rs().default,a.ssl=Ls().default,a.tls=a.ssl,a.mqtts=Ls().default)),!a[t.protocol]){let e=-1!==["mqtts","wss"].indexOf(t.protocol);t.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((t,r)=>(!e||r%2!=0)&&"function"==typeof a[t])[0]}if(!1===t.clean&&!t.clientId)throw new Error("Missing clientId for unclean clients");t.protocol&&(t.defaultProtocol=t.protocol);let r=new o.default(function(e){return t.servers&&((!e._reconnectCount||e._reconnectCount===t.servers.length)&&(e._reconnectCount=0),t.host=t.servers[e._reconnectCount].host,t.port=t.servers[e._reconnectCount].port,t.protocol=t.servers[e._reconnectCount].protocol?t.servers[e._reconnectCount].protocol:t.defaultProtocol,t.hostname=t.host,e._reconnectCount++),s("calling streambuilder for",t.protocol),a[t.protocol](e,t)},t);return r.on("error",()=>{}),r}e.default=l}),Ws=h(e=>{d(),at(),He();var t,r=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e&&e.__importStar||(t=function(e){return(t=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var o={};if(null!=e)for(var i=t(e),s=0;s<i.length;s++)"default"!==i[s]&&r(o,e,i[s]);return n(o,e),o}),i=e&&e.__exportStar||function(e,t){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(t,n)&&r(t,e,n)},s=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.ReasonCodes=e.KeepaliveManager=e.UniqueMessageIdProvider=e.DefaultMessageIdProvider=e.Store=e.MqttClient=e.connectAsync=e.connect=e.Client=void 0;var a=s(In());e.MqttClient=a.default;var l=s(Kr());e.DefaultMessageIdProvider=l.default;var c=s(Pn());e.UniqueMessageIdProvider=c.default;var u=s(dr());e.Store=u.default;var h=o(Fs());e.connect=h.default,Object.defineProperty(e,"connectAsync",{enumerable:!0,get:function(){return h.connectAsync}});var f=s(An());e.KeepaliveManager=f.default,e.Client=a.default,i(In(),e),i(yr(),e);var p=br();Object.defineProperty(e,"ReasonCodes",{enumerable:!0,get:function(){return p.ReasonCodes}})});h(e=>{d(),at(),He();var t,r=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e&&e.__importStar||(t=function(e){return(t=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var o={};if(null!=e)for(var i=t(e),s=0;s<i.length;s++)"default"!==i[s]&&r(o,e,i[s]);return n(o,e),o}),i=e&&e.__exportStar||function(e,t){for(var n in e)"default"!==n&&!Object.prototype.hasOwnProperty.call(t,n)&&r(t,e,n)};Object.defineProperty(e,"__esModule",{value:!0});var s=o(Ws());e.default=s,i(Ws(),e)})()})()},887:(e,t,r)=>{var n=r(6993),o=r(1791);e.exports=function(e,t,r,i,s){return new o(n().w(e,t,r,i),s||Promise)},e.exports.__esModule=!0,e.exports.default=e.exports},1072:(e,t)=>{t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!=typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}},1156:e=>{e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,s,a=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}},e.exports.__esModule=!0,e.exports.default=e.exports},1163:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9029),o={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const r="maxItems"===e?"more":"fewer";return n.str`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>n._`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:o}=e,i="maxItems"===t?n.operators.GT:n.operators.LT;e.fail$data(n._`${r}.length ${i} ${o}`)}};t.default=o},1239:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9029),o=r(4227),i={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>n.str`must match "${e.ifClause}" schema`,params:({params:e})=>n._`{failingKeyword: ${e.ifClause}}`},code(e){const{gen:t,parentSchema:r,it:i}=e;void 0===r.then&&void 0===r.else&&(0,o.checkStrictMode)(i,'"if" without "then" and "else" is ignored');const a=s(i,"then"),l=s(i,"else");if(!a&&!l)return;const c=t.let("valid",!0),u=t.name("_valid");if(function(){const t=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},u);e.mergeEvaluated(t)}(),e.reset(),a&&l){const r=t.let("ifClause");e.setParams({ifClause:r}),t.if(u,h("then",r),h("else",r))}else a?t.if(u,h("then")):t.if((0,n.not)(u),h("else"));function h(r,o){return()=>{const i=e.subschema({keyword:r},u);t.assign(c,u),e.mergeValidEvaluated(i,c),o?t.assign(o,n._`${r}`):e.setParams({ifClause:r})}}e.pass(c,()=>e.error(!0))}};function s(e,t){const r=e.schema[t];return void 0!==r&&!(0,o.alwaysValidSchema)(e,r)}t.default=i},1520:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class r{}t._CodeOrName=r,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends r{constructor(e){if(super(),!t.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=n;class o extends r{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const e=this._items[0];return""===e||'""'===e}get str(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce((e,t)=>`${e}${t}`,"")}get names(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce((e,t)=>(t instanceof n&&(e[t.str]=(e[t.str]||0)+1),e),{})}}function i(e,...t){const r=[e[0]];let n=0;for(;n<t.length;)l(r,t[n]),r.push(e[++n]);return new o(r)}t._Code=o,t.nil=new o(""),t._=i;const s=new o("+");function a(e,...t){const r=[u(e[0])];let n=0;for(;n<t.length;)r.push(s),l(r,t[n]),r.push(s,u(e[++n]));return function(e){let t=1;for(;t<e.length-1;){if(e[t]===s){const r=c(e[t-1],e[t+1]);if(void 0!==r){e.splice(t-1,3,r);continue}e[t++]="+"}t++}}(r),new o(r)}function l(e,t){var r;t instanceof o?e.push(...t._items):t instanceof n?e.push(t):e.push("number"==typeof(r=t)||"boolean"==typeof r||null===r?r:u(Array.isArray(r)?r.join(","):r))}function c(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof n||'"'!==e[e.length-1])return;return"string"!=typeof t?`${e.slice(0,-1)}${t}"`:'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof n?void 0:`"${e}${t.slice(1)}`}function u(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.str=a,t.addCodeArg=l,t.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:a`${e}${t}`},t.stringify=function(e){return new o(u(e))},t.safeStringify=u,t.getProperty=function(e){return"string"==typeof e&&t.IDENTIFIER.test(e)?new o(`.${e}`):i`[${e}]`},t.getEsmExportName=function(e){if("string"==typeof e&&t.IDENTIFIER.test(e))return new o(`${e}`);throw new Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)},t.regexpCode=function(e){return new o(e.toString())}},1791:(e,t,r)=>{var n=r(5172),o=r(5546);e.exports=function e(t,r){function i(e,o,s,a){try{var l=t[e](o),c=l.value;return c instanceof n?r.resolve(c.v).then(function(e){i("next",e,s,a)},function(e){i("throw",e,s,a)}):r.resolve(c).then(function(e){l.value=e,s(l)},function(e){return i("throw",e,s,a)})}catch(e){a(e)}}var s;this.next||(o(e.prototype),o(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),o(this,"_invoke",function(e,t,n){function o(){return new r(function(t,r){i(e,n,t,r)})}return s=s?s.then(o,o):o()},!0)},e.exports.__esModule=!0,e.exports.default=e.exports},1860:(e,t,r)=>{"use strict";e.exports={VrpcClient:r(8577),VrpcAgent:r(6171),VrpcAdapter:r(8665)}},2017:e=>{"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,o,i;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(o=n;0!==o--;)if(!e(t[o],r[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(i=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(o=n;0!==o--;)if(!Object.prototype.hasOwnProperty.call(r,i[o]))return!1;for(o=n;0!==o--;){var s=i[o];if(!e(t[s],r[s]))return!1}return!0}return t!=t&&r!=r}},2023:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9029),o={data:new n.Name("data"),valCxt:new n.Name("valCxt"),instancePath:new n.Name("instancePath"),parentData:new n.Name("parentData"),parentDataProperty:new n.Name("parentDataProperty"),rootData:new n.Name("rootData"),dynamicAnchors:new n.Name("dynamicAnchors"),vErrors:new n.Name("vErrors"),errors:new n.Name("errors"),this:new n.Name("this"),self:new n.Name("self"),scope:new n.Name("scope"),json:new n.Name("json"),jsonPos:new n.Name("jsonPos"),jsonLen:new n.Name("jsonLen"),jsonPart:new n.Name("jsonPart")};t.default=o},2079:e=>{"use strict";e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},2128:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(3463),o=r(6074),i=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",n.default,o.default];t.default=i},2586:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getData=t.KeywordCxt=t.validateFunctionCode=void 0;const n=r(8727),o=r(208),i=r(7887),s=r(208),a=r(7870),l=r(3673),c=r(4495),u=r(9029),h=r(2023),f=r(6939),p=r(4227),d=r(8708);function m({gen:e,validateName:t,schema:r,schemaEnv:n,opts:o},i){o.code.es5?e.func(t,u._`${h.default.data}, ${h.default.valCxt}`,n.$async,()=>{e.code(u._`"use strict"; ${g(r,o)}`),function(e,t){e.if(h.default.valCxt,()=>{e.var(h.default.instancePath,u._`${h.default.valCxt}.${h.default.instancePath}`),e.var(h.default.parentData,u._`${h.default.valCxt}.${h.default.parentData}`),e.var(h.default.parentDataProperty,u._`${h.default.valCxt}.${h.default.parentDataProperty}`),e.var(h.default.rootData,u._`${h.default.valCxt}.${h.default.rootData}`),t.dynamicRef&&e.var(h.default.dynamicAnchors,u._`${h.default.valCxt}.${h.default.dynamicAnchors}`)},()=>{e.var(h.default.instancePath,u._`""`),e.var(h.default.parentData,u._`undefined`),e.var(h.default.parentDataProperty,u._`undefined`),e.var(h.default.rootData,h.default.data),t.dynamicRef&&e.var(h.default.dynamicAnchors,u._`{}`)})}(e,o),e.code(i)}):e.func(t,u._`${h.default.data}, ${function(e){return u._`{${h.default.instancePath}="", ${h.default.parentData}, ${h.default.parentDataProperty}, ${h.default.rootData}=${h.default.data}${e.dynamicRef?u._`, ${h.default.dynamicAnchors}={}`:u.nil}}={}`}(o)}`,n.$async,()=>e.code(g(r,o)).code(i))}function g(e,t){const r="object"==typeof e&&e[t.schemaId];return r&&(t.code.source||t.code.process)?u._`/*# sourceURL=${r} */`:u.nil}function y({schema:e,self:t}){if("boolean"==typeof e)return!e;for(const r in e)if(t.RULES.all[r])return!0;return!1}function b(e){return"boolean"!=typeof e.schema}function _(e){(0,p.checkUnknownRules)(e),function(e){const{schema:t,errSchemaPath:r,opts:n,self:o}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,p.schemaHasRulesButRef)(t,o.RULES)&&o.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}(e)}function v(e,t){if(e.opts.jtd)return S(e,[],!1,t);const r=(0,o.getSchemaTypes)(e.schema);S(e,r,!(0,o.coerceAndCheckDataType)(e,r),t)}function w({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:o}){const i=r.$comment;if(!0===o.$comment)e.code(u._`${h.default.self}.logger.log(${i})`);else if("function"==typeof o.$comment){const r=u.str`${n}/$comment`,o=e.scopeValue("root",{ref:t.root});e.code(u._`${h.default.self}.opts.$comment(${i}, ${r}, ${o}.schema)`)}}function S(e,t,r,n){const{gen:o,schema:a,data:l,allErrors:c,opts:f,self:d}=e,{RULES:m}=d;function g(p){(0,i.shouldUseGroup)(a,p)&&(p.type?(o.if((0,s.checkDataType)(p.type,l,f.strictNumbers)),E(e,p),1===t.length&&t[0]===p.type&&r&&(o.else(),(0,s.reportTypeError)(e)),o.endIf()):E(e,p),c||o.if(u._`${h.default.errors} === ${n||0}`))}!a.$ref||!f.ignoreKeywordsWithRef&&(0,p.schemaHasRulesButRef)(a,m)?(f.jtd||function(e,t){!e.schemaEnv.meta&&e.opts.strictTypes&&(function(e,t){t.length&&(e.dataTypes.length?(t.forEach(t=>{A(e.dataTypes,t)||I(e,`type "${t}" not allowed by context "${e.dataTypes.join(",")}"`)}),function(e,t){const r=[];for(const n of e.dataTypes)A(t,n)?r.push(n):t.includes("integer")&&"number"===n&&r.push("integer");e.dataTypes=r}(e,t)):e.dataTypes=t)}(e,t),e.opts.allowUnionTypes||function(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&I(e,"use allowUnionTypes to allow union type keyword")}(e,t),function(e,t){const r=e.self.RULES.all;for(const n in r){const o=r[n];if("object"==typeof o&&(0,i.shouldUseRule)(e.schema,o)){const{type:r}=o.definition;r.length&&!r.some(e=>{return n=e,(r=t).includes(n)||"number"===n&&r.includes("integer");var r,n})&&I(e,`missing type "${r.join(",")}" for keyword "${n}"`)}}}(e,e.dataTypes))}(e,t),o.block(()=>{for(const e of m.rules)g(e);g(m.post)})):o.block(()=>k(e,"$ref",m.all.$ref.definition))}function E(e,t){const{gen:r,schema:n,opts:{useDefaults:o}}=e;o&&(0,a.assignDefaults)(e,t.type),r.block(()=>{for(const r of t.rules)(0,i.shouldUseRule)(n,r)&&k(e,r.keyword,r.definition,t.type)})}function A(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function I(e,t){t+=` at "${e.schemaEnv.baseId+e.errSchemaPath}" (strictTypes)`,(0,p.checkStrictMode)(e,t,e.opts.strictTypes)}t.validateFunctionCode=function(e){b(e)&&(_(e),y(e))?function(e){const{schema:t,opts:r,gen:n}=e;m(e,()=>{r.$comment&&t.$comment&&w(e),function(e){const{schema:t,opts:r}=e;void 0!==t.default&&r.useDefaults&&r.strictSchema&&(0,p.checkStrictMode)(e,"default is ignored in the schema root")}(e),n.let(h.default.vErrors,null),n.let(h.default.errors,0),r.unevaluated&&function(e){const{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",u._`${r}.evaluated`),t.if(u._`${e.evaluated}.dynamicProps`,()=>t.assign(u._`${e.evaluated}.props`,u._`undefined`)),t.if(u._`${e.evaluated}.dynamicItems`,()=>t.assign(u._`${e.evaluated}.items`,u._`undefined`))}(e),v(e),function(e){const{gen:t,schemaEnv:r,validateName:n,ValidationError:o,opts:i}=e;r.$async?t.if(u._`${h.default.errors} === 0`,()=>t.return(h.default.data),()=>t.throw(u._`new ${o}(${h.default.vErrors})`)):(t.assign(u._`${n}.errors`,h.default.vErrors),i.unevaluated&&function({gen:e,evaluated:t,props:r,items:n}){r instanceof u.Name&&e.assign(u._`${t}.props`,r),n instanceof u.Name&&e.assign(u._`${t}.items`,n)}(e),t.return(u._`${h.default.errors} === 0`))}(e)})}(e):m(e,()=>(0,n.topBoolOrEmptySchema)(e))};class P{constructor(e,t,r){if((0,l.validateKeywordUsage)(e,t,r),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=r,this.data=e.data,this.schema=e.schema[r],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,p.schemaRefOrVal)(e,this.schema,r,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",$(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,l.validSchemaType)(this.schema,t.schemaType,t.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(t.schemaType)}`);("code"in t?t.trackErrors:!1!==t.errors)&&(this.errsCount=e.gen.const("_errs",h.default.errors))}result(e,t,r){this.failResult((0,u.not)(e),t,r)}failResult(e,t,r){this.gen.if(e),r?r():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.failResult((0,u.not)(e),void 0,t)}fail(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:t}=this;this.fail(u._`${t} !== undefined && (${(0,u.or)(this.invalid$data(),e)})`)}error(e,t,r){if(t)return this.setParams(t),this._error(e,r),void this.setParams({});this._error(e,r)}_error(e,t){(e?d.reportExtraError:d.reportError)(this,this.def.error,t)}$dataError(){(0,d.reportError)(this,this.def.$dataError||d.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');(0,d.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,r=u.nil){this.gen.block(()=>{this.check$data(e,r),t()})}check$data(e=u.nil,t=u.nil){if(!this.$data)return;const{gen:r,schemaCode:n,schemaType:o,def:i}=this;r.if((0,u.or)(u._`${n} === undefined`,t)),e!==u.nil&&r.assign(e,!0),(o.length||i.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),e!==u.nil&&r.assign(e,!1)),r.else()}invalid$data(){const{gen:e,schemaCode:t,schemaType:r,def:n,it:o}=this;return(0,u.or)(function(){if(r.length){if(!(t instanceof u.Name))throw new Error("ajv implementation error");const e=Array.isArray(r)?r:[r];return u._`${(0,s.checkDataTypes)(e,t,o.opts.strictNumbers,s.DataType.Wrong)}`}return u.nil}(),function(){if(n.validateSchema){const r=e.scopeValue("validate$data",{ref:n.validateSchema});return u._`!${r}(${t})`}return u.nil}())}subschema(e,t){const r=(0,c.getSubschema)(this.it,e);(0,c.extendSubschemaData)(r,this.it,e),(0,c.extendSubschemaMode)(r,e);const o={...this.it,...r,items:void 0,props:void 0};return function(e,t){b(e)&&(_(e),y(e))?function(e,t){const{schema:r,gen:n,opts:o}=e;o.$comment&&r.$comment&&w(e),function(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,f.resolveUrl)(e.opts.uriResolver,e.baseId,t))}(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}(e);const i=n.const("_errs",h.default.errors);v(e,i),n.var(t,u._`${i} === ${h.default.errors}`)}(e,t):(0,n.boolOrEmptySchema)(e,t)}(o,t),o}mergeEvaluated(e,t){const{it:r,gen:n}=this;r.opts.unevaluated&&(!0!==r.props&&void 0!==e.props&&(r.props=p.mergeEvaluated.props(n,e.props,r.props,t)),!0!==r.items&&void 0!==e.items&&(r.items=p.mergeEvaluated.items(n,e.items,r.items,t)))}mergeValidEvaluated(e,t){const{it:r,gen:n}=this;if(r.opts.unevaluated&&(!0!==r.props||!0!==r.items))return n.if(t,()=>this.mergeEvaluated(e,u.Name)),!0}}function k(e,t,r,n){const o=new P(e,r,t);"code"in r?r.code(o,n):o.$data&&r.validate?(0,l.funcKeywordCode)(o,r):"macro"in r?(0,l.macroKeywordCode)(o,r):(r.compile||r.validate)&&(0,l.funcKeywordCode)(o,r)}t.KeywordCxt=P;const x=/^\/(?:[^~]|~0|~1)*$/,O=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function $(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let o,i;if(""===e)return h.default.rootData;if("/"===e[0]){if(!x.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);o=e,i=h.default.rootData}else{const s=O.exec(e);if(!s)throw new Error(`Invalid JSON-pointer: ${e}`);const a=+s[1];if(o=s[2],"#"===o){if(a>=t)throw new Error(l("property/index",a));return n[t-a]}if(a>t)throw new Error(l("data",a));if(i=r[t-a],!o)return i}let s=i;const a=o.split("/");for(const e of a)e&&(i=u._`${i}${(0,u.getProperty)((0,p.unescapeJsonPointer)(e))}`,s=u._`${s} && ${i}`);return s;function l(e,r){return`Cannot access ${e} ${r} levels up, current level is ${t}`}}t.getData=$},2661:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9029),o=r(4227),i={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:e,max:t}})=>void 0===t?n.str`must contain at least ${e} valid item(s)`:n.str`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>void 0===t?n._`{minContains: ${e}}`:n._`{minContains: ${e}, maxContains: ${t}}`},code(e){const{gen:t,schema:r,parentSchema:i,data:s,it:a}=e;let l,c;const{minContains:u,maxContains:h}=i;a.opts.next?(l=void 0===u?1:u,c=h):l=1;const f=t.const("len",n._`${s}.length`);if(e.setParams({min:l,max:c}),void 0===c&&0===l)return void(0,o.checkStrictMode)(a,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==c&&l>c)return(0,o.checkStrictMode)(a,'"minContains" > "maxContains" is always invalid'),void e.fail();if((0,o.alwaysValidSchema)(a,r)){let t=n._`${f} >= ${l}`;return void 0!==c&&(t=n._`${t} && ${f} <= ${c}`),void e.pass(t)}a.items=!0;const p=t.name("valid");function d(){const e=t.name("_valid"),r=t.let("count",0);m(e,()=>t.if(e,()=>function(e){t.code(n._`${e}++`),void 0===c?t.if(n._`${e} >= ${l}`,()=>t.assign(p,!0).break()):(t.if(n._`${e} > ${c}`,()=>t.assign(p,!1).break()),1===l?t.assign(p,!0):t.if(n._`${e} >= ${l}`,()=>t.assign(p,!0)))}(r)))}function m(r,n){t.forRange("i",0,f,t=>{e.subschema({keyword:"contains",dataProp:t,dataPropType:o.Type.Num,compositeRule:!0},r),n()})}void 0===c&&1===l?m(p,()=>t.if(p,()=>t.break())):0===l?(t.let(p,!0),void 0!==c&&t.if(n._`${s}.length > 0`,d)):(t.let(p,!1),d()),e.result(p,()=>e.reset())}};t.default=i},2987:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},3025:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const n=r(9029),o=r(4227),i=r(5765);t.error={message:({params:{property:e,depsCount:t,deps:r}})=>{const o=1===t?"property":"properties";return n.str`must have ${o} ${r} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:r,missingProperty:o}})=>n._`{property: ${e},
    missingProperty: ${o},
    depsCount: ${t},
    deps: ${r}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(e){const[t,r]=function({schema:e}){const t={},r={};for(const n in e)"__proto__"!==n&&((Array.isArray(e[n])?t:r)[n]=e[n]);return[t,r]}(e);a(e,t),l(e,r)}};function a(e,t=e.schema){const{gen:r,data:o,it:s}=e;if(0===Object.keys(t).length)return;const a=r.let("missing");for(const l in t){const c=t[l];if(0===c.length)continue;const u=(0,i.propertyInData)(r,o,l,s.opts.ownProperties);e.setParams({property:l,depsCount:c.length,deps:c.join(", ")}),s.allErrors?r.if(u,()=>{for(const t of c)(0,i.checkReportMissingProp)(e,t)}):(r.if(n._`${u} && (${(0,i.checkMissingProp)(e,c,a)})`),(0,i.reportMissingProp)(e,a),r.else())}}function l(e,t=e.schema){const{gen:r,data:n,keyword:s,it:a}=e,l=r.name("valid");for(const c in t)(0,o.alwaysValidSchema)(a,t[c])||(r.if((0,i.propertyInData)(r,n,c,a.opts.ownProperties),()=>{const t=e.subschema({keyword:s,schemaProp:c},l);e.mergeValidEvaluated(t,l)},()=>r.var(l,!0)),e.ok(l))}t.validatePropertyDeps=a,t.validateSchemaDeps=l,t.default=s},3282:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=r(4042),o=r(6144),i=r(6653),s=r(2079),a=["/properties"],l="http://json-schema.org/draft-07/schema";class c extends n.default{_addVocabularies(){super._addVocabularies(),o.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const e=this.opts.$data?this.$dataMetaSchema(s,a):s;this.addMetaSchema(e,l,!1),this.refs["http://json-schema.org/schema"]=l}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(l)?l:void 0)}}t.Ajv=c,e.exports=t=c,e.exports.Ajv=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var u=r(2586);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return u.KeywordCxt}});var h=r(9029);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return h._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return h.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return h.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return h.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return h.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return h.CodeGen}});var f=r(3558);Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var p=r(4551);Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return p.default}})},3439:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9029),o={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:e})=>n.str`must be multiple of ${e}`,params:({schemaCode:e})=>n._`{multipleOf: ${e}}`},code(e){const{gen:t,data:r,schemaCode:o,it:i}=e,s=i.opts.multipleOfPrecision,a=t.let("res"),l=s?n._`Math.abs(Math.round(${a}) - ${a}) > 1e-${s}`:n._`${a} !== parseInt(${a})`;e.fail$data(n._`(${o} === 0 || (${a} = ${r}/${o}, ${l}))`)}};t.default=o},3463:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};t.default=r},3558:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}t.default=r},3561:(e,t,r)=>{"use strict";r.r(t),r.d(t,{customAlphabet:()=>s,customRandom:()=>i,nanoid:()=>a,random:()=>o,urlAlphabet:()=>n});let n="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",o=e=>crypto.getRandomValues(new Uint8Array(e)),i=(e,t,r)=>{let n=(2<<Math.log(e.length-1)/Math.LN2)-1,o=-~(1.6*n*t/e.length);return(i=t)=>{let s="";for(;;){let t=r(o),a=0|o;for(;a--;)if(s+=e[t[a]&n]||"",s.length===i)return s}}},s=(e,t=21)=>i(e,t,o),a=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((e,t)=>e+((t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),"")},3673:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateKeywordUsage=t.validSchemaType=t.funcKeywordCode=t.macroKeywordCode=void 0;const n=r(9029),o=r(2023),i=r(5765),s=r(8708);function a(e){const{gen:t,data:r,it:o}=e;t.if(o.parentData,()=>t.assign(r,n._`${o.parentData}[${o.parentDataProperty}]`))}function l(e,t,r){if(void 0===r)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword","function"==typeof r?{ref:r}:{ref:r,code:(0,n.stringify)(r)})}t.macroKeywordCode=function(e,t){const{gen:r,keyword:o,schema:i,parentSchema:s,it:a}=e,c=t.macro.call(a.self,i,s,a),u=l(r,o,c);!1!==a.opts.validateSchema&&a.self.validateSchema(c,!0);const h=r.name("valid");e.subschema({schema:c,schemaPath:n.nil,errSchemaPath:`${a.errSchemaPath}/${o}`,topSchemaRef:u,compositeRule:!0},h),e.pass(h,()=>e.error(!0))},t.funcKeywordCode=function(e,t){var r;const{gen:c,keyword:u,schema:h,parentSchema:f,$data:p,it:d}=e;!function({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}(d,t);const m=!p&&t.compile?t.compile.call(d.self,h,f,d):t.validate,g=l(c,u,m),y=c.let("valid");function b(r=(t.async?n._`await `:n.nil)){const s=d.opts.passContext?o.default.this:o.default.self,a=!("compile"in t&&!p||!1===t.schema);c.assign(y,n._`${r}${(0,i.callValidateCode)(e,g,s,a)}`,t.modifying)}function _(e){var r;c.if((0,n.not)(null!==(r=t.valid)&&void 0!==r?r:y),e)}e.block$data(y,function(){if(!1===t.errors)b(),t.modifying&&a(e),_(()=>e.error());else{const r=t.async?function(){const e=c.let("ruleErrs",null);return c.try(()=>b(n._`await `),t=>c.assign(y,!1).if(n._`${t} instanceof ${d.ValidationError}`,()=>c.assign(e,n._`${t}.errors`),()=>c.throw(t))),e}():function(){const e=n._`${g}.errors`;return c.assign(e,null),b(n.nil),e}();t.modifying&&a(e),_(()=>function(e,t){const{gen:r}=e;r.if(n._`Array.isArray(${t})`,()=>{r.assign(o.default.vErrors,n._`${o.default.vErrors} === null ? ${t} : ${o.default.vErrors}.concat(${t})`).assign(o.default.errors,n._`${o.default.vErrors}.length`),(0,s.extendErrors)(e)},()=>e.error())}(e,r))}}),e.ok(null!==(r=t.valid)&&void 0!==r?r:y)},t.validSchemaType=function(e,t,r=!1){return!t.length||t.some(t=>"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||r&&void 0===e)},t.validateKeywordUsage=function({schema:e,opts:t,self:r,errSchemaPath:n},o,i){if(Array.isArray(o.keyword)?!o.keyword.includes(i):o.keyword!==i)throw new Error("ajv implementation error");const s=o.dependencies;if(null==s?void 0:s.some(t=>!Object.prototype.hasOwnProperty.call(e,t)))throw new Error(`parent schema must have dependencies of ${i}: ${s.join(",")}`);if(o.validateSchema&&!o.validateSchema(e[i])){const e=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(o.validateSchema.errors);if("log"!==t.validateSchema)throw new Error(e);r.logger.error(e)}}},3693:(e,t,r)=>{var n=r(7736);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},3738:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},3835:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveSchema=t.getCompilingSchema=t.resolveRef=t.compileSchema=t.SchemaEnv=void 0;const n=r(9029),o=r(3558),i=r(2023),s=r(6939),a=r(4227),l=r(2586);class c{constructor(e){var t;let r;this.refs={},this.dynamicAnchors={},"object"==typeof e.schema&&(r=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=null!==(t=e.baseId)&&void 0!==t?t:(0,s.normalizeId)(null==r?void 0:r[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=null==r?void 0:r.$async,this.refs={}}}function u(e){const t=f.call(this,e);if(t)return t;const r=(0,s.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:a,lines:c}=this.opts.code,{ownProperties:u}=this.opts,h=new n.CodeGen(this.scope,{es5:a,lines:c,ownProperties:u});let p;e.$async&&(p=h.scopeValue("Error",{ref:o.default,code:n._`require("ajv/dist/runtime/validation_error").default`}));const d=h.scopeName("validate");e.validateName=d;const m={gen:h,allErrors:this.opts.allErrors,data:i.default.data,parentData:i.default.parentData,parentDataProperty:i.default.parentDataProperty,dataNames:[i.default.data],dataPathArr:[n.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:h.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:(0,n.stringify)(e.schema)}:{ref:e.schema}),validateName:d,ValidationError:p,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:n.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:n._`""`,opts:this.opts,self:this};let g;try{this._compilations.add(e),(0,l.validateFunctionCode)(m),h.optimize(this.opts.code.optimize);const t=h.toString();g=`${h.scopeRefs(i.default.scope)}return ${t}`,this.opts.code.process&&(g=this.opts.code.process(g,e));const r=new Function(`${i.default.self}`,`${i.default.scope}`,g)(this,this.scope.get());if(this.scope.value(d,{ref:r}),r.errors=null,r.schema=e.schema,r.schemaEnv=e,e.$async&&(r.$async=!0),!0===this.opts.code.source&&(r.source={validateName:d,validateCode:t,scopeValues:h._values}),this.opts.unevaluated){const{props:e,items:t}=m;r.evaluated={props:e instanceof n.Name?void 0:e,items:t instanceof n.Name?void 0:t,dynamicProps:e instanceof n.Name,dynamicItems:t instanceof n.Name},r.source&&(r.source.evaluated=(0,n.stringify)(r.evaluated))}return e.validate=r,e}catch(t){throw delete e.validate,delete e.validateName,g&&this.logger.error("Error compiling schema, function code:",g),t}finally{this._compilations.delete(e)}}function h(e){return(0,s.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:u.call(this,e)}function f(e){for(const t of this._compilations)if(p(t,e))return t}function p(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function d(e,t){let r;for(;"string"==typeof(r=this.refs[t]);)t=r;return r||this.schemas[t]||m.call(this,e,t)}function m(e,t){const r=this.opts.uriResolver.parse(t),n=(0,s._getFullPath)(this.opts.uriResolver,r);let o=(0,s.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===o)return y.call(this,r,e);const i=(0,s.normalizeId)(n),a=this.refs[i]||this.schemas[i];if("string"==typeof a){const t=m.call(this,e,a);if("object"!=typeof(null==t?void 0:t.schema))return;return y.call(this,r,t)}if("object"==typeof(null==a?void 0:a.schema)){if(a.validate||u.call(this,a),i===(0,s.normalizeId)(t)){const{schema:t}=a,{schemaId:r}=this.opts,n=t[r];return n&&(o=(0,s.resolveUrl)(this.opts.uriResolver,o,n)),new c({schema:t,schemaId:r,root:e,baseId:o})}return y.call(this,r,a)}}t.SchemaEnv=c,t.compileSchema=u,t.resolveRef=function(e,t,r){var n;r=(0,s.resolveUrl)(this.opts.uriResolver,t,r);const o=e.refs[r];if(o)return o;let i=d.call(this,e,r);if(void 0===i){const o=null===(n=e.localRefs)||void 0===n?void 0:n[r],{schemaId:s}=this.opts;o&&(i=new c({schema:o,schemaId:s,root:e,baseId:t}))}return void 0!==i?e.refs[r]=h.call(this,i):void 0},t.getCompilingSchema=f,t.resolveSchema=m;const g=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function y(e,{baseId:t,schema:r,root:n}){var o;if("/"!==(null===(o=e.fragment)||void 0===o?void 0:o[0]))return;for(const n of e.fragment.slice(1).split("/")){if("boolean"==typeof r)return;const e=r[(0,a.unescapeFragment)(n)];if(void 0===e)return;const o="object"==typeof(r=e)&&r[this.opts.schemaId];!g.has(n)&&o&&(t=(0,s.resolveUrl)(this.opts.uriResolver,t,o))}let i;if("boolean"!=typeof r&&r.$ref&&!(0,a.schemaHasRulesButRef)(r,this.RULES)){const e=(0,s.resolveUrl)(this.opts.uriResolver,t,r.$ref);i=m.call(this,n,e)}const{schemaId:l}=this.opts;return i=i||new c({schema:r,schemaId:l,root:n,baseId:t}),i.schema!==i.root.schema?i:void 0}},3837:e=>{"use strict";e.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},3853:(e,t)=>{"use strict";function r(e){const t=e.length;let r,n=0,o=0;for(;o<t;)n++,r=e.charCodeAt(o++),r>=55296&&r<=56319&&o<t&&(r=e.charCodeAt(o),56320==(64512&r)&&o++);return n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,r.code='require("ajv/dist/runtime/ucs2length").default'},3966:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9029),o=r(4227),i=r(5765),s=r(5457),a={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:e}})=>n.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>n._`{limit: ${e}}`},code(e){const{schema:t,parentSchema:r,it:n}=e,{prefixItems:a}=r;n.items=!0,(0,o.alwaysValidSchema)(n,t)||(a?(0,s.validateAdditionalItems)(e,a):e.ok((0,i.validateArray)(e)))}};t.default=a},4003:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5765),o=r(9029),i=r(4227),s={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>o.str`must have required property '${e}'`,params:({params:{missingProperty:e}})=>o._`{missingProperty: ${e}}`},code(e){const{gen:t,schema:r,schemaCode:s,data:a,$data:l,it:c}=e,{opts:u}=c;if(!l&&0===r.length)return;const h=r.length>=u.loopRequired;if(c.allErrors?function(){if(h||l)e.block$data(o.nil,f);else for(const t of r)(0,n.checkReportMissingProp)(e,t)}():function(){const i=t.let("missing");if(h||l){const r=t.let("valid",!0);e.block$data(r,()=>function(r,i){e.setParams({missingProperty:r}),t.forOf(r,s,()=>{t.assign(i,(0,n.propertyInData)(t,a,r,u.ownProperties)),t.if((0,o.not)(i),()=>{e.error(),t.break()})},o.nil)}(i,r)),e.ok(r)}else t.if((0,n.checkMissingProp)(e,r,i)),(0,n.reportMissingProp)(e,i),t.else()}(),u.strictRequired){const t=e.parentSchema.properties,{definedProperties:n}=e.it;for(const e of r)if(void 0===(null==t?void 0:t[e])&&!n.has(e)){const t=`required property "${e}" is not defined at "${c.schemaEnv.baseId+c.errSchemaPath}" (strictRequired)`;(0,i.checkStrictMode)(c,t,c.opts.strictRequired)}}function f(){t.forOf("prop",s,r=>{e.setParams({missingProperty:r}),t.if((0,n.noPropertyInData)(t,a,r,u.ownProperties),()=>e.error())})}}};t.default=s},4042:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var n=r(2586);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return n.KeywordCxt}});var o=r(9029);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return o._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return o.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return o.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return o.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return o.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return o.CodeGen}});const i=r(3558),s=r(4551),a=r(396),l=r(3835),c=r(9029),u=r(6939),h=r(208),f=r(4227),p=r(3837),d=r(5944),m=(e,t)=>new RegExp(e,t);m.code="new RegExp";const g=["removeAdditional","useDefaults","coerceTypes"],y=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),b={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},_={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function v(e){var t,r,n,o,i,s,a,l,c,u,h,f,p,g,y,b,_,v,w,S,E,A,I,P,k;const x=e.strict,O=null===(t=e.code)||void 0===t?void 0:t.optimize,$=!0===O||void 0===O?1:O||0,T=null!==(n=null===(r=e.code)||void 0===r?void 0:r.regExp)&&void 0!==n?n:m,C=null!==(o=e.uriResolver)&&void 0!==o?o:d.default;return{strictSchema:null===(s=null!==(i=e.strictSchema)&&void 0!==i?i:x)||void 0===s||s,strictNumbers:null===(l=null!==(a=e.strictNumbers)&&void 0!==a?a:x)||void 0===l||l,strictTypes:null!==(u=null!==(c=e.strictTypes)&&void 0!==c?c:x)&&void 0!==u?u:"log",strictTuples:null!==(f=null!==(h=e.strictTuples)&&void 0!==h?h:x)&&void 0!==f?f:"log",strictRequired:null!==(g=null!==(p=e.strictRequired)&&void 0!==p?p:x)&&void 0!==g&&g,code:e.code?{...e.code,optimize:$,regExp:T}:{optimize:$,regExp:T},loopRequired:null!==(y=e.loopRequired)&&void 0!==y?y:200,loopEnum:null!==(b=e.loopEnum)&&void 0!==b?b:200,meta:null===(_=e.meta)||void 0===_||_,messages:null===(v=e.messages)||void 0===v||v,inlineRefs:null===(w=e.inlineRefs)||void 0===w||w,schemaId:null!==(S=e.schemaId)&&void 0!==S?S:"$id",addUsedSchema:null===(E=e.addUsedSchema)||void 0===E||E,validateSchema:null===(A=e.validateSchema)||void 0===A||A,validateFormats:null===(I=e.validateFormats)||void 0===I||I,unicodeRegExp:null===(P=e.unicodeRegExp)||void 0===P||P,int32range:null===(k=e.int32range)||void 0===k||k,uriResolver:C}}class w{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...v(e)};const{es5:t,lines:r}=this.opts.code;this.scope=new c.ValueScope({scope:{},prefixes:y,es5:t,lines:r}),this.logger=function(e){if(!1===e)return x;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}(e.logger);const n=e.validateFormats;e.validateFormats=!1,this.RULES=(0,a.getRules)(),S.call(this,b,e,"NOT SUPPORTED"),S.call(this,_,e,"DEPRECATED","warn"),this._metaOpts=k.call(this),e.formats&&I.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&P.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),A.call(this),e.validateFormats=n}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:e,meta:t,schemaId:r}=this.opts;let n=p;"id"===r&&(n={...p},n.id=n.$id,delete n.$id),t&&e&&this.addMetaSchema(n,n[r],!1)}defaultMeta(){const{meta:e,schemaId:t}=this.opts;return this.opts.defaultMeta="object"==typeof e?e[t]||e:void 0}validate(e,t){let r;if("string"==typeof e){if(r=this.getSchema(e),!r)throw new Error(`no schema with key or ref "${e}"`)}else r=this.compile(e);const n=r(t);return"$async"in r||(this.errors=r.errors),n}compile(e,t){const r=this._addSchema(e,t);return r.validate||this._compileSchemaEnv(r)}compileAsync(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");const{loadSchema:r}=this.opts;return n.call(this,e,t);async function n(e,t){await o.call(this,e.$schema);const r=this._addSchema(e,t);return r.validate||i.call(this,r)}async function o(e){e&&!this.getSchema(e)&&await n.call(this,{$ref:e},!0)}async function i(e){try{return this._compileSchemaEnv(e)}catch(t){if(!(t instanceof s.default))throw t;return a.call(this,t),await l.call(this,t.missingSchema),i.call(this,e)}}function a({missingSchema:e,missingRef:t}){if(this.refs[e])throw new Error(`AnySchema ${e} is loaded but ${t} cannot be resolved`)}async function l(e){const r=await c.call(this,e);this.refs[e]||await o.call(this,r.$schema),this.refs[e]||this.addSchema(r,e,t)}async function c(e){const t=this._loading[e];if(t)return t;try{return await(this._loading[e]=r(e))}finally{delete this._loading[e]}}}addSchema(e,t,r,n=this.opts.validateSchema){if(Array.isArray(e)){for(const t of e)this.addSchema(t,void 0,r,n);return this}let o;if("object"==typeof e){const{schemaId:t}=this.opts;if(o=e[t],void 0!==o&&"string"!=typeof o)throw new Error(`schema ${t} must be string`)}return t=(0,u.normalizeId)(t||o),this._checkUnique(t),this.schemas[t]=this._addSchema(e,r,t,n,!0),this}addMetaSchema(e,t,r=this.opts.validateSchema){return this.addSchema(e,t,!0,r),this}validateSchema(e,t){if("boolean"==typeof e)return!0;let r;if(r=e.$schema,void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(r=r||this.opts.defaultMeta||this.defaultMeta(),!r)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const n=this.validate(r,e);if(!n&&t){const e="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(e);this.logger.error(e)}return n}getSchema(e){let t;for(;"string"==typeof(t=E.call(this,e));)e=t;if(void 0===t){const{schemaId:r}=this.opts,n=new l.SchemaEnv({schema:{},schemaId:r});if(t=l.resolveSchema.call(this,n,e),!t)return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const t=E.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{const t=e;this._cache.delete(t);let r=e[this.opts.schemaId];return r&&(r=(0,u.normalizeId)(r),delete this.schemas[r],delete this.refs[r]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(const t of e)this.addKeyword(t);return this}addKeyword(e,t){let r;if("string"==typeof e)r=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=r);else{if("object"!=typeof e||void 0!==t)throw new Error("invalid addKeywords parameters");if(r=(t=e).keyword,Array.isArray(r)&&!r.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if($.call(this,r,t),!t)return(0,f.eachItem)(r,e=>T.call(this,e)),this;j.call(this,t);const n={...t,type:(0,h.getJSONTypes)(t.type),schemaType:(0,h.getJSONTypes)(t.schemaType)};return(0,f.eachItem)(r,0===n.type.length?e=>T.call(this,e,n):e=>n.type.forEach(t=>T.call(this,e,n,t))),this}getKeyword(e){const t=this.RULES.all[e];return"object"==typeof t?t.definition:!!t}removeKeyword(e){const{RULES:t}=this;delete t.keywords[e],delete t.all[e];for(const r of t.rules){const t=r.rules.findIndex(t=>t.keyword===e);t>=0&&r.rules.splice(t,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:t=", ",dataVar:r="data"}={}){return e&&0!==e.length?e.map(e=>`${r}${e.instancePath} ${e.message}`).reduce((e,r)=>e+t+r):"No errors"}$dataMetaSchema(e,t){const r=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(const n of t){const t=n.split("/").slice(1);let o=e;for(const e of t)o=o[e];for(const e in r){const t=r[e];if("object"!=typeof t)continue;const{$data:n}=t.definition,i=o[e];n&&i&&(o[e]=N(i))}}return e}_removeAllSchemas(e,t){for(const r in e){const n=e[r];t&&!t.test(r)||("string"==typeof n?delete e[r]:n&&!n.meta&&(this._cache.delete(n.schema),delete e[r]))}}_addSchema(e,t,r,n=this.opts.validateSchema,o=this.opts.addUsedSchema){let i;const{schemaId:s}=this.opts;if("object"==typeof e)i=e[s];else{if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}let a=this._cache.get(e);if(void 0!==a)return a;r=(0,u.normalizeId)(i||r);const c=u.getSchemaRefs.call(this,e,r);return a=new l.SchemaEnv({schema:e,schemaId:s,meta:t,baseId:r,localRefs:c}),this._cache.set(a.schema,a),o&&!r.startsWith("#")&&(r&&this._checkUnique(r),this.refs[r]=a),n&&this.validateSchema(e,!0),a}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):l.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){const t=this.opts;this.opts=this._metaOpts;try{l.compileSchema.call(this,e)}finally{this.opts=t}}}function S(e,t,r,n="error"){for(const o in e){const i=o;i in t&&this.logger[n](`${r}: option ${o}. ${e[i]}`)}}function E(e){return e=(0,u.normalizeId)(e),this.schemas[e]||this.refs[e]}function A(){const e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(const t in e)this.addSchema(e[t],t)}function I(){for(const e in this.opts.formats){const t=this.opts.formats[e];t&&this.addFormat(e,t)}}function P(e){if(Array.isArray(e))this.addVocabulary(e);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const t in e){const r=e[t];r.keyword||(r.keyword=t),this.addKeyword(r)}}}function k(){const e={...this.opts};for(const t of g)delete e[t];return e}w.ValidationError=i.default,w.MissingRefError=s.default,t.default=w;const x={log(){},warn(){},error(){}},O=/^[a-z_$][a-z0-9_$:-]*$/i;function $(e,t){const{RULES:r}=this;if((0,f.eachItem)(e,e=>{if(r.keywords[e])throw new Error(`Keyword ${e} is already defined`);if(!O.test(e))throw new Error(`Keyword ${e} has invalid name`)}),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function T(e,t,r){var n;const o=null==t?void 0:t.post;if(r&&o)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:i}=this;let s=o?i.post:i.rules.find(({type:e})=>e===r);if(s||(s={type:r,rules:[]},i.rules.push(s)),i.keywords[e]=!0,!t)return;const a={keyword:e,definition:{...t,type:(0,h.getJSONTypes)(t.type),schemaType:(0,h.getJSONTypes)(t.schemaType)}};t.before?C.call(this,s,a,t.before):s.rules.push(a),i.all[e]=a,null===(n=t.implements)||void 0===n||n.forEach(e=>this.addKeyword(e))}function C(e,t,r){const n=e.rules.findIndex(e=>e.keyword===r);n>=0?e.rules.splice(n,0,t):(e.rules.push(t),this.logger.warn(`rule ${r} is not defined`))}function j(e){let{metaSchema:t}=e;void 0!==t&&(e.$data&&this.opts.$data&&(t=N(t)),e.validateSchema=this.compile(t,!0))}const R={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function N(e){return{anyOf:[e,R]}}},4227:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkStrictMode=t.getErrorPath=t.Type=t.useFunc=t.setEvaluated=t.evaluatedPropsToName=t.mergeEvaluated=t.eachItem=t.unescapeJsonPointer=t.escapeJsonPointer=t.escapeFragment=t.unescapeFragment=t.schemaRefOrVal=t.schemaHasRulesButRef=t.schemaHasRules=t.checkUnknownRules=t.alwaysValidSchema=t.toHash=void 0;const n=r(9029),o=r(1520);function i(e,t=e.schema){const{opts:r,self:n}=e;if(!r.strictSchema)return;if("boolean"==typeof t)return;const o=n.RULES.keywords;for(const r in t)o[r]||d(e,`unknown keyword: "${r}"`)}function s(e,t){if("boolean"==typeof e)return!e;for(const r in e)if(t[r])return!0;return!1}function a(e){return"number"==typeof e?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}function l(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function c({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:o}){return(i,s,a,l)=>{const c=void 0===a?s:a instanceof n.Name?(s instanceof n.Name?e(i,s,a):t(i,s,a),a):s instanceof n.Name?(t(i,a,s),s):r(s,a);return l!==n.Name||c instanceof n.Name?c:o(i,c)}}function u(e,t){if(!0===t)return e.var("props",!0);const r=e.var("props",n._`{}`);return void 0!==t&&h(e,r,t),r}function h(e,t,r){Object.keys(r).forEach(r=>e.assign(n._`${t}${(0,n.getProperty)(r)}`,!0))}t.toHash=function(e){const t={};for(const r of e)t[r]=!0;return t},t.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(i(e,t),!s(t,e.self.RULES.all))},t.checkUnknownRules=i,t.schemaHasRules=s,t.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(const r in e)if("$ref"!==r&&t.all[r])return!0;return!1},t.schemaRefOrVal=function({topSchemaRef:e,schemaPath:t},r,o,i){if(!i){if("number"==typeof r||"boolean"==typeof r)return r;if("string"==typeof r)return n._`${r}`}return n._`${e}${t}${(0,n.getProperty)(o)}`},t.unescapeFragment=function(e){return l(decodeURIComponent(e))},t.escapeFragment=function(e){return encodeURIComponent(a(e))},t.escapeJsonPointer=a,t.unescapeJsonPointer=l,t.eachItem=function(e,t){if(Array.isArray(e))for(const r of e)t(r);else t(e)},t.mergeEvaluated={props:c({mergeNames:(e,t,r)=>e.if(n._`${r} !== true && ${t} !== undefined`,()=>{e.if(n._`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,n._`${r} || {}`).code(n._`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if(n._`${r} !== true`,()=>{!0===t?e.assign(r,!0):(e.assign(r,n._`${r} || {}`),h(e,r,t))}),mergeValues:(e,t)=>!0===e||{...e,...t},resultToName:u}),items:c({mergeNames:(e,t,r)=>e.if(n._`${r} !== true && ${t} !== undefined`,()=>e.assign(r,n._`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if(n._`${r} !== true`,()=>e.assign(r,!0===t||n._`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},t.evaluatedPropsToName=u,t.setEvaluated=h;const f={};var p;function d(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,!0===r)throw new Error(t);e.self.logger.warn(t)}}t.useFunc=function(e,t){return e.scopeValue("func",{ref:t,code:f[t.code]||(f[t.code]=new o._Code(t.code))})},function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"}(p||(t.Type=p={})),t.getErrorPath=function(e,t,r){if(e instanceof n.Name){const o=t===p.Num;return r?o?n._`"[" + ${e} + "]"`:n._`"['" + ${e} + "']"`:o?n._`"/" + ${e}`:n._`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,n.getProperty)(e).toString():"/"+a(e)},t.checkStrictMode=d},4373:e=>{e.exports=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},e.exports.__esModule=!0,e.exports.default=e.exports},4426:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(4227),o={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){void 0===t.if&&(0,n.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};t.default=o},4486:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9029),o={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const r="maxProperties"===e?"more":"fewer";return n.str`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>n._`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:o}=e,i="maxProperties"===t?n.operators.GT:n.operators.LT;e.fail$data(n._`Object.keys(${r}).length ${i} ${o}`)}};t.default=o},4495:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendSubschemaMode=t.extendSubschemaData=t.getSubschema=void 0;const n=r(9029),o=r(4227);t.getSubschema=function(e,{keyword:t,schemaProp:r,schema:i,schemaPath:s,errSchemaPath:a,topSchemaRef:l}){if(void 0!==t&&void 0!==i)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==t){const i=e.schema[t];return void 0===r?{schema:i,schemaPath:n._`${e.schemaPath}${(0,n.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:i[r],schemaPath:n._`${e.schemaPath}${(0,n.getProperty)(t)}${(0,n.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,o.escapeFragment)(r)}`}}if(void 0!==i){if(void 0===s||void 0===a||void 0===l)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:i,schemaPath:s,topSchemaRef:l,errSchemaPath:a}}throw new Error('either "keyword" or "schema" must be passed')},t.extendSubschemaData=function(e,t,{dataProp:r,dataPropType:i,data:s,dataTypes:a,propertyName:l}){if(void 0!==s&&void 0!==r)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:c}=t;if(void 0!==r){const{errorPath:s,dataPathArr:a,opts:l}=t;u(c.let("data",n._`${t.data}${(0,n.getProperty)(r)}`,!0)),e.errorPath=n.str`${s}${(0,o.getErrorPath)(r,i,l.jsPropertySyntax)}`,e.parentDataProperty=n._`${r}`,e.dataPathArr=[...a,e.parentDataProperty]}function u(r){e.data=r,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,r]}void 0!==s&&(u(s instanceof n.Name?s:c.let("data",s,!0)),void 0!==l&&(e.propertyName=l)),a&&(e.dataTypes=a)},t.extendSubschemaMode=function(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:o,allErrors:i}){void 0!==n&&(e.compositeRule=n),void 0!==o&&(e.createErrors=o),void 0!==i&&(e.allErrors=i),e.jtdDiscriminator=t,e.jtdMetadata=r}},4551:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6939);class o extends Error{constructor(e,t,r,o){super(o||`can't resolve reference ${r} from id ${t}`),this.missingRef=(0,n.resolveUrl)(e,t,r),this.missingSchema=(0,n.normalizeId)((0,n.getFullPath)(e,this.missingRef))}}t.default=o},4633:(e,t,r)=>{var n=r(5172),o=r(6993),i=r(5869),s=r(887),a=r(1791),l=r(4373),c=r(579);function u(){"use strict";var t=o(),r=t.m(u),h=(Object.getPrototypeOf?Object.getPrototypeOf(r):r.__proto__).constructor;function f(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))}var p={throw:1,return:2,break:3,continue:3};function d(e){var t,r;return function(n){t||(t={stop:function(){return r(n.a,2)},catch:function(){return n.v},abrupt:function(e,t){return r(n.a,p[e],t)},delegateYield:function(e,o,i){return t.resultName=o,r(n.d,c(e),i)},finish:function(e){return r(n.f,e)}},r=function(e,r,o){n.p=t.prev,n.n=t.next;try{return e(r,o)}finally{t.next=n.n}}),t.resultName&&(t[t.resultName]=n.v,t.resultName=void 0),t.sent=n.v,t.next=n.n;try{return e.call(this,t)}finally{n.p=t.prev,n.n=t.next}}}return(e.exports=u=function(){return{wrap:function(e,r,n,o){return t.w(d(e),r,n,o&&o.reverse())},isGeneratorFunction:f,mark:t.m,awrap:function(e,t){return new n(e,t)},AsyncIterator:a,async:function(e,t,r,n,o){return(f(t)?s:i)(d(e),t,r,n,o)},keys:l,values:c}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=u,e.exports.__esModule=!0,e.exports.default=e.exports},4737:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9029),o={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>n.str`must match format "${e}"`,params:({schemaCode:e})=>n._`{format: ${e}}`},code(e,t){const{gen:r,data:o,$data:i,schema:s,schemaCode:a,it:l}=e,{opts:c,errSchemaPath:u,schemaEnv:h,self:f}=l;c.validateFormats&&(i?function(){const i=r.scopeValue("formats",{ref:f.formats,code:c.code.formats}),s=r.const("fDef",n._`${i}[${a}]`),l=r.let("fType"),u=r.let("format");r.if(n._`typeof ${s} == "object" && !(${s} instanceof RegExp)`,()=>r.assign(l,n._`${s}.type || "string"`).assign(u,n._`${s}.validate`),()=>r.assign(l,n._`"string"`).assign(u,s)),e.fail$data((0,n.or)(!1===c.strictSchema?n.nil:n._`${a} && !${u}`,function(){const e=h.$async?n._`(${s}.async ? await ${u}(${o}) : ${u}(${o}))`:n._`${u}(${o})`,r=n._`(typeof ${u} == "function" ? ${e} : ${u}.test(${o}))`;return n._`${u} && ${u} !== true && ${l} === ${t} && !${r}`}()))}():function(){const i=f.formats[s];if(!i)return void function(){if(!1!==c.strictSchema)throw new Error(e());function e(){return`unknown format "${s}" ignored in schema at path "${u}"`}f.logger.warn(e())}();if(!0===i)return;const[a,l,p]=function(e){const t=e instanceof RegExp?(0,n.regexpCode)(e):c.code.formats?n._`${c.code.formats}${(0,n.getProperty)(s)}`:void 0,o=r.scopeValue("formats",{key:s,ref:e,code:t});return"object"!=typeof e||e instanceof RegExp?["string",e,o]:[e.type||"string",e.validate,n._`${o}.validate`]}(i);a===t&&e.pass(function(){if("object"==typeof i&&!(i instanceof RegExp)&&i.async){if(!h.$async)throw new Error("async format in sync schema");return n._`await ${p}(${o})`}return"function"==typeof l?n._`${p}(${o})`:n._`${p}.test(${o})`}())}())}};t.default=o},4756:(e,t,r)=>{var n=r(4633)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},4834:e=>{"use strict";const t=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),r=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function n(e){let t="",r=0,n=0;for(n=0;n<e.length;n++)if(r=e[n].charCodeAt(0),48!==r){if(!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";t+=e[n];break}for(n+=1;n<e.length;n++){if(r=e[n].charCodeAt(0),!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";t+=e[n]}return t}const o=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function i(e){return e.length=0,!0}function s(e,t,r){if(e.length){const o=n(e);if(""===o)return r.error=!0,!1;t.push(o),e.length=0}return!0}function a(e){if(function(e){let t=0;for(let r=0;r<e.length;r++)":"===e[r]&&t++;return t}(e)<2)return{host:e,isIPV6:!1};const t=function(e){let t=0;const r={error:!1,address:"",zone:""},o=[],a=[];let l=!1,c=!1,u=s;for(let n=0;n<e.length;n++){const s=e[n];if("["!==s&&"]"!==s)if(":"!==s)if("%"===s){if(!u(a,o,r))break;u=i}else a.push(s);else{if(!0===l&&(c=!0),!u(a,o,r))break;if(++t>7){r.error=!0;break}n>0&&":"===e[n-1]&&(l=!0),o.push(":")}}return a.length&&(u===i?r.zone=a.join(""):c?o.push(a.join("")):o.push(n(a))),r.address=o.join(""),r}(e);if(t.error)return{host:e,isIPV6:!1};{let e=t.address,r=t.address;return t.zone&&(e+="%"+t.zone,r+="%25"+t.zone),{host:e,isIPV6:!0,escapedHost:r}}}e.exports={nonSimpleDomain:o,recomposeAuthority:function(e){const t=[];if(void 0!==e.userinfo&&(t.push(e.userinfo),t.push("@")),void 0!==e.host){let n=unescape(e.host);if(!r(n)){const t=a(n);n=!0===t.isIPV6?`[${t.escapedHost}]`:e.host}t.push(n)}return"number"!=typeof e.port&&"string"!=typeof e.port||(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0},normalizeComponentEncoding:function(e,t){const r=!0!==t?escape:unescape;return void 0!==e.scheme&&(e.scheme=r(e.scheme)),void 0!==e.userinfo&&(e.userinfo=r(e.userinfo)),void 0!==e.host&&(e.host=r(e.host)),void 0!==e.path&&(e.path=r(e.path)),void 0!==e.query&&(e.query=r(e.query)),void 0!==e.fragment&&(e.fragment=r(e.fragment)),e},removeDotSegments:function(e){let t=e;const r=[];let n=-1,o=0;for(;o=t.length;){if(1===o){if("."===t)break;if("/"===t){r.push("/");break}r.push(t);break}if(2===o){if("."===t[0]){if("."===t[1])break;if("/"===t[1]){t=t.slice(2);continue}}else if("/"===t[0]&&("."===t[1]||"/"===t[1])){r.push("/");break}}else if(3===o&&"/.."===t){0!==r.length&&r.pop(),r.push("/");break}if("."===t[0]){if("."===t[1]){if("/"===t[2]){t=t.slice(3);continue}}else if("/"===t[1]){t=t.slice(2);continue}}else if("/"===t[0]&&"."===t[1]){if("/"===t[2]){t=t.slice(2);continue}if("."===t[2]&&"/"===t[3]){t=t.slice(3),0!==r.length&&r.pop();continue}}if(-1===(n=t.indexOf("/",1))){r.push(t);break}r.push(t.slice(0,n)),t=t.slice(n)}return r.join("")},isIPv4:r,isUUID:t,normalizeIPv6:a,stringArrayToHexStripped:n}},4932:(e,t,r)=>{"use strict";r.r(t),r.d(t,{load:()=>l,wrap:()=>a});var n=r(7403),o=r(8389);const i=new Map([[0,null]]),s=new Map([[0,null]]),a=(0,n.createBroker)({clearInterval:({call:e})=>t=>{"symbol"==typeof i.get(t)&&(i.set(t,null),e("clear",{timerId:t,timerType:"interval"}).then(()=>{i.delete(t)}))},clearTimeout:({call:e})=>t=>{"symbol"==typeof s.get(t)&&(s.set(t,null),e("clear",{timerId:t,timerType:"timeout"}).then(()=>{s.delete(t)}))},setInterval:({call:e})=>(t,r=0,...n)=>{const s=Symbol(),a=(0,o.generateUniqueNumber)(i);i.set(a,s);const l=()=>e("set",{delay:r,now:performance.timeOrigin+performance.now(),timerId:a,timerType:"interval"}).then(()=>{const e=i.get(a);if(void 0===e)throw new Error("The timer is in an undefined state.");e===s&&(t(...n),i.get(a)===s&&l())});return l(),a},setTimeout:({call:e})=>(t,r=0,...n)=>{const i=Symbol(),a=(0,o.generateUniqueNumber)(s);return s.set(a,i),e("set",{delay:r,now:performance.timeOrigin+performance.now(),timerId:a,timerType:"timeout"}).then(()=>{const e=s.get(a);if(void 0===e)throw new Error("The timer is in an undefined state.");e===i&&(s.delete(a),t(...n))}),a}}),l=e=>{const t=new Worker(e);return a(t)}},5172:e=>{e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},5333:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5765),o=r(9029),i=r(4227),s=r(4227),a={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,data:a,parentSchema:l,it:c}=e,{opts:u}=c,h=(0,n.allSchemaProperties)(r),f=h.filter(e=>(0,i.alwaysValidSchema)(c,r[e]));if(0===h.length||f.length===h.length&&(!c.opts.unevaluated||!0===c.props))return;const p=u.strictSchema&&!u.allowMatchingProperties&&l.properties,d=t.name("valid");!0===c.props||c.props instanceof o.Name||(c.props=(0,s.evaluatedPropsToName)(t,c.props));const{props:m}=c;function g(e){for(const t in p)new RegExp(e).test(t)&&(0,i.checkStrictMode)(c,`property ${t} matches pattern ${e} (use allowMatchingProperties)`)}function y(r){t.forIn("key",a,i=>{t.if(o._`${(0,n.usePattern)(e,r)}.test(${i})`,()=>{const n=f.includes(r);n||e.subschema({keyword:"patternProperties",schemaProp:r,dataProp:i,dataPropType:s.Type.Str},d),c.opts.unevaluated&&!0!==m?t.assign(o._`${m}[${i}]`,!0):n||c.allErrors||t.if((0,o.not)(d),()=>t.break())})})}!function(){for(const e of h)p&&g(e),c.allErrors?y(e):(t.var(d,!0),y(e),t.if(d))}()}};t.default=a},5354:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(494),o={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,n.validateTuple)(e,"items")};t.default=o},5457:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateAdditionalItems=void 0;const n=r(9029),o=r(4227),i={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>n.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>n._`{limit: ${e}}`},code(e){const{parentSchema:t,it:r}=e,{items:n}=t;Array.isArray(n)?s(e,n):(0,o.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas')}};function s(e,t){const{gen:r,schema:i,data:s,keyword:a,it:l}=e;l.items=!0;const c=r.const("len",n._`${s}.length`);if(!1===i)e.setParams({len:t.length}),e.pass(n._`${c} <= ${t.length}`);else if("object"==typeof i&&!(0,o.alwaysValidSchema)(l,i)){const i=r.var("valid",n._`${c} <= ${t.length}`);r.if((0,n.not)(i),()=>function(i){r.forRange("i",t.length,c,t=>{e.subschema({keyword:a,dataProp:t,dataPropType:o.Type.Num},i),l.allErrors||r.if((0,n.not)(i),()=>r.break())})}(i)),e.ok(i)}}t.validateAdditionalItems=s,t.default=i},5546:e=>{function t(r,n,o,i){var s=Object.defineProperty;try{s({},"",{})}catch(r){s=0}e.exports=t=function(e,r,n,o){function i(r,n){t(e,r,function(e){return this._invoke(r,n,e)})}r?s?s(e,r,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[r]=n:(i("next",0),i("throw",1),i("return",2))},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n,o,i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},5606:e=>{var t,r,n=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var a,l=[],c=!1,u=-1;function h(){c&&a&&(c=!1,a.length?l=a.concat(l):u=-1,l.length&&f())}function f(){if(!c){var e=s(h);c=!0;for(var t=l.length;t;){for(a=l,l=[];++u<t;)a&&a[u].run();u=-1,t=l.length}a=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function d(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new p(e,t)),1!==l.length||c||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=d,n.addListener=d,n.once=d,n.off=d,n.removeListener=d,n.removeAllListeners=d,n.emit=d,n.prependListener=d,n.prependOnceListener=d,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},5715:(e,t,r)=>{var n=r(2987),o=r(1156),i=r(7122),s=r(7752);e.exports=function(e,t){return n(e)||o(e,t)||i(e,t)||s()},e.exports.__esModule=!0,e.exports.default=e.exports},5765:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateUnion=t.validateArray=t.usePattern=t.callValidateCode=t.schemaProperties=t.allSchemaProperties=t.noPropertyInData=t.propertyInData=t.isOwnProperty=t.hasPropFunc=t.reportMissingProp=t.checkMissingProp=t.checkReportMissingProp=void 0;const n=r(9029),o=r(4227),i=r(2023),s=r(4227);function a(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:n._`Object.prototype.hasOwnProperty`})}function l(e,t,r){return n._`${a(e)}.call(${t}, ${r})`}function c(e,t,r,o){const i=n._`${t}${(0,n.getProperty)(r)} === undefined`;return o?(0,n.or)(i,(0,n.not)(l(e,t,r))):i}function u(e){return e?Object.keys(e).filter(e=>"__proto__"!==e):[]}t.checkReportMissingProp=function(e,t){const{gen:r,data:o,it:i}=e;r.if(c(r,o,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:n._`${t}`},!0),e.error()})},t.checkMissingProp=function({gen:e,data:t,it:{opts:r}},o,i){return(0,n.or)(...o.map(o=>(0,n.and)(c(e,t,o,r.ownProperties),n._`${i} = ${o}`)))},t.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},t.hasPropFunc=a,t.isOwnProperty=l,t.propertyInData=function(e,t,r,o){const i=n._`${t}${(0,n.getProperty)(r)} !== undefined`;return o?n._`${i} && ${l(e,t,r)}`:i},t.noPropertyInData=c,t.allSchemaProperties=u,t.schemaProperties=function(e,t){return u(t).filter(r=>!(0,o.alwaysValidSchema)(e,t[r]))},t.callValidateCode=function({schemaCode:e,data:t,it:{gen:r,topSchemaRef:o,schemaPath:s,errorPath:a},it:l},c,u,h){const f=h?n._`${e}, ${t}, ${o}${s}`:t,p=[[i.default.instancePath,(0,n.strConcat)(i.default.instancePath,a)],[i.default.parentData,l.parentData],[i.default.parentDataProperty,l.parentDataProperty],[i.default.rootData,i.default.rootData]];l.opts.dynamicRef&&p.push([i.default.dynamicAnchors,i.default.dynamicAnchors]);const d=n._`${f}, ${r.object(...p)}`;return u!==n.nil?n._`${c}.call(${u}, ${d})`:n._`${c}(${d})`};const h=n._`new RegExp`;t.usePattern=function({gen:e,it:{opts:t}},r){const o=t.unicodeRegExp?"u":"",{regExp:i}=t.code,a=i(r,o);return e.scopeValue("pattern",{key:a.toString(),ref:a,code:n._`${"new RegExp"===i.code?h:(0,s.useFunc)(e,i)}(${r}, ${o})`})},t.validateArray=function(e){const{gen:t,data:r,keyword:i,it:s}=e,a=t.name("valid");if(s.allErrors){const e=t.let("valid",!0);return l(()=>t.assign(e,!1)),e}return t.var(a,!0),l(()=>t.break()),a;function l(s){const l=t.const("len",n._`${r}.length`);t.forRange("i",0,l,r=>{e.subschema({keyword:i,dataProp:r,dataPropType:o.Type.Num},a),t.if((0,n.not)(a),s)})}},t.validateUnion=function(e){const{gen:t,schema:r,keyword:i,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(e=>(0,o.alwaysValidSchema)(s,e))&&!s.opts.unevaluated)return;const a=t.let("valid",!1),l=t.name("_valid");t.block(()=>r.forEach((r,o)=>{const s=e.subschema({keyword:i,schemaProp:o,compositeRule:!0},l);t.assign(a,n._`${a} || ${l}`),e.mergeValidEvaluated(s,l)||t.if((0,n.not)(a))})),e.result(a,()=>e.reset(),()=>e.error(!0))}},5844:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(4227),o={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:r,it:o}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const i=t.name("valid");r.forEach((t,r)=>{if((0,n.alwaysValidSchema)(o,t))return;const s=e.subschema({keyword:"allOf",schemaProp:r},i);e.ok(i),e.mergeEvaluated(s)})}};t.default=o},5869:(e,t,r)=>{var n=r(887);e.exports=function(e,t,r,o,i){var s=n(e,t,r,o,i);return s.next().then(function(e){return e.done?e.value:s.next()})},e.exports.__esModule=!0,e.exports.default=e.exports},5882:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9029),o=n.operators,i={maximum:{okStr:"<=",ok:o.LTE,fail:o.GT},minimum:{okStr:">=",ok:o.GTE,fail:o.LT},exclusiveMaximum:{okStr:"<",ok:o.LT,fail:o.GTE},exclusiveMinimum:{okStr:">",ok:o.GT,fail:o.LTE}},s={message:({keyword:e,schemaCode:t})=>n.str`must be ${i[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>n._`{comparison: ${i[e].okStr}, limit: ${t}}`},a={keyword:Object.keys(i),type:"number",schemaType:"number",$data:!0,error:s,code(e){const{keyword:t,data:r,schemaCode:o}=e;e.fail$data(n._`${r} ${i[t].fail} ${o} || isNaN(${r})`)}};t.default=a},5944:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(8343);n.code='require("ajv/dist/runtime/uri").default',t.default=n},6074:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.callRef=t.getValidate=void 0;const n=r(4551),o=r(5765),i=r(9029),s=r(2023),a=r(3835),l=r(4227),c={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:o}=e,{baseId:s,schemaEnv:l,validateName:c,opts:f,self:p}=o,{root:d}=l;if(("#"===r||"#/"===r)&&s===d.baseId)return function(){if(l===d)return h(e,c,l,l.$async);const r=t.scopeValue("root",{ref:d});return h(e,i._`${r}.validate`,d,d.$async)}();const m=a.resolveRef.call(p,d,s,r);if(void 0===m)throw new n.default(o.opts.uriResolver,s,r);return m instanceof a.SchemaEnv?function(t){const r=u(e,t);h(e,r,t,t.$async)}(m):function(n){const o=t.scopeValue("schema",!0===f.code.source?{ref:n,code:(0,i.stringify)(n)}:{ref:n}),s=t.name("valid"),a=e.subschema({schema:n,dataTypes:[],schemaPath:i.nil,topSchemaRef:o,errSchemaPath:r},s);e.mergeEvaluated(a),e.ok(s)}(m)}};function u(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):i._`${r.scopeValue("wrapper",{ref:t})}.validate`}function h(e,t,r,n){const{gen:a,it:c}=e,{allErrors:u,schemaEnv:h,opts:f}=c,p=f.passContext?s.default.this:i.nil;function d(e){const t=i._`${e}.errors`;a.assign(s.default.vErrors,i._`${s.default.vErrors} === null ? ${t} : ${s.default.vErrors}.concat(${t})`),a.assign(s.default.errors,i._`${s.default.vErrors}.length`)}function m(e){var t;if(!c.opts.unevaluated)return;const n=null===(t=null==r?void 0:r.validate)||void 0===t?void 0:t.evaluated;if(!0!==c.props)if(n&&!n.dynamicProps)void 0!==n.props&&(c.props=l.mergeEvaluated.props(a,n.props,c.props));else{const t=a.var("props",i._`${e}.evaluated.props`);c.props=l.mergeEvaluated.props(a,t,c.props,i.Name)}if(!0!==c.items)if(n&&!n.dynamicItems)void 0!==n.items&&(c.items=l.mergeEvaluated.items(a,n.items,c.items));else{const t=a.var("items",i._`${e}.evaluated.items`);c.items=l.mergeEvaluated.items(a,t,c.items,i.Name)}}n?function(){if(!h.$async)throw new Error("async schema referenced by sync schema");const r=a.let("valid");a.try(()=>{a.code(i._`await ${(0,o.callValidateCode)(e,t,p)}`),m(t),u||a.assign(r,!0)},e=>{a.if(i._`!(${e} instanceof ${c.ValidationError})`,()=>a.throw(e)),d(e),u||a.assign(r,!1)}),e.ok(r)}():e.result((0,o.callValidateCode)(e,t,p),()=>m(t),()=>d(t))}t.getValidate=u,t.callRef=h,t.default=c},6144:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(2128),o=r(7060),i=r(6378),s=r(7532),a=r(9857),l=[n.default,o.default,(0,i.default)(),s.default,a.metadataVocabulary,a.contentVocabulary];t.default=l},6163:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9029),o=r(4227),i={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:e})=>n._`{passingSchemas: ${e.passing}}`},code(e){const{gen:t,schema:r,parentSchema:i,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&i.discriminator)return;const a=r,l=t.let("valid",!1),c=t.let("passing",null),u=t.name("_valid");e.setParams({passing:c}),t.block(function(){a.forEach((r,i)=>{let a;(0,o.alwaysValidSchema)(s,r)?t.var(u,!0):a=e.subschema({keyword:"oneOf",schemaProp:i,compositeRule:!0},u),i>0&&t.if(n._`${u} && ${l}`).assign(l,!1).assign(c,n._`[${c}, ${i}]`).else(),t.if(u,()=>{t.assign(l,!0),t.assign(c,i),a&&e.mergeEvaluated(a,n.Name)})})}),e.result(l,()=>e.reset(),()=>e.error(!0))}};t.default=i},6171:(e,t,r)=>{const n=r(1072),o=r(862),i=r(8665),s=r(7007),{nanoid:a}=r(3561);class l extends s{constructor({username:e,password:t,token:r,domain:n="vrpc",agent:o=a(8),broker:s="mqtts://broker.hivemq.com:8883",log:c="console",bestEffort:u=!1,version:h="",mqttClientId:f=null}={}){super(),this._validateDomain(n),this._validateAgent(o),this._username=e,this._password=t,this._token=r,this._agent=o,this._domain=n,this._broker=s,this._qos=u?0:1,this._version=h,this._mqttClientId=f||`va3${l._createHash(this._domain+this._agent)}`,"console"===c?(this._log=console,this._log.debug=()=>{}):this._log=c,this._baseTopic=`${this._domain}/${this._agent}`,i.onCallback(this._handleVrpcCallback.bind(this)),this._isolatedInstances=new Map,this._sharedInstances=new Map,this.on("error",e=>{this._log.debug(`Encountered an error: ${e.message}`)})}async serve(){let e=this._username,t=this._password;return this._token?(e=`${this._domain}/${this._agent}`,t=this._token):this._password||(e=`${this._domain}/${this._agent}`,t=a()),this._options={username:e,password:t,keepalive:30,connectTimeout:1e4,clientId:this._mqttClientId,rejectUnauthorized:!1,will:{topic:`${this._baseTopic}/__agentInfo__`,payload:this._createAgentInfoPayload({status:"offline"}),qos:this._qos,retain:!0}},this._log.info(`Domain : ${this._domain}`),this._log.info(`Agent  : ${this._agent}`),this._log.info(`Broker : ${this._broker}`),this._log.info("Connecting to MQTT server..."),this._client=o.connect(this._broker,this._options),this._client.on("connect",this._handleConnect.bind(this)),this._client.on("reconnect",this._handleReconnect.bind(this)),this._client.on("error",this._handleError.bind(this)),this._client.on("message",this._handleMessage.bind(this)),this._client.on("close",this._handleClose.bind(this)),this._client.on("offline",this._handleOffline.bind(this)),this._client.on("end",this._handleEnd.bind(this)),this._ensureConnected()}async end({unregister:e=!1}={}){try{if(!this._client||!this._client.connected)return void this.emit("end");const t=`${this._baseTopic}/__agentInfo__`;if(this._mqttPublish(t,this._createAgentInfoPayload({status:"offline"}),{retain:!0}),e){this._mqttPublish(t,null,{retain:!0});const e=this._getClasses();for(const t of e){const e=`${this._baseTopic}/${t}/__classInfo__`;this._mqttPublish(e,null,{retain:!0})}}await new Promise(e=>this._client.end(!1,{},e))}catch(e){this._log.error(e,`Problem during disconnecting agent: ${e.message}`)}}static _createHash(e,t=20){let r=5381,n=52711;for(let t=0;t<e.length;t++){const o=e.charCodeAt(t);r=33*r^o,n=33*n^o}return((r>>>0).toString(16).padStart(8,"0")+(n>>>0).toString(16).padStart(8,"0")).slice(0,t)}_validateDomain(e){if(!e)throw new Error("The domain must be specified");if(e.match(/[+/#*]/))throw new Error('The domain must NOT contain any of those characters: "+", "/", "#", "*"')}_validateAgent(e){if(!e)throw new Error("The agent must be specified");if(e.match(/[+/#*]/))throw new Error('The agent must NOT contain any of those characters: "+", "/", "#", "*"')}_createAgentInfoPayload({status:e}){return JSON.stringify({status:e,hostname:n.hostname(),version:this._version,v:3})}_mqttPublish(e,t,r){this._client.publish(e,t,{qos:this._qos,...r},e=>{e&&this._log.warn(`Could not publish MQTT message because: ${e.message}`)})}_mqttSubscribe(e,t){this._client.subscribe(e,{qos:this._qos,...t},(r,n)=>{if(r)this._log.warn(`Could not subscribe to topic(s) '${e}', because: ${r.message}`);else{const o=Array.isArray(e)?e:[e],i=n.filter(e=>128===e.qos).map(e=>e.topic);i.length>0&&((r=new Error(`Could not subscribe all ${o.length} topic(s) but got error qos=128 on following ${i.length} topic(s): ${i}`)).code="SUBSCRIBE_FAILED",r.subscribeOptions=t,this._log.error(r),this.emit("error",r));const s=n.filter(e=>e.qos<this._qos);s.length>0&&((r=new Error(`Could not subscribe all ${o.length} topic(s) at desired qos=${this._qos} but got reduced qos on following ${s.length} topic(s): ${JSON.stringify(s)}`)).code="SUBSCRIBE_REDUCED_QOS",r.subscribeOptions=t,this._log.warn(r),this.emit("error",r)),0===n.length&&this._log.debug(`Already subscribed to topic '${e}'`)}})}_mqttUnsubscribe(e,t){this._client.unsubscribe(e,t,t=>{t&&this._log.warn(`Could not unsubscribe from topic: ${e} because: ${t.message}`)})}_getClasses(){return i._getClassesArray()}_getInstances(e){return i._getInstancesArray(e)}_getMemberFunctions(e){return i._getMemberFunctionsArray(e)}_getStaticFunctions(e){return i._getStaticFunctionsArray(e)}_getMetaData(e){return i._getMetaData(e)}async _ensureConnected(){return new Promise(e=>{this._client.connected?e():(this._client.once("connect",e),this.once("end",e))})}_handleVrpcCallback(e){const{s:t,i:r,r:n,e:o,a:i}=e,s=r.startsWith("__e__")?r.slice(5):t;try{this._log.debug(`Forwarding callback to: ${s} with payload:`,e),this._mqttPublish(s,l._stringifySafely({a:i,r:n,e:o,i:r,v:3}))}catch(e){this._log.warn(e,`Problem publishing vrpc callback to ${s} because of: ${e.message}`)}}static _stringifySafely(e){let t;const{c:r,f:n}=e;try{t=JSON.stringify(e)}catch(o){this._log.debug(`Failed serialization of return value for: ${r}::${n}, because: ${o.message}`),e.r="__vrpc::not-serializable__",t=JSON.stringify(e)}return t}_handleConnect(){this._log.info("[OK]");try{const e=this._generateTopics();e.length>0&&this._mqttSubscribe(e)}catch(e){this._log.error(e,`Problem during initial topic subscription: ${e.message}`)}this._publishAgentInfoMessage(),this._getClasses().forEach(e=>{this._publishClassInfoMessage(e)});for(const[e,{className:t}]of i._instances.entries())this._subscribeToMethodsOfNewInstance(t,e);this.emit("connect")}_publishAgentInfoMessage(){this._mqttPublish(`${this._baseTopic}/__agentInfo__`,this._createAgentInfoPayload({status:"online"}),{retain:!0})}_publishClassInfoMessage(e){const t={className:e,instances:this._getInstances(e),memberFunctions:this._getMemberFunctions(e),staticFunctions:this._getStaticFunctions(e),meta:this._getMetaData(e),v:3};try{this._mqttPublish(`${this._baseTopic}/${e}/__classInfo__`,JSON.stringify(t),{retain:!0})}catch(e){this._log.error(e,`Problem during publishing class info: ${e.message}`)}}_generateTopics(){const e=[],t=this._getClasses();return t.length>0?this._log.info(`Registering classes: ${t.join(", ")}`):this._log.warn("No classes are registered"),t.forEach(t=>{this._getStaticFunctions(t).forEach(r=>{e.push(`${this._baseTopic}/${t}/__static__/${r}`)})}),e}_handleMessage(e,t){try{const r=JSON.parse(t.toString());this._log.debug(`Message arrived with topic: ${e} and payload:`,r);const n=e.split("/"),[,,o,s,a]=n;if(4===n.length&&"__clientInfo__"===n[3])return void this._handleClientInfoMessage(e,r);if(5!==n.length)return void this._log.warn(`Ignoring message with invalid topic: ${e}`);switch(r.c="__static__"===s?o:s,r.f=a,i._call(r)&&this._mqttSubscribe(`${r.s}/__clientInfo__`),a){case"__createIsolated__":{const e=r.r;this._subscribeToMethodsOfNewInstance(o,e),this._registerIsolatedInstance(e,r.s);break}case"__createShared__":{const e=r.r;this._hasSharedInstance(e)||(this._subscribeToMethodsOfNewInstance(o,e),this._publishClassInfoMessage(o)),this._registerSharedInstance(e,r.s);break}case"__delete__":this._unsubscribeMethodsOfDeletedInstance(o,s),this._unregisterInstance(r.a[0],r.s)&&this._publishClassInfoMessage(o)}const{a:c,r:u,e:h,i:f,v:p}=r,d=h?{a:c,r:u,e:h,i:f,v:p}:{a:c,r:u,i:f,v:p};this._mqttPublish(r.s,l._stringifySafely(d))}catch(e){this._log.error(e,`Problem while handling incoming message: ${e.message}`)}}_handleClientInfoMessage(e,t){const r=e.slice(0,-15);if("offline"===t.status){i._unregisterClient(r);const e=this._isolatedInstances.get(r);e&&e.forEach(e=>{const t={f:"__delete__",a:[e],r:null};i._call(t),t.r&&this._log.debug(`Auto-deleted isolated instance: ${e}`)}),this._mqttUnsubscribe(`${r}/__clientInfo__`),this.emit("clientGone",r)}}_registerIsolatedInstance(e,t){const r=this._isolatedInstances.get(t);r?r.add(e):(this._isolatedInstances.set(t,new Set([e])),this._sharedInstances.has(t)||this._mqttSubscribe(`${t}/__clientInfo__`),this._log.info(`Tracking lifetime of client: ${t}`))}_registerSharedInstance(e,t){const r=this._sharedInstances.get(t);r?r.add(e):(this._sharedInstances.set(t,new Set([e])),this._isolatedInstances.has(t)||this._mqttSubscribe(`${t}/__clientInfo__`),this._log.debug(`Tracking lifetime of client: ${t}`))}_hasSharedInstance(e){for(const[,t]of this._sharedInstances)if(t.has(e))return!0;return!1}_unregisterInstance(e,t){const r=this._isolatedInstances.get(t);if(r&&r.has(e))return r.delete(e),0===r.length&&(this._isolatedInstances.delete(t),this._mqttUnsubscribe(`${t}/__clientInfo__`),this._log.debug(`Stopped tracking lifetime of client: ${t}`)),!1;let n=!1;return this._sharedInstances.forEach(async r=>{r.has(e)&&(n=!0,r.delete(e),0===r.length&&(this._sharedInstances.delete(t),this._mqttUnsubscribe(`${t}/__clientInfo__`),this._log.debug(`Stopped tracking lifetime of client: ${t}`)))}),!!n||(this._log.warn(`Failed un-registering not registered instance: ${e}`),!1)}_subscribeToMethodsOfNewInstance(e,t){const r=`${this._baseTopic}/${e}/${t}/+`;this._mqttSubscribe(r),this._log.debug(`Subscribed to new topic after instantiation: ${r}`)}_unsubscribeMethodsOfDeletedInstance(e,t){const r=`${this._baseTopic}/${e}/${t}/+`;this._mqttUnsubscribe(r),this._log.debug(`Unsubscribed from topic after deletion: ${r}`)}_handleReconnect(){this._log.warn(`Reconnecting to ${this._broker}`),this.emit("reconnect")}_handleError(e){this.emit("error",e)}_handleClose(){this.emit("close")}_handleOffline(){this.emit("offline")}_handleEnd(){this.emit("end")}}e.exports=l},6250:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(2017);n.code='require("ajv/dist/runtime/equal").default',t.default=n},6378:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5457),o=r(5354),i=r(494),s=r(3966),a=r(2661),l=r(3025),c=r(9713),u=r(8660),h=r(117),f=r(5333),p=r(7923),d=r(6505),m=r(6163),g=r(5844),y=r(1239),b=r(4426);t.default=function(e=!1){const t=[p.default,d.default,m.default,g.default,y.default,b.default,c.default,u.default,l.default,h.default,f.default];return e?t.push(o.default,s.default):t.push(n.default,i.default),t.push(a.default),t}},6505:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:r(5765).validateUnion,error:{message:"must match a schema in anyOf"}};t.default=n},6653:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9029),o=r(7652),i=r(3835),s=r(4551),a=r(4227),l={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:e,tagName:t}})=>e===o.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>n._`{error: ${e}, tag: ${r}, tagValue: ${t}}`},code(e){const{gen:t,data:r,schema:l,parentSchema:c,it:u}=e,{oneOf:h}=c;if(!u.opts.discriminator)throw new Error("discriminator: requires discriminator option");const f=l.propertyName;if("string"!=typeof f)throw new Error("discriminator: requires propertyName");if(l.mapping)throw new Error("discriminator: mapping is not supported");if(!h)throw new Error("discriminator: requires oneOf keyword");const p=t.let("valid",!1),d=t.const("tag",n._`${r}${(0,n.getProperty)(f)}`);function m(r){const o=t.name("valid"),i=e.subschema({keyword:"oneOf",schemaProp:r},o);return e.mergeEvaluated(i,n.Name),o}t.if(n._`typeof ${d} == "string"`,()=>function(){const r=function(){var e;const t={},r=o(c);let n=!0;for(let t=0;t<h.length;t++){let c=h[t];if((null==c?void 0:c.$ref)&&!(0,a.schemaHasRulesButRef)(c,u.self.RULES)){const e=c.$ref;if(c=i.resolveRef.call(u.self,u.schemaEnv.root,u.baseId,e),c instanceof i.SchemaEnv&&(c=c.schema),void 0===c)throw new s.default(u.opts.uriResolver,u.baseId,e)}const p=null===(e=null==c?void 0:c.properties)||void 0===e?void 0:e[f];if("object"!=typeof p)throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${f}"`);n=n&&(r||o(c)),l(p,t)}if(!n)throw new Error(`discriminator: "${f}" must be required`);return t;function o({required:e}){return Array.isArray(e)&&e.includes(f)}function l(e,t){if(e.const)p(e.const,t);else{if(!e.enum)throw new Error(`discriminator: "properties/${f}" must have "const" or "enum"`);for(const r of e.enum)p(r,t)}}function p(e,r){if("string"!=typeof e||e in t)throw new Error(`discriminator: "${f}" values must be unique strings`);t[e]=r}}();t.if(!1);for(const e in r)t.elseIf(n._`${d} === ${e}`),t.assign(p,m(r[e]));t.else(),e.error(!1,{discrError:o.DiscrError.Mapping,tag:d,tagName:f}),t.endIf()}(),()=>e.error(!1,{discrError:o.DiscrError.Tag,tag:d,tagName:f})),e.ok(p)}};t.default=l},6939:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSchemaRefs=t.resolveUrl=t.normalizeId=t._getFullPath=t.getFullPath=t.inlineRef=void 0;const n=r(4227),o=r(2017),i=r(7106),s=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);t.inlineRef=function(e,t=!0){return"boolean"==typeof e||(!0===t?!l(e):!!t&&c(e)<=t)};const a=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function l(e){for(const t in e){if(a.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(l))return!0;if("object"==typeof r&&l(r))return!0}return!1}function c(e){let t=0;for(const r in e){if("$ref"===r)return 1/0;if(t++,!s.has(r)&&("object"==typeof e[r]&&(0,n.eachItem)(e[r],e=>t+=c(e)),t===1/0))return 1/0}return t}function u(e,t="",r){!1!==r&&(t=p(t));const n=e.parse(t);return h(e,n)}function h(e,t){return e.serialize(t).split("#")[0]+"#"}t.getFullPath=u,t._getFullPath=h;const f=/#\/?$/;function p(e){return e?e.replace(f,""):""}t.normalizeId=p,t.resolveUrl=function(e,t,r){return r=p(r),e.resolve(t,r)};const d=/^[a-z_][-a-z0-9._]*$/i;t.getSchemaRefs=function(e,t){if("boolean"==typeof e)return{};const{schemaId:r,uriResolver:n}=this.opts,s=p(e[r]||t),a={"":s},l=u(n,s,!1),c={},h=new Set;return i(e,{allKeys:!0},(e,t,n,o)=>{if(void 0===o)return;const i=l+t;let s=a[o];function u(t){const r=this.opts.uriResolver.resolve;if(t=p(s?r(s,t):t),h.has(t))throw m(t);h.add(t);let n=this.refs[t];return"string"==typeof n&&(n=this.refs[n]),"object"==typeof n?f(e,n.schema,t):t!==p(i)&&("#"===t[0]?(f(e,c[t],t),c[t]=e):this.refs[t]=i),t}function g(e){if("string"==typeof e){if(!d.test(e))throw new Error(`invalid anchor "${e}"`);u.call(this,`#${e}`)}}"string"==typeof e[r]&&(s=u.call(this,e[r])),g.call(this,e.$anchor),g.call(this,e.$dynamicAnchor),a[t]=s}),c;function f(e,t,r){if(void 0!==t&&!o(e,t))throw m(r)}function m(e){return new Error(`reference "${e}" resolves to more than one schema`)}}},6993:(e,t,r)=>{var n=r(5546);function o(){var t,r,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.toStringTag||"@@toStringTag";function l(e,o,i,s){var a=o&&o.prototype instanceof u?o:u,l=Object.create(a.prototype);return n(l,"_invoke",function(e,n,o){var i,s,a,l=0,u=o||[],h=!1,f={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,r){return i=e,s=0,a=t,f.n=r,c}};function p(e,n){for(s=e,a=n,r=0;!h&&l&&!o&&r<u.length;r++){var o,i=u[r],p=f.p,d=i[2];e>3?(o=d===n)&&(a=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=e<2&&p<i[1])?(s=0,f.v=n,f.n=i[1]):p<d&&(o=e<3||i[0]>n||n>d)&&(i[4]=e,i[5]=n,f.n=d,s=0))}if(o||e>1)return c;throw h=!0,n}return function(o,u,d){if(l>1)throw TypeError("Generator is already running");for(h&&1===u&&p(u,d),s=u,a=d;(r=s<2?t:a)||!h;){i||(s?s<3?(s>1&&(f.n=-1),p(s,a)):f.n=a:f.v=a);try{if(l=2,i){if(s||(o="next"),r=i[o]){if(!(r=r.call(i,a)))throw TypeError("iterator result is not an object");if(!r.done)return r;a=r.value,s<2&&(s=0)}else 1===s&&(r=i.return)&&r.call(i),s<2&&(a=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=t}else if((r=(h=f.n<0)?a:e.call(n,f))!==c)break}catch(e){i=t,s=1,a=e}finally{l=1}}return{value:r,done:h}}}(e,i,s),!0),l}var c={};function u(){}function h(){}function f(){}r=Object.getPrototypeOf;var p=[][s]?r(r([][s]())):(n(r={},s,function(){return this}),r),d=f.prototype=u.prototype=Object.create(p);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,n(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return h.prototype=f,n(d,"constructor",f),n(f,"constructor",h),h.displayName="GeneratorFunction",n(f,a,"GeneratorFunction"),n(d),n(d,a,"Generator"),n(d,s,function(){return this}),n(d,"toString",function(){return"[object Generator]"}),(e.exports=o=function(){return{w:l,m}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},7007:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise(function(r,n){function o(r){e.removeListener(t,i),n(r)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",o),r([].slice.call(arguments))}m(e,t,i,{once:!0}),"error"!==t&&function(e,t){"function"==typeof e.on&&m(e,"error",t,{once:!0})}(e,o)})},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function c(e,t,r,n){var o,i,s,c;if(a(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),s=i[t]),void 0===s)s=i[t]=r,++e._eventsCount;else if("function"==typeof s?s=i[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(o=l(e))>0&&s.length>o&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,c=u,console&&console.warn&&console.warn(c)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=u.bind(n);return o.listener=r,n.wrapFn=o,o}function f(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):d(o,o.length)}function p(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function d(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function m(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function o(i){n.once&&e.removeEventListener(t,o),r(i)})}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return l(this)},i.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var o="error"===e,i=this._events;if(void 0!==i)o=o&&void 0===i.error;else if(!o)return!1;if(o){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)n(l,this,t);else{var c=l.length,u=d(l,c);for(r=0;r<c;++r)n(u[r],this,t)}return!0},i.prototype.addListener=function(e,t){return c(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return c(this,e,t,!0)},i.prototype.once=function(e,t){return a(t),this.on(e,h(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,h(this,e,t)),this},i.prototype.removeListener=function(e,t){var r,n,o,i,s;if(a(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){s=r[i].listener,o=i;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},i.prototype.listeners=function(e){return f(this,e,!0)},i.prototype.rawListeners=function(e){return f(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},i.prototype.listenerCount=p,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},7060:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5882),o=r(3439),i=r(7307),s=r(422),a=r(4486),l=r(4003),c=r(1163),u=r(617),h=r(7935),f=r(8643),p=[n.default,o.default,i.default,s.default,a.default,l.default,c.default,u.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},h.default,f.default];t.default=p},7106:e=>{"use strict";var t=e.exports=function(e,t,n){"function"==typeof t&&(n=t,t={}),r(t,"function"==typeof(n=t.cb||n)?n:n.pre||function(){},n.post||function(){},e,"",e)};function r(e,o,i,s,a,l,c,u,h,f){if(s&&"object"==typeof s&&!Array.isArray(s)){for(var p in o(s,a,l,c,u,h,f),s){var d=s[p];if(Array.isArray(d)){if(p in t.arrayKeywords)for(var m=0;m<d.length;m++)r(e,o,i,d[m],a+"/"+p+"/"+m,l,a,p,s,m)}else if(p in t.propsKeywords){if(d&&"object"==typeof d)for(var g in d)r(e,o,i,d[g],a+"/"+p+"/"+n(g),l,a,p,s,g)}else(p in t.keywords||e.allKeys&&!(p in t.skipKeywords))&&r(e,o,i,d,a+"/"+p,l,a,p,s)}i(s,a,l,c,u,h,f)}}function n(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},7122:(e,t,r)=>{var n=r(79);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},7307:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9029),o=r(4227),i=r(3853),s={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const r="maxLength"===e?"more":"fewer";return n.str`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>n._`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:s,it:a}=e,l="maxLength"===t?n.operators.GT:n.operators.LT,c=!1===a.opts.unicode?n._`${r}.length`:n._`${(0,o.useFunc)(e.gen,i.default)}(${r})`;e.fail$data(n._`${c} ${l} ${s}`)}};t.default=s},7403:(e,t,r)=>{"use strict";r.r(t),r.d(t,{createBroker:()=>s});var n=r(8389);const o=new WeakMap,i=new WeakMap,s=e=>{const t=(r=e,{...r,connect:({call:e})=>async()=>{const{port1:t,port2:r}=new MessageChannel,n=await e("connect",{port:t},[t]);return o.set(r,n),r},disconnect:({call:e})=>async t=>{const r=o.get(t);if(void 0===r)throw new Error("The given port is not connected.");await e("disconnect",{portId:r})},isSupported:({call:e})=>()=>e("isSupported")});var r;return e=>{const r=(e=>{if(i.has(e))return i.get(e);const t=new Map;return i.set(e,t),t})(e);e.addEventListener("message",({data:e})=>{const{id:t}=e;if(null!==t&&r.has(t)){const{reject:n,resolve:o}=r.get(t);r.delete(t),void 0===e.error?o(e.result):n(new Error(e.error.message))}}),(e=>"function"==typeof e.start)(e)&&e.start();const o=(t,o=null,i=[])=>new Promise((s,a)=>{const l=(0,n.generateUniqueNumber)(r);r.set(l,{reject:a,resolve:s}),null===o?e.postMessage({id:l,method:t},i):e.postMessage({id:l,method:t,params:o},i)}),s=(t,r,n=[])=>{e.postMessage({id:null,method:t,params:r},n)};let a={};for(const[e,r]of Object.entries(t))a={...a,[e]:r({call:o,notify:s})};return{...a}}}},7532:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=[r(4737).default];t.default=n},7652:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DiscrError=void 0,function(e){e.Tag="tag",e.Mapping="mapping"}(r||(t.DiscrError=r={}))},7736:(e,t,r)=>{var n=r(3738).default,o=r(9045);e.exports=function(e){var t=o(e,"string");return"symbol"==n(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},7752:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},7845:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const n=r(1520);class o extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}var i;!function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"}(i||(t.UsedValueState=i={})),t.varKinds={const:new n.Name("const"),let:new n.Name("let"),var:new n.Name("var")};class s{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof n.Name?e:this.name(e)}name(e){return new n.Name(this._newName(e))}_newName(e){return`${e}${(this._names[e]||this._nameGroup(e)).index++}`}_nameGroup(e){var t,r;if((null===(r=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===r?void 0:r.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}t.Scope=s;class a extends n.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:t,itemIndex:r}){this.value=e,this.scopePath=n._`.${new n.Name(t)}[${r}]`}}t.ValueScopeName=a;const l=n._`\n`;t.ValueScope=class extends s{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?l:n.nil}}get(){return this._scope}name(e){return new a(e,this._newName(e))}value(e,t){var r;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");const n=this.toName(e),{prefix:o}=n,i=null!==(r=t.key)&&void 0!==r?r:t.ref;let s=this._values[o];if(s){const e=s.get(i);if(e)return e}else s=this._values[o]=new Map;s.set(i,n);const a=this._scope[o]||(this._scope[o]=[]),l=a.length;return a[l]=t.ref,n.setValue(t,{property:o,itemIndex:l}),n}getValue(e,t){const r=this._values[e];if(r)return r.get(t)}scopeRefs(e,t=this._values){return this._reduceValues(t,t=>{if(void 0===t.scopePath)throw new Error(`CodeGen: name "${t}" has no value`);return n._`${e}${t.scopePath}`})}scopeCode(e=this._values,t,r){return this._reduceValues(e,e=>{if(void 0===e.value)throw new Error(`CodeGen: name "${e}" has no value`);return e.value.code},t,r)}_reduceValues(e,r,s={},a){let l=n.nil;for(const c in e){const u=e[c];if(!u)continue;const h=s[c]=s[c]||new Map;u.forEach(e=>{if(h.has(e))return;h.set(e,i.Started);let s=r(e);if(s){const r=this.opts.es5?t.varKinds.var:t.varKinds.const;l=n._`${l}${r} ${e} = ${s};${this.opts._n}`}else{if(!(s=null==a?void 0:a(e)))throw new o(e);l=n._`${l}${s}${this.opts._n}`}h.set(e,i.Completed)})}return l}}},7870:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assignDefaults=void 0;const n=r(9029),o=r(4227);function i(e,t,r){const{gen:i,compositeRule:s,data:a,opts:l}=e;if(void 0===r)return;const c=n._`${a}${(0,n.getProperty)(t)}`;if(s)return void(0,o.checkStrictMode)(e,`default is ignored for: ${c}`);let u=n._`${c} === undefined`;"empty"===l.useDefaults&&(u=n._`${u} || ${c} === null || ${c} === ""`),i.if(u,n._`${c} = ${(0,n.stringify)(r)}`)}t.assignDefaults=function(e,t){const{properties:r,items:n}=e.schema;if("object"===t&&r)for(const t in r)i(e,t,r[t].default);else"array"===t&&Array.isArray(n)&&n.forEach((t,r)=>i(e,r,t.default))}},7887:(e,t)=>{"use strict";function r(e,t){return t.rules.some(t=>n(e,t))}function n(e,t){var r;return void 0!==e[t.keyword]||(null===(r=t.definition.implements)||void 0===r?void 0:r.some(t=>void 0!==e[t]))}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUseRule=t.shouldUseGroup=t.schemaHasRulesForType=void 0,t.schemaHasRulesForType=function({schema:e,self:t},n){const o=t.RULES.types[n];return o&&!0!==o&&r(e,o)},t.shouldUseGroup=r,t.shouldUseRule=n},7923:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(4227),o={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:r,it:o}=e;if((0,n.alwaysValidSchema)(o,r))return void e.fail();const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};t.default=o},7935:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9029),o=r(4227),i=r(6250),s={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:e})=>n._`{allowedValue: ${e}}`},code(e){const{gen:t,data:r,$data:s,schemaCode:a,schema:l}=e;s||l&&"object"==typeof l?e.fail$data(n._`!${(0,o.useFunc)(t,i.default)}(${r}, ${a})`):e.fail(n._`${l} !== ${r}`)}};t.default=s},8343:(e,t,r)=>{"use strict";const{normalizeIPv6:n,removeDotSegments:o,recomposeAuthority:i,normalizeComponentEncoding:s,isIPv4:a,nonSimpleDomain:l}=r(4834),{SCHEMES:c,getSchemeHandler:u}=r(343);function h(e,t,r,n){const i={};return n||(e=d(f(e,r),r),t=d(f(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=o(t.path||""),i.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=o(t.path||""),i.query=t.query):(t.path?("/"===t.path[0]?i.path=o(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?i.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:i.path=t.path:i.path="/"+t.path,i.path=o(i.path)),i.query=t.query):(i.path=e.path,void 0!==t.query?i.query=t.query:i.query=e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function f(e,t){const r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},n=Object.assign({},t),s=[],a=u(n.scheme||r.scheme);a&&a.serialize&&a.serialize(r,n),void 0!==r.path&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),void 0!==r.scheme&&(r.path=r.path.split("%3A").join(":")))),"suffix"!==n.reference&&r.scheme&&s.push(r.scheme,":");const l=i(r);if(void 0!==l&&("suffix"!==n.reference&&s.push("//"),s.push(l),r.path&&"/"!==r.path[0]&&s.push("/")),void 0!==r.path){let e=r.path;n.absolutePath||a&&a.absolutePath||(e=o(e)),void 0===l&&"/"===e[0]&&"/"===e[1]&&(e="/%2F"+e.slice(2)),s.push(e)}return void 0!==r.query&&s.push("?",r.query),void 0!==r.fragment&&s.push("#",r.fragment),s.join("")}const p=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function d(e,t){const r=Object.assign({},t),o={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let i=!1;"suffix"===r.reference&&(e=r.scheme?r.scheme+":"+e:"//"+e);const s=e.match(p);if(s){if(o.scheme=s[1],o.userinfo=s[3],o.host=s[4],o.port=parseInt(s[5],10),o.path=s[6]||"",o.query=s[7],o.fragment=s[8],isNaN(o.port)&&(o.port=s[5]),o.host)if(!1===a(o.host)){const e=n(o.host);o.host=e.host.toLowerCase(),i=e.isIPV6}else i=!0;void 0!==o.scheme||void 0!==o.userinfo||void 0!==o.host||void 0!==o.port||void 0!==o.query||o.path?void 0===o.scheme?o.reference="relative":void 0===o.fragment?o.reference="absolute":o.reference="uri":o.reference="same-document",r.reference&&"suffix"!==r.reference&&r.reference!==o.reference&&(o.error=o.error||"URI is not a "+r.reference+" reference.");const t=u(r.scheme||o.scheme);if(!(r.unicodeSupport||t&&t.unicodeSupport)&&o.host&&(r.domainHost||t&&t.domainHost)&&!1===i&&l(o.host))try{o.host=URL.domainToASCII(o.host.toLowerCase())}catch(e){o.error=o.error||"Host's domain name can not be converted to ASCII: "+e}(!t||t&&!t.skipNormalize)&&(-1!==e.indexOf("%")&&(void 0!==o.scheme&&(o.scheme=unescape(o.scheme)),void 0!==o.host&&(o.host=unescape(o.host))),o.path&&(o.path=escape(unescape(o.path))),o.fragment&&(o.fragment=encodeURI(decodeURIComponent(o.fragment)))),t&&t.parse&&t.parse(o,r)}else o.error=o.error||"URI can not be parsed.";return o}const m={SCHEMES:c,normalize:function(e,t){return"string"==typeof e?e=f(d(e,t),t):"object"==typeof e&&(e=d(f(e,t),t)),e},resolve:function(e,t,r){const n=r?Object.assign({scheme:"null"},r):{scheme:"null"},o=h(d(e,n),d(t,n),n,!0);return n.skipEscape=!0,f(o,n)},resolveComponent:h,equal:function(e,t,r){return"string"==typeof e?(e=unescape(e),e=f(s(d(e,r),!0),{...r,skipEscape:!0})):"object"==typeof e&&(e=f(s(e,!0),{...r,skipEscape:!0})),"string"==typeof t?(t=unescape(t),t=f(s(d(t,r),!0),{...r,skipEscape:!0})):"object"==typeof t&&(t=f(s(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()},serialize:f,parse:d};e.exports=m,e.exports.default=m,e.exports.fastUri=m},8389:function(e,t){!function(e){"use strict";var t,r=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,n=536870912,o=1073741824,i=new WeakMap,s=function(e,t){return function(i){var s=t.get(i),a=void 0===s?i.size:s<o?s+1:0;if(!i.has(a))return e(i,a);if(i.size<n){for(;i.has(a);)a=Math.floor(Math.random()*o);return e(i,a)}if(i.size>r)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;i.has(a);)a=Math.floor(Math.random()*r);return e(i,a)}}((t=i,function(e,r){return t.set(e,r),r}),i),a=function(e){return function(t){var r=e(t);return t.add(r),r}}(s);e.addUniqueNumber=a,e.generateUniqueNumber=s}(t)},8577:(e,t,r)=>{var n=r(5606);const o=r(1072),{nanoid:i}=r(3561),s=r(862),a=s.default||s,l=r(7007);class c extends l{constructor({token:e,password:t,username:r,domain:n,agent:o="*",broker:s="mqtts://broker.hivemq.com:8883",timeout:a=12e3,log:c="console",bestEffort:u=!0,mqttClientId:h=null,identity:f=null,keepalive:p=30,requiresSchema:d=!1}={}){if(super(),!n)throw new Error("The domain must be specified");if(n.match(/[+/#*]/))throw new Error('The domain must NOT contain any of those characters: "+", "/", "#", "*"');if(o.match(/[+/#]/))throw new Error('The agent must NOT contain any of those characters: "+", "/", "#"');if(f&&f.match(/[+/#$]/))throw new Error('The identity must NOT contain any of those characters: "+", "/", "#", "$"');this._token=e,this._username=r,this._password=t,this._agent=o,this._domain=n,this._broker=s,this._timeout=a,this._identity=f,this._keepalive=p,this._qos=this._qos=u?0:1,this._requiresSchema=d,this._instance=i(8),this._mqttClientId=h||this._createMqttClientId(),this._vrpcClientId=this._createVrpcClientId(),this._agents={},this._eventEmitter=new l,this._invokeId=0,this._proxyId=0,this._client=null,this._cachedSubscriptions={},this._proxies={},this._callbackIds=new WeakMap,"console"===c?(this._log=console,this._log.debug=()=>{}):this._log=c}getClientId(){return this._vrpcClientId}async connect(){if(this._client&&this._client.connected)return;let e=this._username,t=this._password;this._token&&(e=e||this._generateUserName(),t=this._token);const r={username:e,password:t,clean:!0,keepalive:this._keepalive,clientId:this._mqttClientId,rejectUnauthorized:!1,connectTimeout:this._timeout,will:{topic:`${this._vrpcClientId}/__clientInfo__`,payload:JSON.stringify({status:"offline"})}};return void 0===e&&delete r.username,void 0===t&&delete r.password,this._client=a.connect(this._broker,r),this._client.on("offline",()=>{this._log.warn("MQTT client went offline."),this._agents={},this.emit("offline")}),this._client.on("reconnect",()=>{this._log.info("MQTT client is attempting to reconnect..."),this.emit("reconnect")}),this._client.on("error",e=>{this.emit("error",e)}),this._client.stream.on("error",e=>{this.emit("error",e)}),this.on("error",e=>{this._log.debug(`Encountered MQTT error: ${e.message}`)}),this._client.on("connect",()=>{const e="*"===this._agent?"+":this._agent;this._mqttSubscribe(`${this._domain}/${e}/__agentInfo__`),this._requiresSchema?this._mqttSubscribe(`${this._domain}/${e}/+/__classInfo__`):this._mqttSubscribe(`${this._domain}/${e}/+/__classInfoConcise__`),this._mqttSubscribe(this._vrpcClientId),this._log.info("Restoring event subscriptions after reconnect...");for(const e of Object.keys(this._cachedSubscriptions))this._mqttSubscribe(e);this.emit("connect")}),this._client.on("message",(e,t)=>{if(0!==t.length)try{const r=e.split("/"),[n,o,i,s]=r;if(n!==this._domain)return void this._log.warn(`Received message from foreign domain: ${n}`);if("__agentInfo__"===i){const{status:e,hostname:r,version:i}=JSON.parse(t.toString());this._createIfNotExist(o),this._agents[o].status=e,this._agents[o].hostname=r,this._agents[o].version=i,"offline"===e&&this._clearCachedSubscriptions({lostAgent:o}),this.emit("agent",{domain:n,agent:o,status:e,hostname:r,version:i})}else if("__classInfo__"===s||"__classInfoConcise__"===s){const e=JSON.parse(t.toString());this._createIfNotExist(o);const r=this._agents[o].classes[i],s=e.instances||[],a=r?r.instances:[],l=a.filter(e=>!s.includes(e)),c=s.filter(e=>!a.includes(e));this._agents[o].classes[i]=e;const{className:u,instances:h,memberFunctions:f,staticFunctions:p,meta:d}=e;0!==l.length&&(this.emit("instanceGone",l,{domain:n,agent:o,className:u}),l.forEach(e=>this._clearCachedSubscriptions({lostInstance:e}))),0!==c.length&&this.emit("instanceNew",c,{domain:n,agent:o,className:u}),this.emit("class",{domain:n,agent:o,className:u,instances:h,memberFunctions:f,staticFunctions:p,meta:d||{}})}else{const{i:e,a:r,e:n,r:o}=JSON.parse(t.toString());this._eventEmitter.emit(e,{a:r,e:n,r:o})}}catch(t){this._log.error(`Could not parse MQTT message on topic "${e}": ${t.message}`)}}),new Promise((e,t)=>{const r=setTimeout(()=>{this._client.end(!0,()=>{t(new Error(`Connection trial timed out (> ${this._timeout} ms)`))})},this._timeout);this._client.once("connect",()=>{clearTimeout(r),e()})})}async create({className:e,instance:t=i(8),args:r=[],agent:n=this._agent,cacheProxy:o=!1,isIsolated:s=!1}={}){if(!this._isConnected())throw new Error("Client is not connected");if("*"===n)throw new Error("Agent must be specified");const a={c:e,f:s?"__createIsolated__":"__createShared__",a:[t,...r],i:`${this._instance}-${this._invokeId++%Number.MAX_SAFE_INTEGER}`,s:this._vrpcClientId,v:3},l=await this._getProxy(n,e,a);return t&&o&&(this._proxies[t]=l),l}async getInstance(e,t={}){if(!this._isConnected())throw new Error("Client is not connected");if(this._proxies[e])return this._proxies[e];const{agent:r,className:n}=await this._getInstanceData(e,t);return this._createProxy(r,n,e)}async delete(e,t={}){if(!this._isConnected())throw new Error("Client is not connected");const{agent:r,className:n}=await this._getInstanceData(e,t),o={c:n,f:"__delete__",a:[e],i:`${this._instance}-${this._invokeId++%Number.MAX_SAFE_INTEGER}`,s:this._vrpcClientId,v:3},i=`${this._domain}/${r}/${n}/__static__/__delete__`;this._mqttPublish(i,JSON.stringify(o)),this._proxies[e]&&delete this._proxies[e];const s=await this._handleAgentAnswer(o,r);if(s&&(this._proxies[e]&&delete this._proxies[e],this._agents[r]&&this._agents[r].classes)){const t=this._agents[r].classes[n];if(t&&t.instances){const r=t.instances.indexOf(e);r>-1&&t.instances.splice(r,1)}}return s}async callStatic({className:e,functionName:t,args:r=[],agent:n=this._agent}={}){if(!this._isConnected())throw new Error("Client is not connected");const o=this._wrapArguments({agent:n,className:e,functionName:t,args:r});if(!o)return;const i={c:e,f:t,a:o,i:`${this._instance}-${this._invokeId++%Number.MAX_SAFE_INTEGER}`,s:this._vrpcClientId,v:3},s=`${this._domain}/${n}/${e}/__static__/${t}`;return await this._waitUntilClassIsOnline(n,e),this._mqttPublish(s,JSON.stringify(i)),this._handleAgentAnswer(i,n)}async callAll({className:e,functionName:t,args:r=[],agent:n=this._agent}={}){if(!this._isConnected())throw new Error("Client is not connected");const o={c:e,f:t,a:[],i:`${this._instance}-${this._invokeId++%Number.MAX_SAFE_INTEGER}`,s:this._vrpcClientId,v:3};if("*"===n){const n=[],i=this.getAvailableAgents();for(const s of i){const i=`${this._domain}/${s}/${e}/__static__/__callAll__`,a=this._wrapArguments({agent:s,className:e,functionName:t,args:r});if(!a)continue;o.a=[t,...a],await this._waitUntilClassIsOnline(s,e),this._mqttPublish(i,JSON.stringify(o));const l=await this._handleAgentAnswer(o,s);n.push(...l)}return n}const i=`${this._domain}/${n}/${e}/__static__/__callAll__`,s=this._wrapArguments({agent:n,className:e,functionName:t,args:r});if(s)return o.a=[t,...s],await this._waitUntilClassIsOnline(n,e),this._mqttPublish(i,JSON.stringify(o)),this._handleAgentAnswer(o,n)}getSystemInformation(){return this._agents}getAvailableAgents({mustBeOnline:e=!0}={}){const t=[];if(e){for(const e in this._agents){const{status:r}=this._agents[e];"online"===r&&t.push(e)}return t}return Object.keys(this._agents)}getAvailableClasses({agent:e=this._agent,mustBeOnline:t=!0}={}){if("*"===e)throw new Error("Agent must be specified");if(!this._agents[e])return[];const{classes:r,status:n}=this._agents[e];return t&&"online"!==n?[]:Object.keys(r)}getAvailableInstances({className:e,agent:t=this._agent,mustBeOnline:r=!0}={}){if("*"===t)throw new Error("Agent must be specified");if(!this._agents[t])return[];const{classes:n,status:o}=this._agents[t];return r&&"online"!==o?[]:n[e]?n[e].instances:[]}getAvailableMemberFunctions({className:e,agent:t=this._agent,mustBeOnline:r=!0}={}){if("*"===t)throw new Error("Agent must be specified");if(!this._agents[t])return[];const{classes:n,status:o}=this._agents[t];return r&&"online"!==o?[]:n[e]?n[e].memberFunctions.map(e=>this._stripSignature(e)):[]}getAvailableStaticFunctions({className:e,agent:t=this._agent,mustBeOnline:r=!0}={}){if("*"===t)throw new Error("Agent must be specified");if(!this._agents[t])return[];const{classes:n,status:o}=this._agents[t];return r&&"online"!==o?[]:n[e]?n[e].staticFunctions.map(e=>this._stripSignature(e)):[]}async reconnectWithToken(e,{agent:t=this._agent}={}){return this._token=e,this._agent=t,this._client&&await new Promise(e=>this._client.end(!1,{},e)),this.connect()}async unregisterAgent(e){if(this._agents[e]&&"offline"===this._agents[e].status){const t=`${this._domain}/${e}/__agentInfo__`;this._mqttPublish(t,null,{retain:!0});const r=this.getAvailableClasses({agent:e,mustBeOnline:!1});for(const t of r){const r=`${this._domain}/${e}/${t}/__classInfo__`;this._mqttPublish(r,null,{retain:!0})}return delete this._agents[e],!0}return!1}async end(){if(!this._client)return;this._mqttPublish(`${this._vrpcClientId}/__clientInfo__`,JSON.stringify({status:"offline",v:3})),this._eventEmitter.removeAllListeners(),this.removeAllListeners();const e=this._client;return this._client=null,new Promise(t=>e.end(!1,{},t))}static _createHash(e,t=20){let r=5381,n=52711;for(let t=0;t<e.length;t++){const o=e.charCodeAt(t);r=33*r^o,n=33*n^o}return((r>>>0).toString(16).padStart(8,"0")+(n>>>0).toString(16).padStart(8,"0")).slice(0,t)}_isConnected(){return this._client&&this._client.connected}_getCallbackId(e,{readOnly:t=!1}={}){if(!this._callbackIds.has(e)){if(t)return null;this._callbackIds.set(e,i(8))}return this._callbackIds.get(e)}_generateUserName(){return`${this._domain}:client@${o.hostname()}-${o.platform()}-js`}_createMqttClientId(){const e=o.arch()+o.homedir()+o.hostname()+JSON.stringify(o.networkInterfaces())+o.platform()+o.release()+o.totalmem()+o.type(),t=c._createHash(e,12);return`vc3${this._instance}${t}`}_createVrpcClientId(){const e=this._identity||this._instance;return`${this._domain}/${o.hostname()}/${e}`}_mqttPublish(e,t,r){this._client.publish(e,t,{qos:this._qos,...r},e=>{e&&(this._log.warn(`Could not publish MQTT message because: ${e.message}`),"client disconnecting"===e.message&&(this._log.error(`Failed to publish, because: ${e.message}`),this.emit("error",e),this._log.info("Forcing reconnect now..."),this._client.disconnecting=!1,this._client.reconnect()))})}_mqttSubscribe(e,t){this._client.subscribe(e,{qos:this._qos,...t},(r,n)=>{if(r)this._log.warn(`Could not subscribe to topic(s): '${e}', because: ${r.message}`),"client disconnecting"===r.message&&(this._log.error(`Failed to subscribe, because: ${r.message}`),this.emit("error",r),this._log.info("Forcing reconnect now..."),this._client.disconnecting=!1,this._client.reconnect());else{const o=Array.isArray(e)?e:[e],i=n.filter(e=>128===e.qos).map(e=>e.topic);i.length>0&&((r=new Error(`Could not subscribe all ${o.length} topic(s) but got error qos=128 on following ${i.length} topic(s): ${i}`)).code="SUBSCRIBE_FAILED",r.subscribeOptions=t,this._log.error(r),this.emit("error",r));const s=n.filter(e=>e.qos<this._qos);s.length>0&&((r=new Error(`Could not subscribe all ${o.length} topic(s) at desired qos=${this._qos} but got reduced qos on following ${s.length} topic(s): ${JSON.stringify(s)}`)).code="SUBSCRIBE_REDUCED_QOS",r.subscribeOptions=t,this._log.warn(r),this.emit("error",r)),0===n.length&&this._log.debug(`Already subscribed to: ${e}`)}})}_mqttUnsubscribe(e,t){this._client.unsubscribe(e,t,t=>{t&&this._log.warn(`Could not unsubscribe from topic: ${e} because: ${t.message}`)})}_createIfNotExist(e){this._agents[e]||(this._agents[e]={classes:{}})}async _getProxy(e,t,r){const{f:n,i:o}=r,i=`${this._domain}/${e}/${t}/__static__/${n}`;return await this._waitUntilClassIsOnline(e,t),this._mqttPublish(i,JSON.stringify(r)),new Promise((r,n)=>{const i=`Proxy creation for class "${t}" on agent "${e}" and domain "${this._domain}" timed out (> ${this._timeout} ms)`,s=setTimeout(()=>{this._eventEmitter.removeAllListeners(o),n(new Error(i))},this._timeout);this._eventEmitter.once(o,({e:o,r:i})=>{if(clearTimeout(s),o)n(new Error(o));else{const n=this._createProxy(e,t,i);r(n)}})})}async _waitUntilClassIsOnline(e,t){if(!this._hasClassOnline(e,t))return new Promise((r,n)=>{let o=null;const i=()=>{this._hasClassOnline(e,t)&&(o&&clearTimeout(o),this.removeListener("class",i),r())};o=setTimeout(()=>{this.removeListener("class",i),n(new Error(`Connection to class "${t}" on agent "${e}" and domain "${this._domain}" timed out (> ${this._timeout} ms)`))},this._timeout),this.on("class",i)})}_hasClassOnline(e,t){return this._agents[e]&&"online"===this._agents[e].status&&this._agents[e].classes[t]}_createProxy(e,t,r){const n=`${this._domain}/${e}/${t}/${r}`,o=`${this._instance}-${this._proxyId++}`,i={vrpcClientId:this._vrpcClientId,vrpcInstanceId:r,vrpcProxyId:o};let s=this._agents[e].classes[t].memberFunctions;s=s.map(e=>{const t=e.indexOf("-");return t>0?e.substring(0,t):e});const a=new Set(s);return a.forEach(s=>{i[s]="removeAllListeners"!==s?async(...i)=>{const a=this._wrapArguments({agent:e,className:t,instance:r,proxyId:o,functionName:s,args:i});if(!a)return!0;try{const t={c:r,f:s,a,i:`${this._instance}-${this._invokeId++%Number.MAX_SAFE_INTEGER}`,s:this._vrpcClientId,v:3};return this._mqttPublish(`${n}/${s}`,JSON.stringify(t)),this._handleAgentAnswer(t,e)}catch(e){throw new Error(`Could not remotely call "${s}" because: ${e.message}`)}}:async o=>{if(!o)throw new Error("VRPC does not support removing all listeners");const i=`${this._domain}/${e}/${t}/${r}:${o}`,a=`__e__${i}`;this._cachedSubscriptions[i]&&(this._eventEmitter.removeAllListeners(a),this._mqttUnsubscribe(i),delete this._cachedSubscriptions[i]);try{const t={c:r,f:s,a:[o],i:`${this._instance}-${this._invokeId++%Number.MAX_SAFE_INTEGER}`,s:this._vrpcClientId,v:3};return this._mqttPublish(`${n}/${s}`,JSON.stringify(t)),this._handleAgentAnswer(t,e)}catch(e){throw new Error(`Could not remotely call "${s}" because: ${e.message}`)}}}),a.has("vrpcOn")||a.has("vrpcOff")||(i.vrpcOn=async(i,...s)=>{if(!a.has(i))throw new Error("Bad magic");const l=this._wrapArguments({agent:e,className:t,instance:r,proxyId:o,functionName:"vrpcOn",args:[i,...s]});if(l)try{const t={c:r,f:i,a:l.slice(1),i:`${this._instance}-${this._invokeId++%Number.MAX_SAFE_INTEGER}`,s:this._vrpcClientId,v:3};return this._mqttPublish(`${n}/${i}`,JSON.stringify(t)),this._handleAgentAnswer(t,e)}catch(e){throw new Error(`Could not remotely call "${i}" because: ${e.message}`)}},i.vrpcOff=n=>{const o=`__e__${this._domain}/${e}/${t}/${r}-${n}`;this._eventEmitter.removeAllListeners(o)}),i}async _handleAgentAnswer({i:e,c:t,f:r},n){return new Promise((o,i)=>{const s=`Function call "${t}::${r}()" on agent "${n}" timed out (> ${this._timeout} ms)`,a=setTimeout(()=>{this._eventEmitter.removeAllListeners(e),i(new Error(s))},this._timeout);this._eventEmitter.once(e,e=>{if(clearTimeout(a),e.e){const{message:o,cause:s}=c._prepareError(e.e);i(new Error(`[vrpc ${n}-${t}-${r}]: ${o}`,{cause:s}))}else{const s=e.r;"string"==typeof s&&"__p__"===s.substring(0,5)?this._eventEmitter.once(s,e=>{if(e.e){const{message:o,cause:s}=c._prepareError(e.e);i(new Error(`[vrpc ${n}-${t}-${r}]: ${o}`,{cause:s}))}else o(e.r)}):o(s)}})})}static _prepareError(e){return"object"==typeof e?{message:e.message,cause:e.cause}:{message:e,cause:void 0}}async _waitForInstance(e,t={}){return new Promise((r,n)=>{const o=n=>(i,{agent:s,className:a})=>{if(i.includes(e)){if(t.agent&&s!==t.agent)return;if(t.className&&a!==t.className)return;clearTimeout(n),this.removeListener("instanceNew",o),r({agent:s,className:a,instance:e})}},i=setTimeout(()=>{this.removeListener("instanceNew",o(i));const t=`Could not find instance: ${e} (> ${this._timeout} ms)`;n(new Error(t))},this._timeout);this.on("instanceNew",o(i))})}_wrapArguments({agent:e,className:t,instance:r,proxyId:n,functionName:o,args:i}){const s=[];for(const[a,l]of i.entries()){if(this._isFunction(l)){const c=l;if("vrpcOn"===o||"on"===o&&1===a&&"string"==typeof i[0]){const n=i[0],o=this._onRemoteEvent({agent:e,className:t,instance:r,event:n,callback:c});s.push(o);continue}if("off"!==o&&"removeListener"!==o||1!==a||"string"!=typeof i[0]){const r=`__f__${n||`${e}-${t}`}-${o}-${a}-${this._invokeId++%Number.MAX_SAFE_INTEGER}`;s.push(r),this._eventEmitter.once(r,({a:e})=>l.apply(null,e));continue}{const n=i[0],o=this._offRemoteEvent({agent:e,className:t,instance:r,event:n,callback:c});s.push(o);continue}}if(this._isEmitter(l)){const{emitter:n,event:o}=l,i=this._onRemoteEvent({agent:e,className:t,instance:r,event:o,callback:(...e)=>n.emit(o,...e)});s.push(i);continue}s.push(l)}return s}_onRemoteEvent({agent:e,className:t,instance:r,event:n,callback:o}){const i=`${n}-${this._getCallbackId(o)}`,s=r?`${this._domain}/${e}/${t}/${r}:${i}`:`${this._domain}/${e}/${t}/${i}`,a=`__e__${s}`,l=({a:e})=>o.apply(null,e);return 0===this._eventEmitter.listenerCount(a)&&this._eventEmitter.on(a,l),this._cachedSubscriptions[s]?(this._cachedSubscriptions[s].push({callback:o,handler:l}),a):(this._mqttSubscribe(s),this._cachedSubscriptions[s]=[{callback:o,handler:l}],a)}_offRemoteEvent({agent:e,className:t,instance:r,event:n,callback:o}){const i=`${n}-${this._getCallbackId(o,{readOnly:!0})}`,s=r?`${this._domain}/${e}/${t}/${r}:${i}`:`${this._domain}/${e}/${t}/${i}`,a=`__e__${s}`;if(this._cachedSubscriptions[s]){const e=this._cachedSubscriptions[s].findIndex(e=>e.callback===o);if(-1===e)return this._log.warn(`Failed removing event listener ${a}`),null;const[{handler:t}]=this._cachedSubscriptions[s].splice(e,1);return 0===this._cachedSubscriptions[s].length?(this._eventEmitter.removeListener(a,t),this._mqttUnsubscribe(s),delete this._cachedSubscriptions[s],a):a}return this._log.warn(`Can not unsubscribe from non-existing event: ${n}`),a}_clearCachedSubscriptions({lostAgent:e,lostInstance:t}){Object.keys(this._cachedSubscriptions).filter(r=>{const[,n,,o]=r.split("/"),[i]=o.split(":");return n===e||i===t}).forEach(e=>{const t=`__e__${e}`;this._log.info(`Clearing subscriptions for obsolete topic: ${e}`),this._cachedSubscriptions[e].forEach(({handler:e})=>{this._eventEmitter.removeListener(t,e)}),this._mqttUnsubscribe(e),delete this._cachedSubscriptions[e]})}_stripSignature(e){const t=e.indexOf("-");return t>0?e.substring(0,t):e}_isFunction(e){const t={}.toString.call(e);return e&&("[object Function]"===t||"[object AsyncFunction]"===t)}_isEmitter(e){return e&&"object"==typeof e&&e.hasOwnProperty("emitter")&&e.hasOwnProperty("event")&&"object"==typeof e.emitter&&"function"==typeof e.emitter.emit}async _getInstanceData(e,t){const r=this._getInstanceFromCache(e,t);if(!r){if(t.noWait)throw new Error(`Could not find instance: ${e}`);return this._waitForInstance(e,t)}return r}_getInstanceFromCache(e,t={}){if(!t.agent&&"*"!==this._agent){const{classes:r,status:n}=this._agents[this._agent]||{};if(!r||"offline"===n)for(const n in r){if(t.className&&n!==t.className)continue;const{instances:o}=r[n];if(o&&o.includes(e))return{agent:this._agent,className:n,instance:e}}}for(const r in this._agents){if(t.agent&&r!==t.agent)continue;const{classes:n,status:o}=this._agents[r];if(n&&"offline"!==o)for(const o in n){if(t.className&&o!==t.className)continue;const{instances:i}=n[o];if(i&&i.includes(e))return{agent:r,className:o,instance:e}}}}_indicateDeprecation(e){n&&n.emitWarning?n.emitWarning(e,"DeprecationWarning"):this._log.warn("DEPRECATED ",e)}}e.exports=c},8643:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9029),o=r(4227),i=r(6250),s={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:e})=>n._`{allowedValues: ${e}}`},code(e){const{gen:t,data:r,$data:s,schema:a,schemaCode:l,it:c}=e;if(!s&&0===a.length)throw new Error("enum must have non-empty array");const u=a.length>=c.opts.loopEnum;let h;const f=()=>null!=h?h:h=(0,o.useFunc)(t,i.default);let p;if(u||s)p=t.let("valid"),e.block$data(p,function(){t.assign(p,!1),t.forOf("v",l,e=>t.if(n._`${f()}(${r}, ${e})`,()=>t.assign(p,!0).break()))});else{if(!Array.isArray(a))throw new Error("ajv implementation error");const e=t.const("vSchema",l);p=(0,n.or)(...a.map((t,o)=>function(e,t){const o=a[t];return"object"==typeof o&&null!==o?n._`${f()}(${r}, ${e}[${t}])`:n._`${r} === ${o}`}(e,o)))}e.pass(p)}};t.default=s},8660:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5765),o=r(9029),i=r(2023),s=r(4227),a={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:e})=>o._`{additionalProperty: ${e.additionalProperty}}`},code(e){const{gen:t,schema:r,parentSchema:a,data:l,errsCount:c,it:u}=e;if(!c)throw new Error("ajv implementation error");const{allErrors:h,opts:f}=u;if(u.props=!0,"all"!==f.removeAdditional&&(0,s.alwaysValidSchema)(u,r))return;const p=(0,n.allSchemaProperties)(a.properties),d=(0,n.allSchemaProperties)(a.patternProperties);function m(e){t.code(o._`delete ${l}[${e}]`)}function g(n){if("all"===f.removeAdditional||f.removeAdditional&&!1===r)m(n);else{if(!1===r)return e.setParams({additionalProperty:n}),e.error(),void(h||t.break());if("object"==typeof r&&!(0,s.alwaysValidSchema)(u,r)){const r=t.name("valid");"failing"===f.removeAdditional?(y(n,r,!1),t.if((0,o.not)(r),()=>{e.reset(),m(n)})):(y(n,r),h||t.if((0,o.not)(r),()=>t.break()))}}}function y(t,r,n){const o={keyword:"additionalProperties",dataProp:t,dataPropType:s.Type.Str};!1===n&&Object.assign(o,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(o,r)}t.forIn("key",l,r=>{p.length||d.length?t.if(function(r){let i;if(p.length>8){const e=(0,s.schemaRefOrVal)(u,a.properties,"properties");i=(0,n.isOwnProperty)(t,e,r)}else i=p.length?(0,o.or)(...p.map(e=>o._`${r} === ${e}`)):o.nil;return d.length&&(i=(0,o.or)(i,...d.map(t=>o._`${(0,n.usePattern)(e,t)}.test(${r})`))),(0,o.not)(i)}(r),()=>g(r)):g(r)}),e.ok(o._`${c} === ${i.default.errors}`)}};t.default=a},8665:(e,t,r)=>{const n=r(3282),o=r(7007),{nanoid:i}=r(3561),s="__global__",a="vrpc";class l{static registerClass(e,{onlyPublic:t=!0,withNew:r=!0,schema:n=null}={}){let o=l._extractStaticFunctions(e);t&&(o=o.filter(e=>!e.startsWith("_"))),o.push("__createIsolated__"),o.push("__createShared__"),o.push("__callAll__"),o.push("__delete__");let i=l._extractMemberFunctions(e);t&&(i=i.filter(e=>!e.startsWith("_"))),l._functionRegistry.set(e.name,{Klass:e,withNew:r,staticFunctions:o,memberFunctions:i,schema:n,meta:{}})}static registerFunction(e,t){if("function"!=typeof e)throw new Error("Provided argument must be a function object");console.log("registering function",t),window[a]||(window[a]={}),window[a][t]=e;const r=l._functionRegistry.get(s),n=r?[...r.staticFunctions,t]:[t];l._functionRegistry.set(s,{staticFunctions:n,memberFunctions:[],meta:{},Klass:{},withNew:!1,schema:null})}static registerInstance(e,{className:t,instance:r,onlyPublic:n=!0}={}){let o=l._extractMemberFunctions(e);n&&(o=o.filter(e=>!e.startsWith("_"))),l._functionRegistry.has(t)||l._functionRegistry.set(t,{memberFunctions:o,meta:{},Klass:{},withNew:!1,staticFunctions:[],schema:null}),l._instances.set(r,{className:t,instance:e,isIsolated:!1})}static create({className:e,instance:t=i(8),args:r=[],isIsolated:n=!1}={}){const o={c:e,a:[t,...r]},s=n?l._handleCreateIsolated(o):l._handleCreateShared(o);if(o.e)throw new Error(o.e);return s}static delete(e){if("string"==typeof e)return l._delete(e);if("object"==typeof e){for(const[t,r]of l._instances)if(r.instance===e)return l._instances.delete(t),!0;return!1}}static getInstance(e){const t=l._instances.get(e);if(t)return t.instance;throw new Error(`Could not find instance: ${e}`)}static getAvailableClasses(){return l._getClassesArray()}static getAvailableInstances(e){return l._getInstancesArray(e)}static call(e){const t=JSON.parse(e);return l._call(t),JSON.stringify(t)}static onCallback(e){l._callback=e}static on(e,t){l._emitter.on(e,t)}static once(e,t){l._emitter.once(e,t)}static off(e,t){l._emitter.off(e,t)}static removeAllListeners(e){l._emitter.removeAllListeners(e)}static _call(e){switch(l._mustTrackClient=!1,e.f){case"__createIsolated__":l._handleCreateIsolated(e);break;case"__createShared__":l._handleCreateShared(e);break;case"__callAll__":l._handleCallAll(e);break;case"__delete__":l._handleDelete(e);break;default:l._handleCall(e)}return l._mustTrackClient}static _handleCreateIsolated(e){let t;try{const r=e.c,[n,...o]=e.a;t=l._create(r,n,...o),l._instances.set(n,{instance:t,className:r,isIsolated:!0}),l._emitter.emit("create",{args:o,className:r,isIsolated:!0,instance:n}),e.r=n}catch(t){e.e=t.message}return t}static _handleCreateShared(e){let t;try{const r=e.c,[n,...o]=e.a;t=l._create(r,n,...o),l._instances.set(n,{instance:t,className:r,isIsolated:!1}),e.r=n,l._emitter.emit("create",{args:o,className:r,isIsolated:!1,instance:n})}catch(t){e.e=t.message}return t}static _handleCallAll(e){try{const t=[];for(const[r,{className:n,instance:o,isIsolated:i}]of l._instances){if(n!==e.c||i)continue;let s=!0,a=null;try{const t=l._unwrapArguments(e,r);t&&(s=o[t[0]].apply(o,t.slice(1)),s=l.sanitizeEventListenerReturnValues(s))}catch(e){a=e.message}l._isPromise(s)?t.push(s.then(e=>({id:r,val:e,err:null})).catch(e=>({id:r,err:e,val:null}))):t.push({id:r,val:s,err:a})}this._handlePromise(e,Promise.allSettled(t).then(e=>e.filter(e=>"fulfilled"===e.status).map(e=>e.value)))}catch(t){e.e=t.message}}static sanitizeEventListenerReturnValues(e){return!(!e||"object"!=typeof e||void 0===e._events||void 0===e._eventsCount)||e}static _handleDelete(e){try{const t=e.a[0];l._emitter.emit("beforeDelete",{instance:t,className:e.c}),e.r=l._delete(t),l._emitter.emit("delete",{instance:t,className:e.c})}catch(t){e.e=t.message}}static _handleCall(e){if("removeAllListeners"===e.f)return l._removeAllListeners(e.a[0],e.s,e.c),void(e.r=!0);const t=l._unwrapArguments(e);if(!t)return void(e.r=!0);if(e.c===s){try{const r=window[a][e.f].apply(null,t);l._isPromise(r)?l._handlePromise(e,r):e.r=r}catch(t){e.e=t.message}return}const r=l._functionRegistry.get(e.c);if(void 0!==r){const{Klass:n}=r;if(!l._isFunction(n[e.f]))throw new Error(`Could not find static function: ${e.f}`);try{const r=n[e.f].apply(null,t);l._isPromise(r)?l._handlePromise(e,r):e.r=r}catch(t){e.e=t.message}}else{const r=l._instances.get(e.c);if(void 0===r)throw new Error(`Could not find context: ${e.c}`);const{instance:n}=r;if(!l._isFunction(n[e.f]))throw new Error(`Could not find member function: ${e.f}`);try{let r=n[e.f].apply(n,t);r=l.sanitizeEventListenerReturnValues(r),l._isPromise(r)?l._handlePromise(e,r):e.r=r}catch(t){e.e=t.message}}}static _create(e,t,...r){const n=l._instances.get(t);if(n)return n.instance;const{Klass:o,withNew:i,schema:s}=l._getClassEntry(e);return null!==s&&l._validate(s,...r),i?new o(...r):o(...r)}static _delete(e){const t=l._instances.get(e);return!!t&&(l._isFunction(t.removeAllListeners)&&t.removeAllListeners(),delete l._listeners[e],l._instances.delete(e),!0)}static _unregisterClient(e){Object.entries(l._listeners).forEach(([t,r])=>{Object.entries(r).forEach(([r,n])=>{const{clients:o,listener:i,event:s}=n,a=o.indexOf(e);if(-1!==a&&(o.splice(a,1),0===o.length)){const e=l.getInstance(t);e&&e.removeListener&&e.removeListener(s,i),delete l._listeners[t][r]}})})}static _validate(e,t){if(l._ajv||(l._ajv=new n({useDefaults:!0})),!l._ajv.validate(e,t))throw new Error(l._ajv.errorsText())}static _unwrapArguments(e,t){const r=e.s,n=void 0!==t,o=n?t:e.c,i=n?e.a.slice(1):e.a,s=n?e.a[0]:e.f,a=n?[s]:[];for(const e of i)if("string"==typeof e)if(e.startsWith("__f__"))a.push(l._generateCallback({clientId:r,isCallAll:n,instanceId:o,eventId:e}));else if(e.startsWith("__e__"))if("on"===s||"addListener"===s){l._mustTrackClient=!0;const t=l._registerListener({clientId:r,isCallAll:n,instanceId:o,eventId:e,event:i[0]});if(!t)return null;a.push(t)}else if("off"===s||"removeListener"===s){const t=l._unregisterListener({clientId:r,instanceId:o,eventId:e});if(!t)return null;a.push(t)}else{l._mustTrackClient=!0;const t=l._registerListener({clientId:r,isCallAll:n,instanceId:o,eventId:e,event:null});a.push(t)}else a.push(e);else a.push(e);return a}static _generateCallback({eventId:e,clientId:t,instanceId:r,isCallAll:n}){return(...o)=>{const i=n?[r,...o]:[...o];l._callback({a:i,s:t,i:e})}}static _registerListener({eventId:e,clientId:t,instanceId:r,event:n,isCallAll:o}){return l._listeners[r]?l._listeners[r][e]?(l._listeners[r][e].clients.push(t),null):(l._listeners[r][e]={event:n,clients:[t],listener:l._generateListener({eventId:e,instanceId:r,isCallAll:o})},l._listeners[r][e].listener):(l._listeners[r]={[e]:{event:n,clients:[t],listener:l._generateListener({eventId:e,instanceId:r,isCallAll:o})}},l._listeners[r][e].listener)}static _generateListener({eventId:e,instanceId:t,isCallAll:r}){return(...n)=>{const o=r?[t,...n]:[...n];l._callback({a:o,i:e})}}static _unregisterListener({eventId:e,clientId:t,instanceId:r}){if(l._listeners[r]&&l._listeners[r][e]){const{listener:n,clients:o}=l._listeners[r][e],i=o.indexOf(t);if(-1!==i&&o.splice(i,1),0===o.length)return delete l._listeners[r][e],0===Object.keys(l._listeners[r]).length&&delete l._listeners[r],n}}static _removeAllListeners(e,t,r){const n=l._listeners[r];n&&Object.entries(n).forEach(([n,o])=>{o.event===e&&o.clients.includes(t)&&(o.clients=o.clients.filter(e=>e!==t),0===o.clients.length&&(l.getInstance(r).removeListener(o.event,o.listener),delete l._listeners[r][n]))})}static _handlePromise(e,t){try{const r=l._correlationId++%Number.MAX_SAFE_INTEGER,n=`__p__${e.f}-${r}`;e.r=n,t.then(t=>l._callback({...e,r:t,i:n})).catch(t=>l._callback({...e,e:t.message,i:n}))}catch(t){e.data.e=t.message}}static _getClassEntry(e){const t=l._functionRegistry.get(e);if(!t)throw new Error(`"${e}" is not a registered class`);return t}static _isFunction(e){if(e){const t={}.toString.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t}return!1}static _isClass(e){return!!e&&"function"==typeof e&&/^\s*class\s+/.test(e.toString())}static _isPromise(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}static _extractMemberFunctions(e){let t=e,r=[];do{if(t.prototype){const e=Object.getOwnPropertyNames(t.prototype).filter(e=>!l._blackList.has(e)&&l._isFunction(t.prototype[e]));r=[...r,...e]}else{const e=Object.getOwnPropertyNames(t).filter(e=>!l._blackList.has(e)&&l._isFunction(t[e]));r=[...r,...e]}t=Object.getPrototypeOf(t)}while(t);return Array.from(new Set(r))}static _extractStaticFunctions(e){let t=e,r=[];do{r=[...r,...Object.getOwnPropertyNames(t).filter(e=>{const r=Object.getOwnPropertyDescriptor(t,e);return!!r&&"function"==typeof r.value})],t=Object.getPrototypeOf(t)}while(t&&t.name);return Array.from(new Set(r))}static _getClassesArray(){return Array.from(l._functionRegistry.keys())}static _getInstancesArray(e){const t=[];return l._instances.forEach((r,n)=>{r.className!==e||r.isIsolated||t.push(n)}),t}static _getMemberFunctionsArray(e){const t=l._functionRegistry.get(e);return t?t.memberFunctions:[]}static _getStaticFunctionsArray(e){const t=l._functionRegistry.get(e);return t?t.staticFunctions:[]}static _getMetaData(e){const t=l._functionRegistry.get(e);return t&&t.meta?t.meta:{}}}l._functionRegistry=new Map,l._instances=new Map,l._emitter=new o,l._correlationId=0,l._listeners={},l._blackList=new Set(["caller","callee","arguments","apply","bind","call","toString","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","valueOf","toLocaleString","__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__"]),e.exports=l},8708:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const n=r(9029),o=r(4227),i=r(2023);function s(e,t){const r=e.const("err",t);e.if(n._`${i.default.vErrors} === null`,()=>e.assign(i.default.vErrors,n._`[${r}]`),n._`${i.default.vErrors}.push(${r})`),e.code(n._`${i.default.errors}++`)}function a(e,t){const{gen:r,validateName:o,schemaEnv:i}=e;i.$async?r.throw(n._`new ${e.ValidationError}(${t})`):(r.assign(n._`${o}.errors`,t),r.return(!1))}t.keywordError={message:({keyword:e})=>n.str`must pass "${e}" keyword validation`},t.keyword$DataError={message:({keyword:e,schemaType:t})=>t?n.str`"${e}" keyword must be ${t} ($data)`:n.str`"${e}" keyword is invalid ($data)`},t.reportError=function(e,r=t.keywordError,o,i){const{it:l}=e,{gen:u,compositeRule:h,allErrors:f}=l,p=c(e,r,o);(null!=i?i:h||f)?s(u,p):a(l,n._`[${p}]`)},t.reportExtraError=function(e,r=t.keywordError,n){const{it:o}=e,{gen:l,compositeRule:u,allErrors:h}=o;s(l,c(e,r,n)),u||h||a(o,i.default.vErrors)},t.resetErrorsCount=function(e,t){e.assign(i.default.errors,t),e.if(n._`${i.default.vErrors} !== null`,()=>e.if(t,()=>e.assign(n._`${i.default.vErrors}.length`,t),()=>e.assign(i.default.vErrors,null)))},t.extendErrors=function({gen:e,keyword:t,schemaValue:r,data:o,errsCount:s,it:a}){if(void 0===s)throw new Error("ajv implementation error");const l=e.name("err");e.forRange("i",s,i.default.errors,s=>{e.const(l,n._`${i.default.vErrors}[${s}]`),e.if(n._`${l}.instancePath === undefined`,()=>e.assign(n._`${l}.instancePath`,(0,n.strConcat)(i.default.instancePath,a.errorPath))),e.assign(n._`${l}.schemaPath`,n.str`${a.errSchemaPath}/${t}`),a.opts.verbose&&(e.assign(n._`${l}.schema`,r),e.assign(n._`${l}.data`,o))})};const l={keyword:new n.Name("keyword"),schemaPath:new n.Name("schemaPath"),params:new n.Name("params"),propertyName:new n.Name("propertyName"),message:new n.Name("message"),schema:new n.Name("schema"),parentSchema:new n.Name("parentSchema")};function c(e,t,r){const{createErrors:o}=e.it;return!1===o?n._`{}`:function(e,t,r={}){const{gen:o,it:s}=e,a=[u(s,r),h(e,r)];return function(e,{params:t,message:r},o){const{keyword:s,data:a,schemaValue:c,it:u}=e,{opts:h,propertyName:f,topSchemaRef:p,schemaPath:d}=u;o.push([l.keyword,s],[l.params,"function"==typeof t?t(e):t||n._`{}`]),h.messages&&o.push([l.message,"function"==typeof r?r(e):r]),h.verbose&&o.push([l.schema,c],[l.parentSchema,n._`${p}${d}`],[i.default.data,a]),f&&o.push([l.propertyName,f])}(e,t,a),o.object(...a)}(e,t,r)}function u({errorPath:e},{instancePath:t}){const r=t?n.str`${e}${(0,o.getErrorPath)(t,o.Type.Str)}`:e;return[i.default.instancePath,(0,n.strConcat)(i.default.instancePath,r)]}function h({keyword:e,it:{errSchemaPath:t}},{schemaPath:r,parentSchema:i}){let s=i?t:n.str`${t}/${e}`;return r&&(s=n.str`${s}${(0,o.getErrorPath)(r,o.Type.Str)}`),[l.schemaPath,s]}},8727:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.boolOrEmptySchema=t.topBoolOrEmptySchema=void 0;const n=r(8708),o=r(9029),i=r(2023),s={message:"boolean schema is false"};function a(e,t){const{gen:r,data:o}=e,i={gen:r,keyword:"false schema",data:o,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,n.reportError)(i,s,void 0,t)}t.topBoolOrEmptySchema=function(e){const{gen:t,schema:r,validateName:n}=e;!1===r?a(e,!1):"object"==typeof r&&!0===r.$async?t.return(i.default.data):(t.assign(o._`${n}.errors`,null),t.return(!0))},t.boolOrEmptySchema=function(e,t){const{gen:r,schema:n}=e;!1===n?(r.var(t,!1),a(e)):r.var(t,!0)}},9029:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const n=r(1520),o=r(7845);var i=r(1520);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return i._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return i.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return i.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return i.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return i.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return i.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return i.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return i.Name}});var s=r(7845);Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),t.operators={GT:new n._Code(">"),GTE:new n._Code(">="),LT:new n._Code("<"),LTE:new n._Code("<="),EQ:new n._Code("==="),NEQ:new n._Code("!=="),NOT:new n._Code("!"),OR:new n._Code("||"),AND:new n._Code("&&"),ADD:new n._Code("+")};class a{optimizeNodes(){return this}optimizeNames(e,t){return this}}class l extends a{constructor(e,t,r){super(),this.varKind=e,this.name=t,this.rhs=r}render({es5:e,_n:t}){const r=e?o.varKinds.var:this.varKind,n=void 0===this.rhs?"":` = ${this.rhs}`;return`${r} ${this.name}${n};`+t}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=T(this.rhs,e,t)),this}get names(){return this.rhs instanceof n._CodeOrName?this.rhs.names:{}}}class c extends a{constructor(e,t,r){super(),this.lhs=e,this.rhs=t,this.sideEffects=r}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,t){if(!(this.lhs instanceof n.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=T(this.rhs,e,t),this}get names(){return $(this.lhs instanceof n.Name?{}:{...this.lhs.names},this.rhs)}}class u extends c{constructor(e,t,r,n){super(e,r,n),this.op=t}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}}class h extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}}class f extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}}class p extends a{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}}class d extends a{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,t){return this.code=T(this.code,e,t),this}get names(){return this.code instanceof n._CodeOrName?this.code.names:{}}}class m extends a{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((t,r)=>t+r.render(e),"")}optimizeNodes(){const{nodes:e}=this;let t=e.length;for(;t--;){const r=e[t].optimizeNodes();Array.isArray(r)?e.splice(t,1,...r):r?e[t]=r:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){const{nodes:r}=this;let n=r.length;for(;n--;){const o=r[n];o.optimizeNames(e,t)||(C(e,o.names),r.splice(n,1))}return r.length>0?this:void 0}get names(){return this.nodes.reduce((e,t)=>O(e,t.names),{})}}class g extends m{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class y extends m{}class b extends g{}b.kind="else";class _ extends g{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();const e=this.condition;if(!0===e)return this.nodes;let t=this.else;if(t){const e=t.optimizeNodes();t=this.else=Array.isArray(e)?new b(e):e}return t?!1===e?t instanceof _?t:t.nodes:this.nodes.length?this:new _(j(e),t instanceof _?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}optimizeNames(e,t){var r;if(this.else=null===(r=this.else)||void 0===r?void 0:r.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=T(this.condition,e,t),this}get names(){const e=super.names;return $(e,this.condition),this.else&&O(e,this.else.names),e}}_.kind="if";class v extends g{}v.kind="for";class w extends v{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=T(this.iteration,e,t),this}get names(){return O(super.names,this.iteration.names)}}class S extends v{constructor(e,t,r,n){super(),this.varKind=e,this.name=t,this.from=r,this.to=n}render(e){const t=e.es5?o.varKinds.var:this.varKind,{name:r,from:n,to:i}=this;return`for(${t} ${r}=${n}; ${r}<${i}; ${r}++)`+super.render(e)}get names(){const e=$(super.names,this.from);return $(e,this.to)}}class E extends v{constructor(e,t,r,n){super(),this.loop=e,this.varKind=t,this.name=r,this.iterable=n}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=T(this.iterable,e,t),this}get names(){return O(super.names,this.iterable.names)}}class A extends g{constructor(e,t,r){super(),this.name=e,this.args=t,this.async=r}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}}A.kind="func";class I extends m{render(e){return"return "+super.render(e)}}I.kind="return";class P extends g{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}optimizeNames(e,t){var r,n;return super.optimizeNames(e,t),null===(r=this.catch)||void 0===r||r.optimizeNames(e,t),null===(n=this.finally)||void 0===n||n.optimizeNames(e,t),this}get names(){const e=super.names;return this.catch&&O(e,this.catch.names),this.finally&&O(e,this.finally.names),e}}class k extends g{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}k.kind="catch";class x extends g{render(e){return"finally"+super.render(e)}}function O(e,t){for(const r in t)e[r]=(e[r]||0)+(t[r]||0);return e}function $(e,t){return t instanceof n._CodeOrName?O(e,t.names):e}function T(e,t,r){return e instanceof n.Name?i(e):(o=e)instanceof n._Code&&o._items.some(e=>e instanceof n.Name&&1===t[e.str]&&void 0!==r[e.str])?new n._Code(e._items.reduce((e,t)=>(t instanceof n.Name&&(t=i(t)),t instanceof n._Code?e.push(...t._items):e.push(t),e),[])):e;var o;function i(e){const n=r[e.str];return void 0===n||1!==t[e.str]?e:(delete t[e.str],n)}}function C(e,t){for(const r in t)e[r]=(e[r]||0)-(t[r]||0)}function j(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:n._`!${B(e)}`}x.kind="finally",t.CodeGen=class{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?"\n":""},this._extScope=e,this._scope=new o.Scope({parent:e}),this._nodes=[new y]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){const r=this._extScope.value(e,t);return(this._values[r.prefix]||(this._values[r.prefix]=new Set)).add(r),r}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,r,n){const o=this._scope.toName(t);return void 0!==r&&n&&(this._constants[o.str]=r),this._leafNode(new l(e,o,r)),o}const(e,t,r){return this._def(o.varKinds.const,e,t,r)}let(e,t,r){return this._def(o.varKinds.let,e,t,r)}var(e,t,r){return this._def(o.varKinds.var,e,t,r)}assign(e,t,r){return this._leafNode(new c(e,t,r))}add(e,r){return this._leafNode(new u(e,t.operators.ADD,r))}code(e){return"function"==typeof e?e():e!==n.nil&&this._leafNode(new d(e)),this}object(...e){const t=["{"];for(const[r,o]of e)t.length>1&&t.push(","),t.push(r),(r!==o||this.opts.es5)&&(t.push(":"),(0,n.addCodeArg)(t,o));return t.push("}"),new n._Code(t)}if(e,t,r){if(this._blockNode(new _(e)),t&&r)this.code(t).else().code(r).endIf();else if(t)this.code(t).endIf();else if(r)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new _(e))}else(){return this._elseNode(new b)}endIf(){return this._endBlockNode(_,b)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new w(e),t)}forRange(e,t,r,n,i=(this.opts.es5?o.varKinds.var:o.varKinds.let)){const s=this._scope.toName(e);return this._for(new S(i,s,t,r),()=>n(s))}forOf(e,t,r,i=o.varKinds.const){const s=this._scope.toName(e);if(this.opts.es5){const e=t instanceof n.Name?t:this.var("_arr",t);return this.forRange("_i",0,n._`${e}.length`,t=>{this.var(s,n._`${e}[${t}]`),r(s)})}return this._for(new E("of",i,s,t),()=>r(s))}forIn(e,t,r,i=(this.opts.es5?o.varKinds.var:o.varKinds.const)){if(this.opts.ownProperties)return this.forOf(e,n._`Object.keys(${t})`,r);const s=this._scope.toName(e);return this._for(new E("in",i,s,t),()=>r(s))}endFor(){return this._endBlockNode(v)}label(e){return this._leafNode(new h(e))}break(e){return this._leafNode(new f(e))}return(e){const t=new I;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(I)}try(e,t,r){if(!t&&!r)throw new Error('CodeGen: "try" without "catch" and "finally"');const n=new P;if(this._blockNode(n),this.code(e),t){const e=this.name("e");this._currNode=n.catch=new k(e),t(e)}return r&&(this._currNode=n.finally=new x,this.code(r)),this._endBlockNode(k,x)}throw(e){return this._leafNode(new p(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){const t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");const r=this._nodes.length-t;if(r<0||void 0!==e&&r!==e)throw new Error(`CodeGen: wrong number of nodes: ${r} vs ${e} expected`);return this._nodes.length=t,this}func(e,t=n.nil,r,o){return this._blockNode(new A(e,t,r)),o&&this.code(o).endFunc(),this}endFunc(){return this._endBlockNode(A)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){const r=this._currNode;if(r instanceof e||t&&r instanceof t)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${t?`${e.kind}/${t.kind}`:e.kind}"`)}_elseNode(e){const t=this._currNode;if(!(t instanceof _))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){const e=this._nodes;return e[e.length-1]}set _currNode(e){const t=this._nodes;t[t.length-1]=e}},t.not=j;const R=M(t.operators.AND);t.and=function(...e){return e.reduce(R)};const N=M(t.operators.OR);function M(e){return(t,r)=>t===n.nil?r:r===n.nil?t:n._`${B(t)} ${e} ${B(r)}`}function B(e){return e instanceof n.Name?e:n._`(${e})`}t.or=function(...e){return e.reduce(N)}},9045:(e,t,r)=>{var n=r(3738).default;e.exports=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},9293:e=>{function t(e,t,r,n,o,i,s){try{var a=e[i](s),l=a.value}catch(e){return void r(e)}a.done?t(l):Promise.resolve(l).then(n,o)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise(function(o,i){var s=e.apply(r,n);function a(e){t(s,o,i,a,l,"next",e)}function l(e){t(s,o,i,a,l,"throw",e)}a(void 0)})}},e.exports.__esModule=!0,e.exports.default=e.exports},9713:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9029),o=r(4227),i={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:e})=>n._`{propertyName: ${e.propertyName}}`},code(e){const{gen:t,schema:r,data:i,it:s}=e;if((0,o.alwaysValidSchema)(s,r))return;const a=t.name("valid");t.forIn("key",i,r=>{e.setParams({propertyName:r}),e.subschema({keyword:"propertyNames",data:r,dataTypes:["string"],propertyName:r,compositeRule:!0},a),t.if((0,n.not)(a),()=>{e.error(!0),s.allErrors||t.break()})}),e.ok(a)}};t.default=i},9857:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contentVocabulary=t.metadataVocabulary=void 0,t.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],t.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}return r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(1860)})());